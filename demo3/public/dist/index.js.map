{
  "version": 3,
  "sources": ["../../dist/littlejs.esm.min.js", "../../dist/littlejs.esm.min.js", "../../dist/littlejs.esm.min.js", "../../src/lib/littlejs.ts", "../../src/animation/animation-manager.ts", "../../src/game-object.ts", "../../src/hud.ts", "../../src/manager.ts", "../../src/content/definitions/cabana.ts", "../../src/content/definitions/cow.ts", "../../src/content/definitions/dog.ts", "../../src/content/definitions/house.ts", "../../src/content/definitions/river.ts", "../../src/content/definitions/sheep.ts", "../../src/content/menu/cow-menu.ts", "../../src/content/menu/house-menu-debug.ts", "../../src/content/menu/house-menu.ts", "../../src/content/menu/sheep-menu.ts", "../../src/content/research/beaver.ts", "../../src/content/research/bovine.ts", "../../src/content/research/canine.ts", "../../src/content/research/elephant.ts", "../../src/content/research/eagle.ts", "../../src/content/research/goat.ts", "../../src/content/research/horse.ts", "../../src/content/research/lama.ts", "../../src/content/research/monkey.ts", "../../src/content/research/owl.ts", "../../src/content/research/panda.ts", "../../src/content/research/pig.ts", "../../src/content/research/skunk.ts", "../../src/content/research/squirrel.ts", "../../src/content/research/tortoise.ts", "../../src/content/research/wolves.ts", "../../src/content/resources/brain.ts", "../../src/content/resources/gold.ts", "../../src/content/resources/trade.ts", "../../src/content/resources/wheat.ts", "../../src/content/resources/wood.ts", "../../src/content/research/rabbit.ts", "../../src/content/animations/indicators.ts", "../../src/content/animations/sheep.ts", "../../src/content/animations/terrain.ts", "../../src/content/animations/cloud.ts", "../../src/content/animations/shadow.ts", "../../src/content/animations/house.ts", "../../src/content/animations/digits.ts", "../../src/content/animations/dog.ts", "../../src/content/animations/cow.ts", "../../src/content/animations/resources.ts", "../../src/content/elems/cursor.ts", "../../src/content/constant.ts", "../../src/content/elems/cloud.ts", "../../src/content/elems/grass.ts", "../../src/content/elems/plain.ts", "../../src/content/elems/lake.ts", "../../src/content/elems/tree.ts", "../../src/content/elems/mountain.ts", "../../src/content/definitions/hobo.ts", "../../src/content/elems/sheep.ts", "../../src/content/elems/cabana.ts", "../../src/content/animations/hobo.ts", "../../src/content/world.ts", "../../src/index.ts"],
  "sourcesContent": [
    "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "export {\n  cameraPos, cameraScale, EngineObject,\n  mousePos, mouseWasPressed, mouseWasReleased,\n  setCameraPos, setCameraScale, vec2,\n  Vector2, Color, randColor,\n  engineInit, TileInfo,\n} from '../../dist/littlejs.esm.min';\n// } from 'littlejsengine';\nimport { setEnablePhysicsSolver, setGamepadsEnable } from '../../dist/littlejs.esm.min';\nexport * as LittleJS from \"../../dist/littlejs.esm.min\";\n\nsetEnablePhysicsSolver(false);\nsetGamepadsEnable(false);\n",
  "import { TileInfo, vec2 } from \"../lib/littlejs\";\nimport type { Anim } from \"../definition/animation\";\n\nexport interface AnimationInfo {\n  animation?: Anim;\n  tileInfos: TileInfo[];\n  airFramesSet?: Set<number>;\n}\n\nexport class AnimationManager {\n  private readonly animationInfos: Record<string, AnimationInfo> = {};\n  readonly imageSources: string[] = [];\n\n  constructor(animations: Anim[]) {\n    this.saveImageSource(animations);\n    this.registerAnimations(animations);\n    this.registerTileInfos(animations);\n    this.updateExtra(animations);\n  }\n\n  private saveImageSource(animations: Anim[]) {\n    animations?.forEach((animation) => {\n      if (animation.imageSource && !this.imageSources.includes(animation.imageSource)) {\n        this.imageSources.push(animation.imageSource);\n      }\n    });\n  }\n\n  private ensureAnimationInfos(name: string) {\n    if (!this.animationInfos[name]) {\n      this.animationInfos[name] = {\n        animation: undefined,\n        tileInfos: [],\n      };\n    }\n    return this.animationInfos[name];\n  }\n\n  private registerTileInfos(animations: Anim[]) {\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      const imgSource = animation.imageSource;\n      if (imgSource) {\n        const size = vec2(animation.spriteSize?.[0] ?? 0, animation.spriteSize?.[1] ?? 0);\n        animation.frames?.forEach((frame) => {\n          const mul = animation.mul ?? 1;\n          const cols = 30;\n          for (let i = 0; i < mul; i++) {\n            animInfo.tileInfos.push(new TileInfo(undefined,\n              size,\n              this.imageSources.indexOf(imgSource),\n              2).frame(frame % cols).offset(vec2(0, Math.floor(frame / cols) * (size.y + 2))));\n          }\n        });\n      }\n\n\n    });\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      animation.children?.forEach((child) => {\n        const childAnimInfo = this.getInfo(child);\n        animInfo.tileInfos.push(...childAnimInfo.tileInfos);\n      });\n    });\n  }\n\n  private registerAnimations(animations: Anim[]) {\n    animations?.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      animInfo.animation = animation;\n    });\n  }\n\n  private updateExtra(animations: Anim[]) {\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      if (animation.airFrames?.length) {\n        let count = 0;\n        animInfo.airFramesSet = new Set();\n        animation.frames?.forEach((frame) => {\n          const mul = animation.mul ?? 1;\n          for (let i = 0; i < mul; i++) {\n            if (animation.airFrames?.includes(frame)) {\n              animInfo.airFramesSet?.add(count);\n            }\n            count++;\n          }\n        });\n      }\n    });\n  }\n\n  getInfo(name: string) {\n    return this.animationInfos[name];\n  }\n}\n",
  "import { Color, EngineObject, mousePos, mouseWasPressed, mouseWasReleased, randColor, vec2, Vector2 } from \"./lib/littlejs\";\nimport type { Elem } from \"./definition/elem\";\nimport type { Manager } from \"./manager\";\nimport type { AnimationInfo } from \"./animation/animation-manager\";\nimport type { Resources } from \"./definition/resources\";\n\nexport class GameObject extends EngineObject {\n  animationInfo?: AnimationInfo;\n  hoveredAnimationInfo?: AnimationInfo;\n  selectedAnimationInfo?: AnimationInfo;\n  moveAnimationInfo?: AnimationInfo;\n  harvestAnimationInfo?: AnimationInfo;\n  shadowAnimationInfo?: AnimationInfo;\n  frameRate: number = 60;\n  mouseFollower?: { offset: Vector2; snap?: number };\n  px: number = 0; py: number = 0;\n  positionDetached?: boolean;\n  type?: string;\n  onHoverHideCursor?: boolean;\n  visible: boolean = true;\n  elem?: Elem;\n  hovered: boolean = false;\n  decors: EngineObject[] = [];\n  shadow?: EngineObject;\n  labels: EngineObject[] = [];\n  updated?: boolean = false;\n  moveOptions?: Record<string, EngineObject>;\n  clearedCloud?: boolean;\n  lastDx: number = 1;\n  bornTime: number = Date.now();\n  moveQueue?: Vector2[];\n  resources: EngineObject[] = [];\n  floatResources?: number;\n  resourceBars: EngineObject[] = [];\n  moving?: boolean;\n\n  constructor(public manager: Manager, private gridShift: Vector2 = vec2(0, 0)) {\n    super();\n  }\n\n  getColor(color: string): Color {\n    if (color === \"random\") {\n      return randColor();\n    } else {\n      return new Color().setHex(color);\n    }\n  }\n\n  refresh(elem: Elem) {\n    if (!this.elem) {\n      const definition = this.manager.scene.definitions.find((def) => def.name === elem.definition);\n      if (definition) {\n        this.elem = JSON.parse(JSON.stringify(definition));\n      } else {\n        this.elem = elem;\n      }\n    }\n    elem = this.elem!;\n    const config = elem.gameObject;\n    if (config) {\n      this.type = elem.type;\n      this.visible = !config.hidden;\n      if (this.type === \"cursor\") {\n        this.manager.cursor = this;\n      }\n      if (!this.positionDetached) {\n        const px = this.gridShift.x + (config.pos?.[0] ?? 0);\n        const py = this.gridShift.y + (config.pos?.[1] ?? 0);\n        this.setPosition(px, py, true);\n        const offset = this.elem?.gameObject?.offset ?? [0, 0];\n        this.pos.set(px + offset[0], py + offset[1]);\n        this.updateSize();\n        this.size.set(\n          this.visible ? config.size?.[0] : 0,\n          this.visible ? config.size?.[1] : 0,\n        );\n        if (config.rotation) {\n          this.angle = config.rotation;\n        }\n      }\n      if (config.color) {\n        this.color = this.getColor(config.color);\n      }\n      if (elem.animation) {\n        this.animationInfo = this.manager.animation.getInfo(elem.animation.name);\n      }\n      if (elem.onHover) {\n        if (elem.onHover.animation) {\n          this.hoveredAnimationInfo = this.manager.animation.getInfo(elem.onHover.animation);\n        }\n        this.onHoverHideCursor = elem.onHover.hideCursor;\n      }\n      if (elem.selected) {\n        if (elem.selected.animation) {\n          this.selectedAnimationInfo = this.manager.animation.getInfo(elem.selected.animation);\n        }\n      }\n      if (elem.move) {\n        if (elem.move.animation) {\n          this.moveAnimationInfo = this.manager.animation.getInfo(elem.move.animation);\n        }\n      }\n      if (elem.harvest) {\n        if (elem.harvest.animation) {\n          this.harvestAnimationInfo = this.manager.animation.getInfo(elem.harvest.animation);\n        }\n      }\n      if (elem.shadow) {\n        if (elem.shadow.animation) {\n          this.shadowAnimationInfo = this.manager.animation.getInfo(elem.shadow.animation);\n          if (!this.shadow) {\n            this.shadow = new EngineObject();\n            this.shadow.size.set(this.size.x, this.size.y);\n            this.shadow.tileInfo = this.getTileInfoAnimate(this.shadowAnimationInfo);\n            const offset = this.elem?.gameObject?.offset ?? [0, 0];\n            this.addChild(this.shadow, vec2(-offset[0], -offset[1]));\n          }\n        }\n      }\n      if (elem.mouseFollower) {\n        this.mouseFollower = {\n          offset: vec2(elem.mouseFollower.offset?.[0] ?? 0, elem.mouseFollower.offset?.[1] ?? 0),\n          snap: elem.mouseFollower.snap,\n        };\n      }\n      if (elem.spread) {\n        const { animation, count, radius, color, size } = elem.spread;\n        const animInfo = this.manager.animation.getInfo(animation);\n        const actualCount = count[0] + Math.floor(Math.random() * (count[1] - count[0]));\n        for (let i = 0; i < actualCount; i++) {\n          const x = (Math.random() - 1 / 2) * (size ?? 1);\n          const y = (Math.random() - 1 / 2) * (size ?? 1);\n          if (radius && x * x + y * y > radius * radius) {\n            continue;\n          }\n          const decor = new EngineObject();\n          decor.tileInfo = this.getTileInfoAnimate(animInfo);\n          this.addChild(decor, vec2(x, y));\n          if (color) {\n            decor.color = this.getColor(color);\n          }\n          this.decors.push(decor);\n        }\n        if (elem.branchOut) {\n          const shouldBrachOut = Math.random() <= (elem.branchOut.chance ?? 1);\n          const { count, element } = elem.branchOut;\n          const actualCount = !shouldBrachOut ? 1 : count[0] + Math.floor(Math.random() * (count[1] - count[0]));\n          let pos = vec2(this.pos.x, this.pos.y);\n          const directions: [number, number][] = [[-1, 0], [0, -1], [1, 0], [0, 1]];\n          let lastDir: [number, number] | undefined;\n          let prePos: Vector2 = pos.copy();\n          for (let i = 0; i < actualCount; i++) {\n            const oppositeDirIndex = lastDir ? (directions.indexOf(lastDir) + 2) % 4 : undefined;\n            const filteredDirections = directions.filter((_dir, index) => index !== oppositeDirIndex);\n            const dir = filteredDirections[Math.floor(Math.random() * filteredDirections.length)];\n            pos.set(pos.x + dir[0], pos.y + dir[1]);\n            const rot = Math.atan2((pos.y - prePos.y), -(pos.x - prePos.x));\n\n            this.manager.scene.elems.push(element);\n            if (!element.gameObject) {\n              element.gameObject = {};\n            }\n            if (!element.gameObject.noRotation) {\n              element.gameObject.rotation = rot;\n            }\n            element.gameObject.pos = [pos.x, pos.y];\n            prePos.set(pos.x, pos.y);\n            lastDir = dir;\n          }\n        }\n      }\n      if (elem.selfSelect) {\n        elem.selfSelect = false;\n        setTimeout(() => {\n          this.manager.setSelection(this);\n        }, 300);\n      }\n      this.refreshLabel();\n      this.refreshBars();\n      this.refreshAlpha();\n    } else {\n      if (this.manager.grid[this.getTag()] === this) {\n        delete this.manager.grid[this.getTag()];\n      }\n      if (this.manager.selected === this) {\n        this.manager.setSelection(undefined);\n      }\n      this.destroy();\n    }\n  }\n\n  hideBars() {\n    this.resourceBars.forEach(bar => bar.destroy());\n    this.resourceBars.length = 0;\n  }\n\n  refreshBars() {\n    this.hideBars();\n    if (!this.elem?.resourcesAccumulated) {\n      return;\n    }\n    const [offX, offY] = this.elem?.gameObject?.offset ?? [0, 0];\n    let count = 0;\n    Object.entries(this.elem.resourcesAccumulated).forEach(([key, value]) => {\n      const res = key as keyof Resources;\n      if (this.manager.scene.resources[res]?.global) {\n        return;\n      }\n      if (!value) {\n        return;\n      }\n      const backBar = new EngineObject(vec2(0, 0), vec2(1, .3));\n      backBar.color = new Color(0, 0, 0, .3);\n      this.addChild(backBar, vec2(0 - offX, count * .3 - offY - .3));\n      this.resourceBars.push(backBar);\n\n      const numValuesToShow = Math.min(10, value);\n      const spacing = Math.min(.2, 1 / numValuesToShow);\n      for (let j = 0; j < numValuesToShow; j++) {\n        const barIcon = new EngineObject(vec2(0, 0), vec2(.5, .5));\n        barIcon.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(key));\n        this.addChild(barIcon, vec2(-.4 + j * spacing - offX + Math.floor(j / 5) * .1 - Math.floor((numValuesToShow - 1) / 5) * .05, count * .3 - offY - .3));\n        this.resourceBars.push(barIcon);\n      }\n      if (value > 10) {\n        const color = value >= this.resourceCapacity(res) ? new Color(1, .7, .7, 1) : new Color(1, 1, 1, 1);\n        const digits = this.generateEngineObjectsForDigit(value, .4, .16, vec2(.5 - offX, count * .3 - offY - .3,), color);\n        this.resourceBars.push(...digits);\n      }\n      count++;\n    });\n    this.updated = false;\n  }\n\n  refreshLabel() {\n    this.labels.forEach(label => label.destroy());\n    this.labels.length = 0;\n    if (this.elem?.harvesting && !this.elem?.level) {\n      return;\n    }\n    let numToShow = this.elem?.level ?? this.elem?.hitpoints;\n    if (!numToShow) {\n      return;\n    }\n    const size = this.elem?.level ? .5 : .3;\n    const offset = this.elem?.level ? vec2(0, .25) : vec2(-.5, .2);\n    const charSize = this.elem?.level ? .2 : .15;\n    const color = this.elem?.hitpoints\n      ? (this.elem.hitpoints < (this.elem.maxHitPoints ?? 0)\n        ? new Color(1, 1, 0, 1)\n        : new Color(0, 1, 0, 1))\n      : this.canAffordMoreHarvester()\n        ? new Color(1, .9, 0, 1)\n        : new Color(1, 1, 1, 1);\n    if (!this.labels) {\n      this.labels = [];\n    }\n    const digits = this.generateEngineObjectsForDigit(numToShow, size, charSize, offset, color);\n    this.labels.push(...digits);\n    this.labels.forEach(label => label.renderOrder = this.renderOrder + .2);\n  }\n\n  canAffordMoreHarvester() {\n    return this.findNearby((obj) => !!obj?.elem?.harvesting).size < (this.elem?.level ?? 0);\n  }\n\n  resourceMaxedOut() {\n    return Object.entries(this.elem?.resourcesAccumulated ?? {}).some(([resource, value]) => {\n      const res = resource as keyof Resources;\n      if (this.manager.scene.resources[res]?.global || this.manager.scene.resources[res]?.forGrowth) {\n        return;\n      }\n      return value >= this.resourceCapacity(resource as keyof Resources);\n    });\n  }\n\n  generateDigits(num: number) {\n    const digits: number[] = [];\n    let l = Math.max(0, num);\n    while (l > 0) {\n      const d = l % 10;\n      digits.push(d);\n      l = Math.floor(l / 10);\n    }\n    return digits;\n  }\n\n  generateEngineObjectsForDigit(num: number, size: number, charSize: number, offset: Vector2, color: Color) {\n    const digits = this.generateDigits(num);\n    return digits.map((d, i) => {\n      const digit = new EngineObject(vec2(0, 0), vec2(size, size));\n      digit.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(`num_${d}`));\n      digit.color = color;\n      this.addChild(digit, offset.add(vec2(-i * charSize, 0)));\n      return digit;\n    });\n  }\n\n  private hideResources() {\n    this.resources.forEach(resource => resource.destroy());\n    this.resources.length = 0;\n  }\n\n  showResources(x: number, y: number,\n    owner?: number,\n    floatResources: boolean = false\n  ) {\n    const resources = this.manager.getResources(x, y);\n    if (!resources) {\n      return;\n    }\n    const rand = floatResources ? (Math.random() - .5) * .5 : 0;\n    const resourceSpacing = .15;\n    const offset = this.elem?.gameObject?.offset ?? [0, 0];\n    const offX = (x - this.px - offset[0]) + rand, offY = y - this.py - offset[1];\n    const RESOURCES: [\"wheat\", \"wood\", \"trade\"] = [\"wheat\", \"wood\", \"trade\"];\n    let total = 0;\n    RESOURCES.forEach((resource) => {\n      for (let i = 0; i < (resources[resource] ?? 0); i++) {\n        total++;\n      }\n    });\n\n    let count = 0;\n    RESOURCES.forEach((resource) => {\n      const value = resources[resource] ?? 0;\n      if (!value) {\n        return;\n      }\n      for (let i = 0; i < value; i++) {\n        const indic = new EngineObject(vec2(0, 0), vec2(.5, .5));\n        indic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(resource));\n        indic.color = new Color(1, 1, 1, 1);\n        this.addChild(indic, vec2(offX + (count - (total - 1) / 2) * resourceSpacing + rand, offY));\n        this.resources.push(indic);\n        count++;\n      }\n    });\n    let harvesting = floatResources;\n    if (!floatResources) {\n      this.manager.iterateGridCell(x, y, (elem) => {\n        if (elem.elem?.owner === owner && elem.elem?.harvesting) {\n          harvesting = true;\n        }\n      });\n    }\n    if (!floatResources) {\n      const indic = new EngineObject(vec2(0, 0), vec2(count * resourceSpacing + .2, .3));\n      indic.color = harvesting ? new Color(1, .5, 1, .8) : new Color(.5, .5, .5, .8);\n      this.addChild(indic, vec2(offX, offY));\n      this.resources.push(indic);\n\n    }\n    this.updated = false;\n    if (floatResources) {\n      this.floatResources = Date.now();\n    }\n  }\n\n  setHarvesting(value: boolean) {\n    if (this.elem) {\n      if (this.elem.harvesting !== value) {\n        this.elem.harvesting = value;\n        this.home?.refreshLabel();\n        if (this.elem.harvesting) {\n          this.spendActions();\n        } else {\n          this.manager.setSelection(this);\n        }\n      }\n    }\n  }\n\n  private getTag() {\n    return GameObject.getTag(this.type, this.px, this.py);\n  }\n\n  static getTag(type: string | undefined, px: number, py: number) {\n    return `${type}_${px}_${py}`;\n  }\n\n  updateSize() {\n    const age = Date.now() - this.bornTime;\n    const scale = Math.min(1, age / 200);\n    const config = this.elem?.gameObject;\n    this.size.set(\n      scale * (this.visible ? (config?.size?.[0] ?? 0) : 0) * (this.lastDx || 1),\n      scale * (this.visible ? (config?.size?.[1] ?? 0) : 0),\n    );\n  }\n\n  hasMove() {\n    return this.elem?.turn?.moves;\n  }\n\n  hasAttack() {\n    return this.elem?.turn?.attacks;\n  }\n\n  hasAction() {\n    return this.elem?.turn?.actions;\n  }\n\n  canAttack() {\n    return false;\n  }\n\n  spendAttack() {\n    const elem = this.elem;\n    if (elem && elem.turn?.attacks) {\n      elem.turn.attacks--;\n    }\n  }\n\n  spendMove() {\n    if (this.elem?.endlessMove) {\n      this.doneMoving();\n      return;\n    }\n    const elem = this.elem;\n    if (elem && elem.turn?.moves) {\n      elem.turn.moves--;\n      this.doneMoving();\n    }\n  }\n\n  doneMoving() {\n    this.refreshAlpha();\n    this.manager.checkForAnyMove();\n\n    if (!this.canAct() || this.elem?.harvesting) {\n      this.manager.selectNext();\n    } else if (this.manager.selected === this) {\n      if (this.elem?.settler || this.elem?.worker) {\n        this.showResourcesNearby();\n      }\n      this.showMoveOptions();\n      this.manager.hud.showSelected(this);\n    }\n    this.manager.unlockRewards(this);\n  }\n\n  spendActions() {\n    const elem = this.elem;\n    if (elem && elem.turn?.actions) {\n      elem.turn.actions--;\n      this.doneMoving();\n    }\n  }\n\n  canAct() {\n    return this.hasMove() || (this.hasAttack() && this.canAttack()) || this.hasAction();\n  }\n\n  refreshAlpha() {\n    if (this.elem?.turn && this.elem?.type === \"unit\") {\n      if (!this.canAct()) {\n        this.color = new Color(1, 1, 1, .5);\n      } else {\n        this.color = new Color(1, 1, 1, 1);\n      }\n    }\n  }\n\n  giveTurn() {\n    const elem = this.elem;\n    if (elem?.turn) {\n      elem.turn.moves = elem.turn.attacks = 1;\n      if (elem.worker) {\n        elem.turn.actions = 1;\n      }\n      this.refreshAlpha();\n    }\n  }\n\n  moveTo(px: number, py: number) {\n    this.positionDetached = true;\n    const moveOption = this.moveOptions?.[`${px}_${py}`];\n    if (!moveOption) {\n      if (this.moveQueue)\n        this.moveQueue.length = 0;\n      return;\n    }\n    if (!this.moveQueue) {\n      this.moveQueue = [];\n    }\n    this.moveQueue.push(vec2(px, py));\n    const from = (moveOption as any).from;\n    if (from.x !== this.px || from.y !== this.py) {\n      this.moveTo(from.x, from.y);\n      return;\n    }\n    this.hideResources();\n    this.hideMoveOptions();\n    this.manager.hud.showSelected(undefined);\n  }\n\n  setPosition(px: number, py: number, force?: boolean) {\n    if (this.px === px && this.py === py && !force) return;\n    if (this.manager.grid[this.getTag()] === this) {\n      delete this.manager.grid[this.getTag()];\n    }\n    if (this.px !== px) {\n      this.lastDx = Math.sign(px - this.px);\n      this.updateSize();\n    }\n\n    this.px = px;\n    this.py = py;\n\n    if (this.manager.grid[this.getTag()] !== this) {\n      this.manager.grid[this.getTag()]?.destroy();\n      this.manager.grid[this.getTag()] = this;\n    }\n\n    if (this.type === \"cursor\") {\n      this.manager.onCursorMove(px, py);\n    }\n    if (this.type === \"cloud\") {\n      this.manager.revealed.delete(`${px}_${py}`);\n    }\n    this.clearedCloud = false;\n    this.updated = false;\n  }\n\n  hasMoveOptionToLandOn(x: number, y: number) {\n    return (this.moveOptions?.[`${x}_${y}`] as any)?.canLand;\n  }\n\n  canLandOn(px: number, py: number) {\n    if (!this.canMoveTo(px, py)) {\n      return false;\n    }\n    return true;\n  }\n\n  canMoveTo(px: number, py: number) {\n    const elem = this.elem;\n    if (!elem) {\n      return false;\n    }\n    if (this.px === px && this.py === py) {\n      return false;\n    }\n    if (!this.manager.revealed.has(`${px}_${py}`)) {\n      return false;\n    }\n    if (elem.type !== \"unit\") {\n      return false;\n    }\n    if (this.manager.unitAt(px, py)) {\n      return false;\n    }\n    if (this.manager.grid[`decor_${px}_${py}`]) {\n      return false;\n    }\n    if (this.manager.grid[`tile_overlay_${px}_${py}`]?.elem?.water) {\n      return false\n    }\n    if (this.elem?.closeToHome && this.home) {\n      const home = this.home;\n      const dx = px - home.px;\n      const dy = py - home.py;\n      if (Math.abs(dx) > 1 || Math.abs(dy) > 1) {\n        return false;\n      }\n    }\n    return true;\n  }\n\n  hide() {\n    if (this.visible) {\n      this.visible = false;\n      this.size.set(0, 0);\n    }\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true;\n      this.updateSize();\n    }\n  }\n\n  hoverIndic?: EngineObject;\n\n  onHoverChange() {\n    if (this.manager.shifting) {\n      return;\n    }\n    if (this.onHoverHideCursor) {\n      if (this.manager.hovering(this)) {\n        this.manager.setHovered(this);\n        if (this.elem?.onHover?.indic && !this.hoverIndic) {\n          this.hoverIndic = new EngineObject();\n          const scale = this.elem.onHover.indic.scale ?? 1;\n          this.hoverIndic.size.set(this.size.x * scale, this.size.y * scale);\n          this.hoverIndic.tileInfo = this.manager.animation.getInfo(this.elem.onHover.indic.animation).tileInfos[0];\n          this.hoverIndic.pos.set(this.px, this.py);\n          const offset = this.elem?.gameObject?.offset ?? [0, 0];\n          this.addChild(this.hoverIndic, vec2(-offset[0], -offset[1]));\n          this.updated = false;\n        }\n      } else {\n        this.manager.setHovered(undefined);\n        if (this.elem?.onHover?.indic && this.hoverIndic) {\n          this.removeChild(this.hoverIndic);\n          this.hoverIndic.destroy();\n          this.hoverIndic = undefined;\n        }\n      }\n    }\n  }\n\n  selectIndic?: EngineObject;\n\n  showResourcesNearby() {\n    const home = this.elem?.settler ? this : this.elem?.worker ? this.home : this;\n    if (home) {\n      for (let y = -1; y <= 1; y++) {\n        for (let x = -1; x <= 1; x++) {\n          if (this.elem?.building || home.px + x === this.px && home.py + y === this.py || this.canMoveTo(home.px + x, home.py + y)) {\n            this.showResources(home.px + x, home.py + y, this.elem?.owner);\n          }\n        }\n      }\n      home?.hideBars();\n    }\n  }\n\n  onSelectChange() {\n    if (this.manager.selected === this) {\n      if (this.elem?.selected?.indic && !this.selectIndic) {\n        this.selectIndic = new EngineObject();\n        const scale = this.elem.selected.indic.scale ?? 1;\n        this.selectIndic.size.set(this.size.x * scale, this.size.y * scale);\n        this.selectIndic.renderOrder = this.renderOrder - .1;\n        this.selectIndic.tileInfo = this.manager.animation.getInfo(this.elem.selected.indic.animation).tileInfos[0];\n        const offset = this.elem?.gameObject?.offset ?? [0, 0];\n        this.addChild(this.selectIndic, vec2(-offset[0], -offset[1]));\n        this.selectIndic.pos.set(this.px, this.py);\n\n        //  show move options\n        this.showMoveOptions();\n        if (!this.moving) {\n          const resourcesFloating = Date.now() - (this.floatResources ?? 0) < 2000;\n\n          if ((this.elem?.settler || this.elem?.worker) && !resourcesFloating) {\n            if (!this.elem?.building && this.elem?.harvesting) {\n              this.showResources(this.px, this.py, this.elem?.owner);\n            } else {\n              this.showResourcesNearby();\n            }\n          }\n        }\n        this.hideBars();\n      }\n    } else {\n      if (this.elem?.selected?.indic && this.selectIndic) {\n        this.selectIndic.destroy();\n        this.selectIndic = undefined;\n      }\n      this.hideMoveOptions();\n      if (this.elem?.animation) {\n        this.hideResources();\n      }\n      this.refreshBars();\n    }\n  }\n\n  showMoveOptions() {\n    if (this.hasMove() && !this.manager.checkCondition(this.elem?.move?.disabled, this)) {\n      this.addMoveOptions(this.elem?.move?.distance ?? 1, vec2(this.px, this.py));\n    }\n  }\n\n  hideMoveOptions() {\n    if (this.moveOptions) {\n      Object.values(this.moveOptions).forEach(moveOption => moveOption.destroy());\n      delete this.moveOptions;\n    }\n  }\n\n  addMoveOptions(movePoints: number, from: Vector2, revealPotential = 0, distanceTravelled = 0) {\n    if (!movePoints) {\n      return;\n    }\n    const DIRECTIONS = [\n      [-1, 0], [0, -1], [1, 0], [0, 1],\n      [-1, -1], [1, -1], [-1, 1], [1, 1],\n    ];\n    const froms: [Vector2, number, number][] = [];\n    DIRECTIONS.forEach(([dx, dy]) => {\n      if (!this.canMoveTo(from.x + dx, from.y + dy)) {\n        return;\n      }\n      const newDistanceTravelled = distanceTravelled + Math.sqrt(dx * dx + dy * dy);\n      const existingMoveOption = this.moveOptions?.[`${from.x + dx}_${from.y + dy}`] as any;\n      if (existingMoveOption) {\n        const canReveal = revealPotential + this.manager.countRevealPotential(from.x + dx, from.y + dy);\n        let shouldReplace = false;\n        if (existingMoveOption.movePoints < movePoints) {\n          //  this route takes less points\n          shouldReplace = true;\n        } else if (existingMoveOption.movePoints === movePoints) {\n          if (existingMoveOption.distanceTravelled > newDistanceTravelled) {\n            //  this route takes same points but less distance\n            shouldReplace = true;\n          } else if (existingMoveOption.distanceTravelled === newDistanceTravelled && existingMoveOption.canReveal < canReveal) {\n            //  this route takes same points and distance but more revealing\n            shouldReplace = true\n          }\n        }\n        if (shouldReplace) {\n          existingMoveOption.canReveal = canReveal;\n          existingMoveOption.from = from;\n          existingMoveOption.movePoints = movePoints;\n          existingMoveOption.distanceTravelled = newDistanceTravelled;\n          froms.push([vec2(from.x + dx, from.y + dy), canReveal, newDistanceTravelled]);\n        }\n        return;\n      }\n\n      const obj = new EngineObject();\n      obj.size.set(this.size.x, this.size.y);\n      if (this.elem?.selected?.moveIndic) {\n        obj.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.selected.moveIndic.animation));\n      } else {\n        obj.color = new Color(0, 0, 0, .3);\n        obj.tileInfo = this.tileInfo;\n      }\n      (obj as any).from = from;\n      (obj as any).canReveal = revealPotential + this.manager.countRevealPotential(from.x + dx, from.y + dy);\n      (obj as any).movePoints = movePoints;\n      (obj as any).distanceTravelled = newDistanceTravelled;\n      (obj as any).canLand = this.canLandOn(from.x + dx, from.y + dy);\n      if (!(obj as any).canLand) {\n        obj.color = new Color(0, 0, 0, 0);\n      }\n      const offset = this.elem?.gameObject?.offset ?? [0, 0];\n      // obj.pos.set(this.px, this.py);\n      this.addChild(obj, vec2((from.x + dx - this.px) - offset[0], (from.y + dy - this.py) - offset[1]));\n      if (!this.moveOptions) {\n        this.moveOptions = {};\n      }\n      this.moveOptions[`${from.x + dx}_${from.y + dy}`] = obj;\n      froms.push([vec2(from.x + dx, from.y + dy), (obj as any).canReveal, (obj as any).distanceTravelled]);\n      this.updated = false;\n    });\n    froms.forEach(([from, revealing, newDistanceTravelled]) => this.addMoveOptions(movePoints - 1, from, revealing, newDistanceTravelled));\n  }\n\n  getFrame(animInfo?: AnimationInfo) {\n    return !animInfo ? 0 : Math.floor(Date.now() / (1000 / this.frameRate)) % animInfo.tileInfos.length;\n  }\n\n  getTileInfoAnimate(animInfo: AnimationInfo) {\n    const t = this.getFrame(animInfo);\n    return animInfo?.tileInfos?.[t];\n  }\n\n  checkResourceCaps() {\n    const elem = this.elem;\n    if (!elem?.resourcesAccumulated) {\n      return;\n    }\n    Object.entries(elem.resourcesAccumulated).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      const maxCapacity = this.resourceCapacity(k);\n      if (value > maxCapacity) {\n        if (!elem.resourcesCapped) {\n          elem.resourcesCapped = {};\n        }\n        elem.resourcesCapped[k] = value;\n      }\n    });\n  }\n\n  accumulateResources(resources: Resources) {\n    if (this.doomed) {\n      return;\n    }\n    if (this.home) {\n      this.home.accumulateResources(resources);\n      return;\n    }\n    const elem = this.elem;\n    if (!elem) {\n      return;\n    }\n    Object.entries(resources).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      if (this.manager.scene.resources[k]?.global) {\n        return;\n      }\n      if (!elem.resourcesAccumulated) {\n        elem.resourcesAccumulated = {};\n      }\n      if (!elem.resourcesCapped?.[k]) {\n        elem.resourcesAccumulated[k] = (elem.resourcesAccumulated[k] ?? 0) + value;\n      }\n    });\n    if (elem.type === \"house\" && elem.resourcesAccumulated) {\n      if ((elem.resourcesAccumulated.wheat ?? 0) >= this.nextLevelCost() && this.canUpdateLevel()) {\n        elem.resourcesAccumulated.wheat = (elem.resourcesAccumulated.wheat ?? 0) - this.nextLevelCost();\n        this.updateLevel((elem.level ?? 0) + 1);\n        this.updated = false;\n      }\n    }\n  }\n\n  updateResource(resource: keyof Resources, value: number | ((value: number) => number)) {\n    if (!this.elem) {\n      return;\n    }\n    if (!this.elem.resourcesAccumulated) {\n      this.elem.resourcesAccumulated = {};\n    }\n    const val = typeof value === \"function\" ? value(this.elem.resourcesAccumulated[resource] ?? 0) : value;\n    const resObj = this.manager.scene.resources[resource];\n    if (resObj?.global) {\n      if (this.elem.owner) {\n        this.manager.updateResource(resource, val, this.elem.owner);\n      }\n      return;\n    }\n    this.elem.resourcesAccumulated[resource] = val;\n    if (this.elem.resourcesCapped && val < this.resourceCapacity(resource)) {\n      this.elem.resourcesCapped[resource] = 0;\n    }\n    this.updated = false;\n  }\n\n  fixCows() {\n    // cows number can't be higher than house level\n    const cows = this.countUnitSupport(\"cow\");\n    const maxCows = this.elem?.level ?? 0;\n    if (cows > maxCows) {\n      let toRemove = cows - maxCows;\n      this.manager.iterateRevealedCells((obj) => {\n        if (toRemove <= 0) {\n          return;\n        }\n        if (obj.elem?.name === \"cow\" && obj.home === this) {\n          obj.doom(true);\n          toRemove--;\n        }\n      });\n    }\n  }\n\n  canUpdateLevel() {\n    return this.elem?.type === \"house\" && (this.elem?.level ?? 0) < 6;\n  }\n\n  updateLevel(level: number) {\n    if (this.elem?.type === \"house\") {\n      this.elem.level = level;\n      this.fixCows();\n      this.refreshLabel();\n      this.updated = false;\n    }\n  }\n\n  nextLevelCost() {\n    return this.resourceCapacity(\"wheat\");\n  }\n\n  resourceCapacity(resource: keyof Resources) {\n    const capacity = (this.elem?.level ?? 0) + 1;\n    return capacity * 10;\n  }\n\n  countUnitSupport(unit: string) {\n    let count = 0;\n    this.manager.iterateRevealedCells((obj) => {\n      if (obj.elem?.name === unit && obj.home === this) {\n        count++;\n      }\n    });\n    return count;\n  }\n\n  update() {\n    super.update();\n    if (this.updated && !this.elem?.dynamic && !this.doomed && Date.now() - this.bornTime < 1000 && !this.floatResources) {\n      return;\n    }\n    // if (this.manager.inUI) {\n    //   return;\n    // }\n    const nowHoverered = this.manager.hovering(this);\n    if (this.hovered !== nowHoverered) {\n      this.hovered = nowHoverered;\n      this.onHoverChange();\n    }\n    if (this.hoverIndic && this.elem?.onHover?.indic) {\n      this.hoverIndic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.onHover.indic.animation));\n    }\n    if (this.selectIndic && this.elem?.selected?.indic) {\n      this.selectIndic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.selected.indic.animation));\n    }\n    if (this.mouseFollower) {\n      let px = mousePos.x + this.mouseFollower.offset.x;\n      let py = mousePos.y + this.mouseFollower.offset.y;\n      if (this.mouseFollower.snap) {\n        px = Math.round(px / this.mouseFollower.snap) * this.mouseFollower.snap;\n        py = Math.round(py / this.mouseFollower.snap) * this.mouseFollower.snap;\n      }\n      this.setPosition(px, py);\n    }\n    const offset = this.elem?.gameObject?.offset ?? [0, 0];\n    const dx = (this.px + offset[0]) - this.pos.x;\n    const dy = (this.py + offset[1]) - this.pos.y;\n    const animInfo = this.harvestAnimationInfo && this.elem?.harvesting\n      ? this.harvestAnimationInfo\n      : this.moveAnimationInfo && (dx || dy)\n        ? this.moveAnimationInfo\n        : this.selectedAnimationInfo && (this.manager.selected === this)\n          ? this.selectedAnimationInfo\n          : this.hoveredAnimationInfo && this.manager.hovering(this)\n            ? this.hoveredAnimationInfo : this.animationInfo;\n    if (animInfo) {\n      this.tileInfo = this.getTileInfoAnimate(animInfo);\n    }\n\n    if (dx || dy) {\n      const doMove = !animInfo?.airFramesSet || animInfo.airFramesSet?.has(this.getFrame(animInfo));\n      if (doMove) {\n        this.moving = true;\n        if (dx * dx + dy * dy > .01) {\n          const dist = this.elem?.gameObject?.speed ? Math.sqrt(dx * dx + dy * dy) : 1;\n          const speed = Math.min(dist, this.elem?.gameObject?.speed ?? .5);\n          this.pos.set(this.pos.x + dx / dist * speed, this.pos.y + dy / dist * speed);\n        } else {\n          this.pos.set(this.px + offset[0], this.py + offset[1]);\n        }\n      }\n    } else {\n      if (this.moveQueue?.length) {\n        const dest = this.moveQueue.pop()!;\n        this.setPosition(dest.x, dest.y);\n        if (!this.moveQueue.length) {\n          delete this.moveQueue;\n        }\n      } else if (this.moving) {\n        this.moving = false;\n        this.spendMove();\n      }\n    }\n\n    if (this.type === \"cursor\") {\n      if (mouseWasPressed(0)) {\n      }\n      if (mouseWasReleased(0)) {\n        this.manager.onTap(this.px, this.py, mousePos.x, mousePos.y);\n        this.manager.mousePosDown = undefined;\n      }\n    }\n\n\n    const coLayers = this.manager.scene?.colayers;\n    const renderOrder = Math.round(-this.py) + (this.manager.scene.layers?.[this.type ?? \"\"] ?? 100) * 10000 + (coLayers?.[this.type ?? \"\"] ?? 0) * .001;\n    if (this.renderOrder !== renderOrder || !this.updated) {\n      this.renderOrder = renderOrder;\n      this.decors.forEach((decor) => {\n        decor.renderOrder = this.renderOrder + (this.elem?.spread?.behind ? -.1 : .1);\n      });\n      if (this.moveOptions) {\n        Object.values(this.moveOptions).forEach(moveOption => moveOption.renderOrder = this.renderOrder - .1);\n      }\n\n      if (this.shadow) {\n        this.shadow.renderOrder = this.renderOrder - .1;\n      }\n      if (this.hoverIndic) {\n        this.hoverIndic.renderOrder = this.renderOrder - .1;\n      }\n      this.labels?.forEach(label => label.renderOrder = this.renderOrder + .2);\n      this.resources.forEach((resource) => resource.renderOrder = 100000 + (resource.tileInfo ? .1 : -.1));\n      this.resourceBars.forEach((resource) => resource.renderOrder = 100000 + (resource.tileInfo ? .1 : -.1));\n    }\n    if (this.elem?.clearCloud && !this.clearedCloud) {\n      const SIZE = 1, LIMIT = 2;\n      for (let y = -SIZE; y <= SIZE; y++) {\n        for (let x = -SIZE; x <= SIZE; x++) {\n          if (Math.abs(x * y) < LIMIT * LIMIT) {\n            this.manager.clearCloud(this.px + x, this.py + y);\n          }\n        }\n      }\n      this.clearedCloud = true;\n    }\n\n    this.updated = true;\n\n    if (this.elem?.dynamic && Date.now() - this.bornTime < 1000) {\n      this.updateSize();\n    }\n\n    if (this.doomed) {\n      this.decors.forEach((decor: any) => {\n        const time = Date.now() - decor.doomTime;\n        if (time > 0) {\n          decor.size.set(decor.size.x * .9, decor.size.y * .9);\n        }\n      });\n    }\n\n    if (this.floatResources) {\n      if (Date.now() - this.floatResources > 2000) {\n        this.floatResources = undefined;\n        this.hideResources();\n        if (this.manager.selected === this) {\n          this.showResourcesNearby();\n        }\n      } else {\n        this.resources.forEach(res => res.localPos.y += .005);\n      }\n    }\n  }\n\n  get home(): GameObject | undefined {\n    if (this.elem?.home && !this.elem?.building) {\n      return this.manager.grid[GameObject.getTag(\"house\", this.elem.home[0], this.elem?.home[1])] ?? undefined;\n    }\n    return undefined;\n  }\n\n  doomed?: boolean = false;\n  doom(immediate?: boolean) {\n    this.doomed = true;\n    this.size.set(0, 0);\n    const destroy = () => {\n      if (this.manager.grid[this.getTag()] === this) {\n        delete this.manager.grid[this.getTag()];\n      }\n\n      this.decors.forEach((decor) => {\n        decor.destroy();\n      });\n      this.labels?.forEach(label => label.destroy());\n      this.resources.forEach(resource => resource.destroy());\n      this.resourceBars.forEach(bar => bar.destroy());\n      if (this.shadow) {\n        this.shadow.destroy();\n      }\n      this.destroy();\n    };\n\n    const DURATION = immediate ? 10 : 300;\n    setTimeout(destroy, DURATION * 2);\n    if (!immediate) {\n      this.decors.forEach((decor) => {\n        (decor as any).doomTime = Date.now() + DURATION * Math.random();\n      });\n    }\n  }\n\n  updateLabel(showLabel: boolean) {\n    if (showLabel) {\n      this.refreshLabel();\n      this.refreshBars();\n      this.refreshAlpha();\n    } else {\n      this.labels.forEach(label => label.destroy());\n      this.labels.length = 0;\n      this.resourceBars.forEach(bar => bar.destroy());\n      this.resourceBars.length = 0;\n      this.color = new Color(1, 1, 1, 1);\n    }\n  }\n\n  getSurroundingCells(vectorCondition: (cell: Vector2) => boolean) {\n    const set: Set<Vector2> = new Set();\n    for (let y = -1; y <= 1; y++) {\n      for (let x = -1; x <= 1; x++) {\n        const vec = vec2(this.px + x, this.py + y);\n        if (vectorCondition(vec)) {\n          set.add(vec);\n        }\n      }\n    }\n    return set;\n  }\n\n  findNearby(cellCondition: (cell: GameObject) => boolean) {\n    const set: Set<GameObject> = new Set();\n    for (let y = -1; y <= 1; y++) {\n      for (let x = -1; x <= 1; x++) {\n        if (x === 0 && y === 0) {\n          continue;\n        }\n        this.manager.iterateGridCell(this.px + x, this.py + y, (cell) => {\n          if (cellCondition(cell)) {\n            set.add(cell);\n          }\n        });\n      }\n    }\n    return set;\n  }\n\n  finalDestination(): Vector2 {\n    return this.moveQueue?.[0] ?? vec2(this.px, this.py);\n  }\n\n  canAfford(resources?: Resources): boolean {\n    if (!resources) {\n      return true;\n    }\n    return Object.entries(resources).every(([key, value]) => {\n      return (this.elem?.resourcesAccumulated?.[key as keyof Resources] ?? 0) >= value;\n    });\n  }\n\n  spend(resources?: Resources) {\n    if (!resources) {\n      return;\n    }\n    const resourcesAccumulated = this.elem?.resourcesAccumulated;\n    Object.entries(resources).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      if (resourcesAccumulated?.[k]) {\n        resourcesAccumulated[k] = Math.max(0, resourcesAccumulated[k] - value);\n      }\n    });\n  }\n}\n",
  "import { GameObject } from \"./game-object\";\nimport type { Scene } from \"./definition/scene\";\nimport type { Manager } from \"./manager\";\nimport type { Resources } from \"./definition/resources\";\nimport type { Elem } from \"./definition/elem\";\n\nconst SPRITESHEET_COLS = 30;\n\nexport class Hud {\n  ui: HTMLDivElement = document.createElement(\"div\");\n  bg: HTMLDivElement = document.createElement(\"div\");\n  topBg: HTMLDivElement = document.createElement(\"div\");\n  overlay: HTMLDivElement = document.createElement(\"div\");\n  resourceOverlay: HTMLDivElement = document.createElement(\"div\");\n  blocker: HTMLDivElement = document.createElement(\"div\");\n  dialog: HTMLDivElement = document.createElement(\"div\");\n  readonly itemsToDestroy = new Set<() => void>();\n  readonly scene: Scene;\n  nextButton: HTMLButtonElement = document.createElement(\"button\");\n  endButton: HTMLButtonElement = document.createElement(\"button\");\n  updated = false;\n\n  constructor(readonly manager: Manager) {\n    this.scene = manager.scene;\n  }\n\n  initialize() {\n    this.ui.id = \"hud\";\n    this.ui.classList.add(\"hud\");\n    document.body.appendChild(this.ui);\n    this.ui.addEventListener(\"mouseover\", e => {\n      this.manager.inUI = true;\n      this.manager.cursor?.hide();\n    });\n    this.ui.addEventListener(\"mouseout\", e => {\n      this.manager.inUI = false;\n      this.manager.refreshCursor();\n    });\n\n    this.bg.style.width = \"100%\";\n    this.bg.style.height = \"100px\";\n    this.bg.style.position = \"absolute\";\n    this.bg.style.zIndex = \"100\";\n    this.bg.style.bottom = \"-100px\";\n    this.bg.style.left = \"0\";\n    this.bg.style.background = \"rgba(0, 0, 0, 1)\";\n    this.bg.style.transition = \"bottom 0.2s\";\n    this.bg.style.display = \"flex\";\n    this.bg.style.color = \"snow\";\n    this.bg.style.flexDirection = \"row\";\n    this.ui.appendChild(this.bg);\n\n    this.overlay.style.bottom = \"0\";\n    this.overlay.style.right = \"0\";\n    this.overlay.style.zIndex = \"100\";\n    this.overlay.style.position = \"absolute\";\n    this.overlay.style.display = \"flex\";\n    this.overlay.style.flexDirection = \"column\";\n    this.overlay.style.justifyContent = \"right\";\n    this.overlay.style.gap = \"10px\";\n    this.overlay.style.padding = \"10px\";\n    this.overlay.style.transition = \"right 0.2s\";\n    this.ui.appendChild(this.overlay);\n    this.setHudButtons();\n\n    this.resourceOverlay.style.position = \"absolute\";\n    this.resourceOverlay.style.top = \"0\";\n    this.resourceOverlay.style.left = \"0\";\n    this.resourceOverlay.style.zIndex = \"100\";\n    this.ui.appendChild(this.resourceOverlay);\n\n    this.blocker.style.width = \"100%\";\n    this.blocker.style.height = \"100%\";\n    this.blocker.style.position = \"absolute\";\n    this.blocker.style.zIndex = \"100\";\n    this.blocker.style.top = \"0\";\n    this.blocker.style.left = \"0\";\n    this.blocker.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n    this.blocker.style.display = \"none\";\n    this.ui.appendChild(this.blocker);\n\n    this.dialog.style.position = \"absolute\";\n    this.dialog.style.zIndex = \"100\";\n    this.dialog.style.top = \"50%\";\n    this.dialog.style.left = \"50%\";\n    this.dialog.style.transform = \"translate(-50%, -50%)\";\n    this.dialog.style.width = \"300px\";\n    this.dialog.style.height = \"200px\";\n    this.dialog.style.backgroundColor = \"rgba(0, 0, 0, 1)\";\n    this.dialog.style.color = \"snow\";\n    this.dialog.style.flexDirection = \"column\";\n    this.dialog.style.justifyContent = \"center\";\n    this.dialog.style.alignItems = \"center\";\n    this.dialog.style.textAlign = \"center\";\n    this.dialog.style.textTransform = \"uppercase\";\n    this.dialog.style.display = \"none\";\n\n    this.setupShortcutKeys();\n  }\n\n  setupShortcutKeys() {\n    document.addEventListener(\"keyup\", e => {\n      if (e.code === \"KeyE\") {\n        this.endButton.click();\n      }\n      if (e.code === \"KeyN\") {\n        this.nextButton.click();\n      }\n    });\n  }\n\n  refresh() {\n    if (this.updated) {\n      return;\n    }\n    this.endButton.innerHTML = `<u style='color: blue'>E</u>nd turn ${this.scene.turn?.turn ?? 1}`;\n    this.refreshResources();\n    this.refreshTax();\n    this.updated = true;\n  }\n\n  refreshTax() {\n    //  display resources (wheat, wood, brain)\n    const player = this.scene.turn?.player ?? 1;\n    const RESOURCES: (keyof Resources)[] = (Object.keys(this.scene.resources) as (keyof Resources)[])\n      .filter(resource => !this.scene.resources[resource]?.hidden && this.scene.resources[resource]?.global)\n      .sort((a, b) => a.localeCompare(b));\n    const revenuePerResource = this.manager.calculateResourceRevenue(player);\n    RESOURCES.forEach((resource, index) => {\n      let taxValue = this.scene.players[player - 1].tax ?? 0;\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n      }\n      let revenueValue = revenuePerResource[resource];\n      const taxText = document.getElementById(`${resource}-tax`) as HTMLDivElement;\n      if (taxText) {\n        taxText.textContent = `${revenueValue >= 0 ? '+' : ''}${revenueValue} (${taxValue}%)`;\n      }\n    });\n    //  add knob to adjust tax\n    let taxKnob = document.getElementById(\"tax\") as HTMLInputElement;\n    if (!taxKnob) {\n      taxKnob = (this.resourceOverlay.appendChild(document.createElement(\"input\")));\n      taxKnob.id = \"tax\";\n      taxKnob.type = \"range\";\n      taxKnob.min = \"0\";\n      taxKnob.max = \"100\";\n      taxKnob.step = \"5\";\n      taxKnob.value = `${this.scene.players[player - 1].tax ?? 0}`;\n      taxKnob.style.width = \"60px\";\n      taxKnob.style.marginTop = \"20px\";\n      taxKnob.addEventListener(\"input\", e => {\n        this.scene.players[player - 1].tax = parseInt(taxKnob.value);\n        this.refreshTax();\n      });\n    }\n  }\n\n  refreshResources() {\n    //  display resources (wheat, wood, brain)\n    const player = this.scene.turn?.player ?? 1;\n    const RESOURCES: (keyof Resources)[] = (Object.keys(this.scene.resources) as (keyof Resources)[])\n      .filter(resource => !this.scene.resources[resource]?.hidden && this.scene.resources[resource]?.global)\n      .sort((a, b) => a.localeCompare(b));\n    RESOURCES.forEach((resource, index) => {\n      if (!this.scene.resources[resource]) {\n        return;\n      }\n      const { imageSource, spriteSize, frames, padding } = this.scene.resources[resource].icon;\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n      let icon = document.getElementById(resource);\n      if (!icon) {\n        icon = this.resourceOverlay.appendChild(document.createElement(\"div\"));\n        icon.id = resource;\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteSize[0]}px`;\n        icon.style.height = `${spriteSize[1]}px`;\n        icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % 30) + (padding?.[0] ?? 0) / 2}px ${-spriteHeight * Math.floor(frames[0] / 30) + (padding?.[1] ?? 0) / 2}px`;\n        icon.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n        icon.style.bottom = \"0\";\n        icon.style.left = \"0\";\n        icon.style.color = \"white\";\n        icon.style.borderRadius = \"50%\";\n        icon.style.display = \"flex\";\n        icon.style.alignSelf = \"flex-end\";\n        icon.style.justifyContent = \"center\";\n        icon.style.fontSize = \"12pt\";\n        icon.style.fontWeight = \"bold\";\n        icon.style.marginTop = \"15px\";\n        icon.style.transition = \"background-color 0.2s\";\n        icon.textContent = \"0\";\n        this.resourceOverlay.appendChild(icon);\n      }\n      let taxValue = this.scene.players[player - 1].tax ?? 0;\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n      }\n\n      const newText = `${this.scene.players[player - 1].resources[resource] ?? 0}`;\n      if (icon.textContent !== newText) {\n        icon.textContent = newText;\n        icon.style.backgroundColor = \"rgba(255, 50, 255, 0.5)\";\n        setTimeout(() => {\n          icon.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n        }, 1500);\n      }\n      const taxText = document.getElementById(`${resource}-tax`) as HTMLDivElement ?? (this.resourceOverlay.appendChild(document.createElement(\"div\")));\n      taxText.id = `${resource}-tax`;\n      taxText.style.color = \"white\";\n      taxText.style.width = \"100%\";\n      taxText.style.marginTop = \"-20px\";\n      taxText.style.textAlign = \"center\";\n      taxText.style.fontSize = \"8pt\";\n    });\n  }\n\n  flashEndTurn(temp = false) {\n    document.getElementById(\"endButton\")?.classList.add(temp ? \"flash-temp\" : \"flash\");\n    if (temp) {\n      this.stopFlashEndTurn();\n      setTimeout(() => {\n        document.getElementById(\"endButton\")?.classList.remove(\"flash-temp\");\n      }, 1000);\n    }\n  }\n\n  stopFlashEndTurn() {\n    document.getElementById(\"endButton\")?.classList.remove(\"flash\");\n  }\n\n  setHudButtons() {\n    const nextButton = this.overlay.appendChild(this.nextButton);\n    nextButton.innerHTML = \"<u style='color: blue'>N</u>ext unit\";\n    nextButton.id = \"nextButton\";\n    nextButton.addEventListener(\"click\", e => {\n      this.manager.selectNext();\n    });\n\n    const endButton = this.overlay.appendChild(this.endButton);\n    endButton.id = \"endButton\";\n    endButton.addEventListener(\"click\", e => {\n      this.stopFlashEndTurn();\n      this.manager.gotoNextTurn();\n    });\n    endButton.addEventListener(\"mousedown\", e => {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    endButton.addEventListener(\"mouseup\", e => {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n\n    const autoEndGroup = this.overlay.appendChild(document.createElement(\"div\"));\n    const autoEndLabel = autoEndGroup.appendChild(document.createElement(\"label\"));\n    autoEndLabel.textContent = \"auto-end turn\";\n    autoEndLabel.htmlFor = \"autoEndCheckbox\";\n    const autoEndCheckbox = autoEndGroup.appendChild(document.createElement(\"input\"));\n    autoEndCheckbox.id = \"autoEndCheckbox\";\n    autoEndCheckbox.type = \"checkbox\";\n    autoEndCheckbox.checked = this.manager.autoEndTurn;\n    autoEndCheckbox.addEventListener(\"change\", e => {\n      this.manager.autoEndTurn = autoEndCheckbox.checked;\n      if (this.manager.autoEndTurn) {\n        this.stopFlashEndTurn();\n        this.manager.checkForAnyMove();\n      }\n    });\n  }\n\n  clear() {\n    this.itemsToDestroy.forEach((item) => item());\n    this.itemsToDestroy.clear();\n  }\n\n  showSelected(obj?: GameObject) {\n    const menu = this.scene.menu?.find((m) => m.name === obj?.elem?.name);\n\n    this.bg.style.bottom = menu?.items.length ? \"0\" : \"-400px\";\n    this.overlay.style.right = menu?.items.length ? \"-200px\" : \"0\";\n    this.bg.innerHTML = \"\";\n\n    this.topBg.style.top = obj ? \"0\" : \"-400px\";\n\n    this.clear();\n\n    if (!menu?.items.length) {\n      return;\n    }\n    if (!obj) {\n      return;\n    }\n    {\n      const iconDiv = this.bg.appendChild(document.createElement(\"div\"));\n      const { imageSource, spriteSize, frames, padding } = menu.icon;\n      const icon = iconDiv.appendChild(document.createElement(\"div\"));\n      icon.style.backgroundImage = `url(${imageSource})`;\n      icon.style.width = `${spriteSize[0]}px`;\n      icon.style.height = `${spriteSize[1]}px`;\n\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n      let animationFrame: number;\n      const animateIcon = () => {\n        animationFrame = requestAnimationFrame(animateIcon);\n        const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n        icon.style.backgroundPosition = `${-spriteWidth * (frame % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n      };\n      animationFrame = requestAnimationFrame(animateIcon);\n      this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n\n      const label = iconDiv.appendChild(document.createElement(\"div\"));\n      label.innerText = menu.name;\n      label.style.textAlign = \"center\";\n      label.style.fontSize = \"10pt\";\n      label.style.color = \"silver\";\n\n      const descDiv = this.bg.appendChild(document.createElement(\"div\"));\n      const desc = descDiv.appendChild(document.createElement(\"div\"));\n      desc.style.margin = \"20px 20px\";\n      desc.style.color = \"silver\";\n      desc.style.width = \"0px\";\n      const descContent = desc.appendChild(document.createElement(\"div\"));\n      descContent.style.position = \"absolute\";\n      descContent.style.maxWidth = \"200px\";\n      descContent.textContent = menu.description ?? \"\";\n\n      const healthDiv = descDiv.appendChild(document.createElement(\"div\"));\n      healthDiv.style.position = \"absolute\";\n      healthDiv.style.right = \"0\";\n      healthDiv.style.top = \"0\";\n      if (obj.elem?.type === \"house\") {\n        {\n          //  show weath resource\n          const wheat = healthDiv.appendChild(document.createElement(\"div\"));\n          wheat.style.display = \"flex\";\n          wheat.style.flexDirection = \"row\";\n          wheat.style.alignItems = \"center\";\n          wheat.style.justifyContent = \"left\";\n          wheat.style.margin = \"3px 10px\";\n          wheat.style.height = \"20px\";\n          if (this.scene.resources.wheat) {\n            const { imageSource, spriteSize, frames, padding } = this.scene.resources.wheat.icon;\n            const icon = wheat.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n          }\n          // show wheat amount\n\n          // calculate wheat cost for next level\n          const cost = obj.nextLevelCost();\n\n          const label = wheat.appendChild(document.createElement(\"div\"));\n          label.style.fontSize = \"10pt\";\n          label.style.color = \"gold\";\n          label.textContent = `${obj.elem.resourcesAccumulated?.wheat ?? 0} / ${cost}`;\n        }\n        {\n          //  show wood resource\n          const wood = healthDiv.appendChild(document.createElement(\"div\"));\n          wood.style.display = \"flex\";\n          wood.style.flexDirection = \"row\";\n          wood.style.alignItems = \"center\";\n          wood.style.justifyContent = \"left\";\n          wood.style.margin = \"3px 10px\";\n          wood.style.height = \"10px\";\n          if (this.scene.resources.wood) {\n            const { imageSource, spriteSize, frames, padding } = this.scene.resources.wood.icon;\n            const icon = wood.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n          }\n          // show wood amount\n          const label = wood.appendChild(document.createElement(\"div\"));\n          label.style.fontSize = \"10pt\";\n          label.style.color = \"orange\";\n          const capacity = obj.resourceCapacity(\"wood\");\n          label.textContent = `${obj.elem.resourcesAccumulated?.wood ?? 0} / ${capacity}`;\n        }\n      }\n    }\n    {\n      const menuDiv = this.bg.appendChild(document.createElement(\"div\"));\n      menuDiv.style.display = \"flex\";\n      menuDiv.style.flexDirection = \"row\";\n      menuDiv.style.justifyContent = \"center\";\n      menuDiv.style.alignItems = \"center\";\n      menuDiv.style.flexGrow = \"1\";\n      menuDiv.style.margin = \"0 10px\";\n      menuDiv.style.marginLeft = \"-100px\";\n      menuDiv.style.gap = \"10px\";\n\n      menu.items.forEach((item) => {\n        if (this.manager.checkCondition(item.hidden, obj)) {\n          return;\n        }\n        const disabled = this.manager.checkCondition(item.disabled, obj)\n          || (obj.canAfford(item.resourceCost) ? null : \"not enough\\nresources\");\n\n        const menuItemDiv = menuDiv.appendChild(document.createElement(\"div\"));\n\n        if (item.resourceCost) {\n          const resourceDiv = menuItemDiv.appendChild(document.createElement(\"div\"));\n          resourceDiv.style.display = \"flex\";\n          resourceDiv.style.flexDirection = \"row\";\n          resourceDiv.style.marginTop = \"-55px\";\n          resourceDiv.style.marginLeft = \"-60px\";\n          resourceDiv.style.position = \"absolute\";\n          const cost = item.resourceCost;\n          Object.entries(cost ?? {}).forEach(([key, amount]) => {\n            const resource = key as keyof Resources;\n            const resourceData = this.scene.resources[resource];\n            if (!resourceData) {\n              return;\n            }\n            const { imageSource, spriteSize, frames, padding } = resourceData.icon;\n            const icon = resourceDiv.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            icon.style.marginTop = \"-25px\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n            const label = resourceDiv.appendChild(document.createElement(\"div\"));\n            label.style.fontSize = \"10pt\";\n            label.style.marginLeft = \"-20px\";\n            label.style.color = \"gold\";\n            label.textContent = `${amount}`;\n          });\n        } else {\n          const text = menuItemDiv.appendChild(document.createElement(\"div\"));\n          text.textContent = item.label ?? item.name;\n          text.style.position = \"absolute\";\n          text.style.top = \"0\";\n          text.style.fontSize = \"10pt\";\n          text.style.color = \"red\";\n          text.style.display = disabled ? \"block\" : \"none\";\n        }\n\n        menuItemDiv.style.cursor = \"pointer\";\n        menuItemDiv.style.display = \"flex\";\n        menuItemDiv.style.alignItems = \"center\";\n        menuItemDiv.style.justifyContent = \"center\";\n        menuItemDiv.style.flexDirection = \"column\";\n        const { imageSource, spriteSize, frames, padding } = item;\n        const icon = menuItemDiv.appendChild(document.createElement(\"div\"));\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteSize[0]}px`;\n        icon.style.height = `${spriteSize[1]}px`;\n        const cols = 30;\n        const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 0) * 2);\n        const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 0) * 2);\n        let animationFrame: number;\n        const animateIcon = () => {\n          animationFrame = requestAnimationFrame(animateIcon);\n          const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n          icon.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n        };\n        animationFrame = requestAnimationFrame(animateIcon);\n        this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n\n        const label = menuItemDiv.appendChild(document.createElement(\"div\"));\n        label.innerText = disabled ?? item?.label ?? item.name;\n        label.style.textAlign = \"center\";\n        label.style.fontSize = \"10pt\";\n\n\n        menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n        if (!disabled) {\n          menuItemDiv.addEventListener(\"mouseover\", () => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 1)\";\n          });\n          menuItemDiv.addEventListener(\"mouseout\", () => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n          });\n          menuItemDiv.addEventListener(\"mousedown\", e => {\n            menuItemDiv.style.backgroundColor = \"rgba(250, 250, 150, .5)\";\n            e.preventDefault();\n            e.stopPropagation();\n          });\n          menuItemDiv.addEventListener(\"mouseup\", e => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n            if (disabled) {\n              return;\n            }\n            const actions = item.actions ?? [];\n            obj.spend(item.resourceCost);\n            actions.forEach(action => {\n              if (action.destroy) {\n                obj.doom(true);\n              }\n              if (action.create) {\n                this.manager.defineElem(action.create);\n                const elem: Elem = JSON.parse(JSON.stringify(action.create));\n                if (!elem.gameObject) {\n                  elem.gameObject = {};\n                }\n                elem.gameObject.pos = [obj?.px, obj?.py];\n                elem.owner = obj?.elem?.owner;\n                elem.home = [obj?.px, obj?.py];\n                this.scene.elems.push(elem);\n              }\n              if (action.deselect) {\n                this.manager.setSelection(undefined);\n              }\n              if (action.level && obj.elem) {\n                obj.updateLevel((obj.elem.level ?? 0) + action.level)\n                obj.refreshLabel();\n              }\n              if (action.harvest && obj.elem) {\n                obj.setHarvesting(true);\n              }\n              if (action.stopHarvest && obj.elem) {\n                obj.setHarvesting(false);\n              }\n              obj.refreshLabel();\n            });\n            this.updated = false;\n            obj.refreshBars();\n\n            e.preventDefault();\n            e.stopPropagation();\n          });\n        }\n        if (disabled) {\n          icon.style.filter = \"grayscale(100%)\";\n          icon.style.opacity = \"0.5\";\n          menuItemDiv.style.cursor = \"not-allowed\";\n        } else {\n          icon.style.filter = \"\";\n          icon.style.opacity = \"\";\n          menuItemDiv.style.cursor = \"pointer\";\n        }\n      });\n    }\n  }\n\n  showBlocker() {\n    this.blocker.style.display = \"block\";\n  }\n\n  hideBlocker() {\n    this.blocker.style.display = \"none\";\n  }\n\n  showDialog(text: string) {\n    this.dialog.style.display = \"flex\";\n    this.dialog.textContent = text;\n  }\n\n  closeDialog() {\n    this.dialog.style.display = \"none\";\n  }\n}\n",
  "import { cameraPos, cameraScale, EngineObject, mousePos, mouseWasPressed, mouseWasReleased, setCameraPos, setCameraScale, vec2, Vector2, LittleJS } from './lib/littlejs';\n\nimport { AnimationManager } from \"./animation/animation-manager\";\nimport type { Elem } from \"./definition/elem\";\nimport type { Scene } from \"./definition/scene\";\nimport { GameObject } from \"./game-object\";\nimport { Hud } from \"./hud\";\nimport type { Condition } from \"./definition/condition\";\nimport type { Resources } from \"./definition/resources\";\nimport type { Reward } from './definition/reward';\n\n\ninterface Entry {\n  gameObject: Set<GameObject>;\n  updateTime?: number;\n}\n\nexport class Manager {\n  readonly entries: Map<Elem, Entry> = new Map();\n  readonly animation: AnimationManager;\n  readonly grid: Record<string, GameObject> = {};\n  readonly revealed: Set<string> = new Set();\n  cursor?: GameObject;\n  selected?: GameObject;\n  private hovered?: GameObject;\n  mousePosDown?: Vector2;\n  readonly camShift = vec2(0, 0);\n  shifting = 0;\n  doneShifting = 0;\n  hud;\n  worldChanged = true;\n  inUI?: boolean;\n  resourceIcons: EngineObject[] = [];\n  autoEndTurn = true;\n  showLabels = true;\n\n  constructor(readonly scene: Scene) {\n    this.animation = new AnimationManager(scene.animations);\n    this.hud = new Hud(this);\n    if (scene.scale) {\n      setCameraScale(scene.scale);\n    }\n\n    document.addEventListener(\"wheel\", (e) => {\n      this.camShift.x += e.deltaX / cameraScale;\n      this.camShift.y -= e.deltaY / cameraScale;\n      e.preventDefault();\n    }, { passive: false });\n    this.hud.initialize();\n\n    window.addEventListener(\"blur\", (e) => {\n      this.hud.ui.classList.add(\"hidden\");\n      this.showLabels = false;\n      this.setSelection(undefined);\n      this.cursor?.hide();\n      this.updateLabels();\n      LittleJS.overlayCanvas.style.cursor = \"default\";\n    });\n    window.addEventListener(\"focus\", (e) => {\n      this.hud.ui.classList.remove(\"hidden\");\n      this.showLabels = true;\n      this.refreshCursor();\n      this.updateLabels();\n      LittleJS.overlayCanvas.style.cursor = \"\";\n    });\n  }\n\n  updateLabels() {\n    this.iterateRevealedCells((gameObject) => {\n      gameObject.updateLabel(this.showLabels);\n    });\n  }\n\n  refresh() {\n    this.initializeTurn();\n    this.scene.elems.forEach((elem) => {\n      this.sanitizeElem(elem);\n      this.refreshElem(elem);\n    });\n    this.shiftCamera();\n    if (this.worldChanged) {\n      this.fixWorld();\n      this.worldChanged = false;\n    }\n    this.hud.refresh();\n  }\n\n  initializeTurn() {\n    if (!this.scene.turn) {\n      this.scene.turn = {\n        player: 1,\n        turn: 1,\n      };\n    }\n  }\n\n  iterateGridCell(x: number, y: number, callback: (gameObject: GameObject) => void) {\n    Object.keys(this.scene.layers).forEach((layer) => {\n      const tag = `${layer}_${x}_${y}`;\n      const gameObject = this.grid[tag];\n      if (gameObject) {\n        callback(gameObject);\n      }\n    });\n  }\n\n  getRevealedCells() {\n    const cells: Vector2[] = [];\n    this.revealed.forEach((tag) => {\n      const [x, y] = tag.split(\"_\").map(Number);\n      cells.push(vec2(x, y));\n    });\n    return cells;\n  }\n\n  iterateRevealedCells(callback: (gameObject: GameObject) => void) {\n    const cells = this.getRevealedCells();\n    for (const cell of cells) {\n      Object.keys(this.scene.layers).forEach((layer) => {\n        const tag = `${layer}_${cell.x}_${cell.y}`;\n        const gameObject = this.grid[tag];\n        if (gameObject) {\n          callback(gameObject);\n        }\n      });\n    }\n  }\n\n  fixWorld() {\n    Object.entries(this.grid).forEach(([tag, gameObject]) => {\n      if (gameObject.elem?.condition) {\n        let conditionMet = false;\n        if (gameObject.elem.condition.tile) {\n          const tiles = Array.isArray(gameObject.elem.condition.tile) ? gameObject.elem.condition.tile : [gameObject.elem.condition.tile];\n          tiles.forEach((tile) => {\n            this.iterateGridCell(gameObject.px, gameObject.py, (target) => {\n              if (target?.elem?.name === tile) {\n                conditionMet = true;\n              }\n            });\n          });\n        }\n        let violationMet = false;\n        if (gameObject.elem.condition.noTile) {\n          const tiles = Array.isArray(gameObject.elem.condition.noTile) ? gameObject.elem.condition.noTile : [gameObject.elem.condition.noTile];\n          tiles.forEach((tile) => {\n            Object.keys(this.scene.layers).forEach((layer) => {\n              const tag = `${layer}_${gameObject.px}_${gameObject.py}`;\n              const target = this.grid[tag];\n              if (target?.elem?.name === tile) {\n                violationMet = true;\n              }\n            });\n          });\n        }\n        if (gameObject.elem.condition.zeroUnit) {\n          const tag = `unit_${gameObject.px}_${gameObject.py}`;\n          const target = this.grid[tag];\n          if (target) {\n            violationMet = true;\n          }\n        }\n        if (!conditionMet || violationMet) {\n          gameObject.doom(true);\n          delete this.grid[tag];\n        }\n      }\n    });\n  }\n\n  private shiftCamera() {\n    if (this.inUI) {\n      return;\n    }\n    if (!this.mousePosDown && mouseWasPressed(0)) {\n      this.mousePosDown = vec2(mousePos.x, mousePos.y);\n    }\n    if (this.mousePosDown && mouseWasReleased(0)) {\n      this.mousePosDown = undefined;\n      if (!this.selected) {\n        this.refreshCursor();\n      }\n      if (this.shifting) {\n        this.shifting = 0;\n        this.doneShifting = Date.now();\n        this.refreshCursor();\n      }\n    }\n\n    if (this.mousePosDown) {\n      const dx = mousePos.x - this.mousePosDown.x;\n      const dy = mousePos.y - this.mousePosDown.y;\n      if (dx || dy) {\n        const mul = 10;\n        this.camShift.set(this.camShift.x - dx * mul, this.camShift.y - dy * mul);\n        this.mousePosDown.set(mousePos.x, mousePos.y);\n        this.cursor?.hide();\n        this.shifting = Date.now();\n        this.doneShifting = 0;\n      }\n    }\n\n    const dx = this.camShift.x - cameraPos.x;\n    const dy = this.camShift.y - cameraPos.y;\n    const mul = .1;\n    setCameraPos(cameraPos.set(Math.round((cameraPos.x + dx * mul) * cameraScale) / cameraScale, Math.round((cameraPos.y + dy * mul) * cameraScale) / cameraScale));\n  }\n\n  defineElem(elem: Elem) {\n    if (elem.definition) {\n      const defintion = this.scene.definitions.find(def => def.name === elem.definition);\n      if (defintion) {\n        Object.entries(defintion).forEach(([key, value]) => {\n          const e = elem as Record<string, any>;\n          if (e[key] === undefined) {\n            e[key] = JSON.parse(JSON.stringify(value));\n          }\n        });\n        delete elem.definition;\n      }\n    }\n  }\n\n  private refreshElem(elem: Elem) {\n    this.defineElem(elem);\n    if (elem.gameObject) {\n      const entry = this.ensureElem(elem);\n      if (entry.updateTime !== elem.lastUpdate) {\n        entry.gameObject?.forEach(gameObject => {\n          gameObject.refresh(elem);\n        });\n        entry.updateTime = elem.lastUpdate;\n      }\n    } else {\n      const entry = this.entries.get(elem);\n      if (entry) {\n        entry.gameObject?.forEach(gameObject => gameObject.refresh(elem));\n        entry.gameObject.clear();\n        this.entries.delete(elem);\n      }\n    }\n  }\n\n  private ensureElem(elem: Elem): Entry {\n    let entry = this.entries.get(elem);\n    if (!entry) {\n      entry = {\n        gameObject: new Set(),\n      };\n      this.entries.set(elem, entry);\n      if (elem.gameObject && !entry.gameObject.size) {\n        const chance = elem.group?.chance ?? 1;\n        const [col, row] = elem.group?.grid ?? [1, 1];\n        for (let x = 0; x < col; x++) {\n          for (let y = 0; y < row; y++) {\n            if (Math.random() <= chance) {\n              const xx = x - Math.floor(col / 2);\n              const yy = y - Math.floor(row / 2);\n              if ((elem.type === \"decor\" || elem.water) && Math.abs(xx) <= 1 && Math.abs(yy) <= 1) {\n                continue;\n              }\n\n              if (elem.type === \"cloud\" && this.revealed.has(`${xx}_${yy}`)) {\n                continue;\n              }\n              const gameObject = new GameObject(this, vec2(xx, yy));\n              entry.gameObject.add(gameObject);\n              gameObject.refresh(elem);\n            }\n          }\n        }\n      }\n    }\n    return entry;\n  }\n\n  private sanitizeElem(elem: Elem) {\n    if (!elem.lastUpdate) {\n      elem.lastUpdate = Date.now();\n    }\n    if (elem.gameObject) {\n      if (!elem.gameObject.pos) {\n        elem.gameObject.pos = [0, 0];\n      }\n      if (!elem.gameObject.size) {\n        elem.gameObject.size = [1, 1];\n      }\n    }\n  }\n\n  countRevealPotential(x: number, y: number) {\n    let count = 0;\n    for (let xx = -1; xx <= 1; xx++) {\n      for (let yy = -1; yy <= 1; yy++) {\n        if (this.grid[`tile_${x + xx}_${y + yy}`] && !this.revealed.has(`${x + xx}_${y + yy}`)) {\n          count++;\n        }\n      }\n    }\n    return count;\n  }\n\n  getResources(x: number, y: number) {\n    const resources: Elem[\"resourcesProduced\"] = {};\n    Object.keys(this.scene.layers).forEach((layer) => {\n      const tag = `${layer}_${x}_${y}`;\n      const gameObject = this.grid[tag];\n      if (gameObject && !gameObject?.doomed) {\n        resources.wheat = (resources.wheat ?? 0) + (gameObject.elem?.resourcesProduced?.wheat ?? 0);\n        resources.wood = (resources.wood ?? 0) + (gameObject.elem?.resourcesProduced?.wood ?? 0);\n        resources.brain = (resources.brain ?? 0) + (gameObject.elem?.resourcesProduced?.brain ?? 0);\n        resources.gold = (resources.gold ?? 0) + (gameObject.elem?.resourcesProduced?.gold ?? 0);\n        resources.trade = (resources.trade ?? 0) + (gameObject.elem?.resourcesProduced?.trade ?? 0);\n      }\n    });\n    return Math.max(resources.wheat ?? 0, 0)\n      + Math.max(resources.wood ?? 0, 0)\n      + Math.max(resources.brain ?? 0, 0)\n      + Math.max(resources.gold ?? 0, 0)\n      + Math.max(resources.trade ?? 0, 0)\n      ? resources : undefined;\n  }\n\n  clearCloud(x: number, y: number) {\n    const tag = `${x}_${y}`;\n    if (this.revealed.has(tag)) {\n      return;\n    }\n    this.revealed.add(tag);\n    const gameObject = this.grid[`cloud_${x}_${y}`];\n    if (gameObject) {\n      gameObject.doom();\n      const elem = gameObject.elem;\n      if (elem) {\n        const entry = this.entries.get(elem);\n        if (entry) {\n          entry.gameObject.delete(gameObject);\n        }\n      }\n      delete this.grid[tag];\n    }\n  }\n\n  onCursorMove(x: number, y: number) {\n  }\n\n  onTap(x: number, y: number, mouseX: number, mouseY: number) {\n    if (Date.now() - this.doneShifting < 100) {\n      return;\n    }\n    if (this.inUI) {\n      return;\n    }\n    if (this.selected?.canMoveTo(x, y) && this.selected.hasMoveOptionToLandOn(x, y)) {\n      this.selected.moveTo(x, y);\n      return;\n    }\n    let unit: GameObject | undefined = this.grid[`unit_${x}_${y}`];\n    if (!unit?.canAct()) {\n      unit = undefined;\n    }\n    const house = this.grid[`house_${x}_${y}`];\n    const nextSelection = unit === this.selected ? house : unit;\n    this.setSelection(this.selected === nextSelection ? undefined : nextSelection);\n  }\n\n  setSelection(gameObject: GameObject | undefined) {\n    if (this.selected === gameObject) {\n      return;\n    }\n    const previousSelected = this.selected;\n    this.selected = gameObject;\n    previousSelected?.onSelectChange();\n    this.selected?.onSelectChange();\n    this.hud.showSelected(this.selected);\n    if (!this.shifting && this.selected) {\n      this.makeWithinView(this.selected);\n    }\n  }\n\n  makeWithinView(gameObject: GameObject) {\n    const finalDestination = gameObject.finalDestination();\n    const dx = finalDestination.x - this.camShift.x;\n    const dy = finalDestination.y - this.camShift.y;\n    const diffX = 4, diffY = 2;\n    if (Math.abs(dx) > diffX) {\n      this.camShift.set(finalDestination.x, this.camShift.y);\n    }\n    if (Math.abs(dy) > diffY) {\n      this.camShift.set(this.camShift.x, finalDestination.y);\n    }\n  }\n\n  hovering(gameObject: GameObject) {\n    if (this.inUI) {\n      return false;\n    }\n    return gameObject.px === this.cursor?.px && gameObject.py === this.cursor?.py;\n  }\n\n  refreshCursor() {\n    if (this.hovered || this.inUI) {\n      this.cursor?.hide();\n    } else {\n      this.cursor?.show();\n    }\n  }\n\n  setHovered(gameObject: GameObject | undefined) {\n    if (this.hovered === gameObject) {\n      return;\n    }\n    this.hovered = gameObject;\n    this.refreshCursor();\n  }\n\n  checkCondition(condition?: Condition, obj?: GameObject) {\n    if (!condition) {\n      return null;\n    }\n    if (condition.levelBelowEqual && (obj?.elem?.level ?? 0) <= condition.levelBelowEqual[0]) {\n      return condition.levelBelowEqual[1] ?? \"true\";\n    }\n    if (condition.occupied && obj) {\n      const tag = GameObject.getTag(condition.occupied[0], obj?.px, obj?.py);\n      if (this.grid[tag]) {\n        return condition.occupied[1] ?? \"true\";\n      }\n    }\n    if (condition.harvesting && obj && obj.elem?.harvesting) {\n      return \"true\";\n    }\n    if (condition.notHarvesting && obj && !obj.elem?.harvesting) {\n      return \"true\";\n    }\n    if (obj) {\n      let proxyCheck: string | null = null;\n      const PROXY_CHECK = [condition.proximity, condition.nonProximity];\n      PROXY_CHECK.forEach((check) => {\n        if (check && !proxyCheck) {\n          const [item, message] = check;\n          if (item) {\n            const nearby = obj.findNearby(obj => obj.elem?.name === item);\n            if (condition.proximity && nearby.size) {\n              proxyCheck = message ?? \"true\";\n            }\n            if (condition.nonProximity && !nearby.size) {\n              proxyCheck = message ?? \"true\";\n            }\n          }\n        }\n      });\n      if (proxyCheck) {\n        return proxyCheck;\n      }\n    }\n    if (condition.cannotAct) {\n      return !obj?.canAct() ? condition.cannotAct[1] : null;\n    }\n    if (condition.unitLimit) {\n      const level = obj?.elem?.level ?? 0;\n      const [unit, message] = condition.unitLimit;\n      const support = obj?.countUnitSupport(unit);\n      if (support && support >= level) {\n        return message ?? \"true\";\n      }\n    }\n    return null;\n  }\n\n  gotoNextTurn() {\n    // Increase turn count\n    if (this.scene.turn) {\n      if (this.scene.turn.player < this.scene.players.length) {\n        this.scene.turn.player++;\n      } else {\n        this.scene.turn.player = 1;\n        this.scene.turn.turn++;\n      }\n      this.collectResources(this.scene.turn.player);\n      this.giveUnitsTurns();\n      this.selectNext();\n    }\n\n    this.hud.updated = false;\n  }\n\n  giveUnitsTurns() {\n    this.iterateRevealedCells((gameObject) => {\n      console.log(\"giveTurn\", this.scene.turn?.player);\n      if (gameObject.elem?.owner === this.scene.turn?.player) {\n        gameObject.giveTurn();\n      }\n    });\n  }\n\n  calculateRevenue(player: number) {\n    const playerResources = this.scene.players[player - 1]?.resources;\n    if (!playerResources) {\n      return 0;\n    }\n    let trade = 0;\n    const visited = new Set<string>();\n    this.iterateRevealedCells((gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        if (!visited.has(`${gameObject.px}_${gameObject.py}`)) {\n          visited.add(`${gameObject.px}_${gameObject.py}`);\n          const resources = this.getResources(gameObject.px, gameObject.py);\n          if (resources) {\n            trade += resources.trade ?? 0;\n          }\n        }\n      }\n    });\n    return trade;\n  }\n\n  collectResources(player: number) {\n    const playerResources = this.scene.players[player - 1]?.resources;\n    if (!playerResources) {\n      return;\n    }\n    this.iterateRevealedCells((gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        const resources = this.getResources(gameObject.px, gameObject.py);\n        if (resources) {\n          gameObject.showResources(gameObject.px, gameObject.py, player, true);\n          gameObject.accumulateResources(resources);\n          delete elem.lastUpdate;\n        }\n      }\n    });\n    // cap resources\n    this.iterateRevealedCells((gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        gameObject.checkResourceCaps();\n      }\n    })\n\n    //  Save global resources\n    const globalResources = this.calculateResourceRevenue(player);\n    Object.entries(globalResources).forEach(([resource, value]) => {\n      const r = resource as keyof Resources;\n      playerResources[r] = (playerResources[r] ?? 0) + value;\n    });\n\n    this.hud.updated = true;\n  }\n\n  checkForAnyMove() {\n    //  check if any unit can move\n    let anyMove = false;\n    this.iterateRevealedCells((gameObject) => {\n      if (gameObject.elem?.owner === this.scene.turn?.player && gameObject.canAct()) {\n        if (gameObject.elem?.type === \"unit\"\n          && !gameObject.elem?.harvesting) {\n          anyMove = true;\n        } else if (gameObject?.elem?.type === \"house\"\n          && (gameObject.canAffordMoreHarvester() || gameObject.resourceMaxedOut())) {\n          anyMove = true;\n        }\n      }\n    });\n    if (!anyMove) {\n      if (this.autoEndTurn) {\n        this.hud.flashEndTurn(true);\n        setTimeout(() => {\n          this.gotoNextTurn();\n        }, 500);\n      } else {\n        this.hud.flashEndTurn();\n      }\n    }\n  }\n\n  calculateResourceRevenue(player: number) {\n    const revenue = this.calculateRevenue(player);\n    const RESOURCES: (keyof Resources)[] = (Object.keys(this.scene.resources) as (keyof Resources)[])\n      .filter(resource => !this.scene.resources[resource]?.hidden && this.scene.resources[resource]?.global)\n      .sort((a, b) => a.localeCompare(b));\n    const resources: Record<keyof Resources, number> = {\n      wheat: 0,\n      wood: 0,\n      gold: 0,\n      brain: 0,\n      trade: 0\n    };\n    RESOURCES.forEach((resource, index) => {\n      let taxValue = this.scene.players[player - 1].tax ?? 0;\n      let revenueValue = Math.round(revenue * taxValue / 100);\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n        revenueValue = revenue - revenueValue;\n      }\n      resources[resource] = revenueValue;\n    });\n    return resources;\n  }\n\n  selectNext() {\n    const cellsRotation: GameObject[] = [];\n    this.iterateRevealedCells((gameObject) => {\n      let include = false;\n      if (this.selected === gameObject) {\n        include = true;\n      } else if (gameObject.elem?.owner === this.scene.turn?.player\n        && gameObject.canAct()) {\n        if (gameObject.elem?.type === \"unit\"\n          && !gameObject.elem?.harvesting) {\n          include = true;\n        } else if (gameObject?.elem?.type === \"house\"\n          && (gameObject.canAffordMoreHarvester() || gameObject.resourceMaxedOut())) {\n          include = true;\n        }\n      }\n      if (include) {\n        cellsRotation.push(gameObject);\n      }\n    });\n    const currentIndex = this.selected ? cellsRotation.indexOf(this.selected) : -1;\n    // rotate cells\n    let nextIndex = (currentIndex + 1) % cellsRotation.length;\n    this.setSelection(this.selected === cellsRotation[nextIndex] ? undefined : cellsRotation[nextIndex]);\n  }\n\n  unitAt(x: number, y: number): GameObject | undefined {\n    return this.grid[`unit_${x}_${y}`];\n  }\n\n  houseAt(x: number, y: number): GameObject | undefined {\n    return this.grid[`house_${x}_${y}`];\n  }\n\n  updateResource(resource: keyof Resources, value: number | ((value: number) => number), player: number) {\n    const val = typeof value === \"function\" ? value(this.scene.players[player - 1].resources[resource] ?? 0) : value;\n    this.scene.players[player - 1].resources[resource] = val;\n    this.hud.updated = true;\n  }\n\n  findEmptySpotsAround(x: number, y: number) {\n    const emptySpots: Vector2[] = [];\n    for (let xx = -1; xx <= 1; xx++) {\n      for (let yy = -1; yy <= 1; yy++) {\n        if (xx || yy) {\n          const tag = GameObject.getTag(\"unit\", x + xx, y + yy);\n          if (!this.grid[tag]) {\n            emptySpots.push(vec2(x + xx, y + yy));\n          }\n        }\n      }\n    }\n    return emptySpots;\n\n  }\n\n  unlockRewards(obj: GameObject, rewards?: Reward[]) {\n    if (rewards) {\n      rewards.forEach((reward) => {\n        if (reward.gold) {\n          const [min, max] = reward.gold;\n          const gold = Math.floor(Math.random() * (max - min + 1) + min);\n          obj.updateResource(\"gold\", g => g + gold);\n        }\n        if (reward.invention) {\n          //  invention\n          console.log(\"invention\", reward.invention);\n        }\n        if (reward.spawnFoes) {\n          const emptySpots: Vector2[] = this.findEmptySpotsAround(obj.px, obj.py);\n          const { count, element } = reward.spawnFoes;\n          const actualCount = Math.min(emptySpots.length, Math.floor(Math.random() * (count[1] - count[0] + 1) + count[0]));\n          emptySpots.sort(() => Math.random() - .5);\n          for (let i = 0; i < actualCount; i++) {\n            const spot = emptySpots[i];\n            this.addSceneElemAt(element, spot.x, spot.y);\n          }\n        }\n        if (reward.unit) {\n          const emptySpots: Vector2[] = this.findEmptySpotsAround(obj.px, obj.py);\n          if (emptySpots.length) {\n            const spot = emptySpots[Math.floor(Math.random() * emptySpots.length)];\n            this.addSceneElemAt(reward.unit, spot.x, spot.y, {\n              owner: obj?.elem?.owner\n            });\n          }\n        }\n      });\n    }\n  }\n\n  addSceneElemAt(elem: Elem, x: number, y: number, config: Partial<Elem> = {}) {\n    const tag = GameObject.getTag(elem.type, x, y);\n    if (this.grid[tag]) {\n      return;\n    }\n    const newElem = JSON.parse(JSON.stringify(elem));\n    newElem.gameObject = newElem.gameObject ?? {};\n    newElem.gameObject.pos = [x, y];\n    Object.assign(newElem, config);\n    this.scene.elems.push(newElem);\n  }\n}\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const CABANA_DEFINITION: Elem = {\n  name: \"cabana\",\n  type: \"house\",\n  gameObject: {\n    offset: [0, .2] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"cabana\",\n  },\n  condition: {\n    tile: \"plain\",\n    noTile: [\"lake\", \"mountain\", \"tree\"],\n    zeroUnit: true,\n  },\n  rewards: [\n    { gold: [10, 30] },\n    { invention: 1 },\n    {\n      spawnFoes: {\n        count: [1, 3],\n        element: {\n          // definition: \"dog\",\n        },\n      }\n    },\n    {\n      unit: {\n        definition: \"dog\",\n      }\n    },\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const COW_DEFINITION: Elem = {\n  name: \"cow\",\n  type: \"unit\",\n  hitpoints: 15,\n  maxHitPoints: 15,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.06,\n  },\n  animation: {\n    name: \"cow\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"cow_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  clearCloud: true,\n  move: {\n    animation: \"cow_jump\",\n    distance: 2,\n    disabled: {\n      harvesting: true,\n    },\n  },\n  harvest: {\n    animation: \"cow_sleep\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  worker: true,\n  turn: {\n    moves: 1,\n    attacks: 0,\n    actions: 1,\n  },\n  closeToHome: true,\n  endlessMove: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const DOG_DEFINITION: Elem = {\n  name: \"dog\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"dog\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"dog_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"dog_jump\",\n    distance: 2,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const HOUSE_DEFINITION: Elem = {\n  name: \"house\",\n  type: \"house\",\n  level: 1,\n  gameObject: {\n    offset: [0, .7] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"house\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"house\",\n    indic: {\n      animation: \"indic\",\n    },\n  },\n  dynamic: true,\n  settler: true,\n  harvesting: true,\n  building: true,\n  turn: {\n    moves: 0,\n    attacks: 0,\n  },\n  resourcesProduced: {\n    trade: 1,\n  }\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const RIVER_DEFINITION: Elem = {\n  name: \"river\",\n  type: \"road\",\n  resourcesProduced: {\n    wheat: 1,\n    trade: 1,\n  },\n  gameObject: {\n    size: [2, 2],\n  },\n  animation: {\n    name: \"river\",\n  },\n  condition: {\n    noTile: \"lake\",\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SHEEP_DEFINITION: Elem = {\n  name: \"sheep\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"sheep\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"sheep_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"sheep_jump\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  settler: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n};\n",
  "import type { Menu } from \"../../definition/menu\";\n\nexport const COW_MENU: Menu = {\n  name: \"cow\",\n  description: \"Cows are your workers.\\nUse them to harvest resources.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  items: [\n    {\n      name: \"harvest\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [55],\n      label: \"harvest\",\n      hidden: {\n        occupied: [\"house\", \"No harvest on house\"],\n        harvesting: true,\n      },\n      disabled: {\n        nonProximity: [\"house\", \"Must be\\nnext to a house\"],\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          harvest: true,\n        },\n      ],\n    },\n    {\n      name: \"stopHarvest\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [51],\n      label: \"stop harvest\",\n      hidden: {\n        notHarvesting: true,\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          stopHarvest: true,\n        },\n      ],\n    },\n  ],\n};\n",
  "import type { MenuItem } from \"../../definition/menu\";\n\nexport const HOUSE_MENU_DEBUG: MenuItem[] = [\n  {\n    name: \"hobo\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [86, 87],\n    label: \"spawn\\nhobo\",\n    disabled: {\n    },\n    actions: [\n      {\n        deselect: true,\n        create: {\n          definition: \"hobo\",\n          selfSelect: true,\n        },\n      },\n    ],\n    debug: true,\n  },\n];\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { HOUSE_MENU_DEBUG } from \"./house-menu-debug\";\n\nexport const HOUSE_MENU: Menu = {\n  name: \"house\",\n  description: \"Use settlements to grow your animal kingdom.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [27, 28, 29],\n  },\n  items: [\n    {\n      name: \"sheep\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [6],\n      label: \"spawn\\nsheep\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        levelBelowEqual: [1, \"Settlement\\nlevel too low\"],\n        cannotAct: [true, \"Wait next turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          level: -1,\n          create: {\n            definition: \"sheep\",\n            selfSelect: true,\n          },\n        },\n      ],\n    },\n    {\n      name: \"dog\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [46],\n      label: \"spawn\\ndog\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"dog\",\n            selfSelect: true,\n          },\n        },\n      ],\n    },\n    {\n      name: \"cow\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [51],\n      label: \"spawn\\ncow\",\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n        unitLimit: [\"cow\", \"Increase level\\nto spawn more\"],\n      },\n      disabled: {\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"cow\",\n            selfSelect: true,\n          },\n        },\n      ],\n    },\n    ...HOUSE_MENU_DEBUG,\n  ],\n};\n",
  "import type { Menu } from \"../../definition/menu\";\n\nexport const SHEEP_MENU: Menu = {\n  name: \"sheep\",\n  description: \"The sheep is your settler.\\nUse it to build settlements.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [6, 7],\n  },\n  items: [\n    {\n      name: \"build\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [27, 28, 29],\n      label: \"build\\nsettlement\",\n      disabled: {\n        proximity: [\"house\", \"Too close to\\nanother house\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"house\",\n            selfSelect: true,\n          },\n        },\n        {\n          destroy: true,\n        },\n      ],\n    },\n  ],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const BEAVER_RESEARCH: Research = {\n  name: \"beaver\",\n  description: \"Beavers can build dams.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"squirrel\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const BOVINE_RESEARCH: Research = {\n  name: \"bovine\",\n  description: \"Cows are your workers.\\nUse them to harvest resources.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const CANINE_RESEARCH: Research = {\n  name: \"canine\",\n  description: \"Dogs are your scouts.\\nUse them to explore the world.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [46],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const ELEPHANT_RESEARCH: Research = {\n  name: \"elephant\",\n  description: \"Elephants can trample enemies.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"pig\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const EAGLE_RESEARCH: Research = {\n  name: \"eagle\",\n  description: \"Eagles are airborn fighters.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"owl\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const GOAT_RESEARCH: Research = {\n  name: \"goat\",\n  description: \"Goats can climb mountains.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const HORSE_RESEARCH: Research = {\n  name: \"horse\",\n  description: \"Horses a fast fighters.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const LAMA_RESEARCH: Research = {\n  name: \"lama\",\n  description: \"Lamas spit at their enemies.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const MONKEY_RESEARCH: Research = {\n  name: \"monkey\",\n  description: \"Monkeys throw projectiles.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const OWL_RESEARCH: Research = {\n  name: \"owl\",\n  description: \"Owls are flying scouts.\\nThey hide in trees.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"tortoise\", \"squirrel\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const PANDA_RESEARCH: Research = {\n  name: \"panda\",\n  description: \"Pandas are strong fighters.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"squirrel\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const PIG_RESEARCH: Research = {\n  name: \"pig\",\n  description: \"Pigs can harvest resources faster.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"bovine\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const SKUNK_RESEARCH: Research = {\n  name: \"skunk\",\n  description: \"Skunks can spray enemies.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"squirrel\"],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const SQUIRREL_RESEARCH: Research = {\n  name: \"squirrel\",\n  description: \"Squirrels can climb trees.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const TORTOISE_RESEARCH: Research = {\n  name: \"tortoise\",\n  description: \"Turtles can carry others on water.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [],\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const WOLVES_RESEARCH: Research = {\n  name: \"wolves\",\n  description: \"Wolves are ferocious fighters.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [46],\n  },\n  dependency: [\"canine\"],\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const BRAIN_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [58],\n  },\n  global: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const GOLD_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [59],\n  },\n  global: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const TRADE_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [60],\n  },\n  global: true,\n  hidden: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const WHEAT_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [56],\n  },\n  forGrowth: true,\n}\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const WOOD_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [57],\n  },\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const RABBIT_RESEARCH: Research = {\n  name: \"rabbit\",\n  description: \"Rabbits cast magic spells to heal.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  dependency: [\"beaver\"],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const TRIANGLE_ANIMATION: Anim = {\n  name: \"triangle\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    0, 1, 2, 3,\n  ],\n};\n\nexport const HOVER_ANIMATION: Anim = {\n  name: \"hover\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    20,\n  ],\n};\n\nexport const INDIC_ANIMATION: Anim = {\n  name: \"indic\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 3,\n  frames: [\n    9, 9, 10, 11, 12, 11, 10,\n  ],\n};\n\nexport const BLUE_ANIMATION: Anim = {\n  name: \"blue\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    13,\n  ],\n};\n\nexport const BLUE_SELECTED_ANIMATION: Anim = {\n  name: \"blue_selected\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    21, 22, 23, 24, 23, 22, 21,\n  ],\n  mul: 3,\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SHEEP_ANIMATION: Anim = {\n  name: \"sheep\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    6,\n  ],\n};\n\nexport const SHEEP_WAIT_ANIMATION: Anim = {\n  name: \"sheep_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    6, 7,\n  ],\n};\n\nexport const SHEEP_JUMP_ANIMATION: Anim = {\n  name: \"sheep_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    6, 7, 8, 8,\n  ],\n  airFrames: [8],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const GRASSLAND_ANIMATION: Anim = {\n  name: \"grassland\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    14,\n  ],\n};\n\nexport const PLAIN_ANIMATION: Anim = {\n  name: \"plain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    30,\n  ],\n};\n\nexport const GRASS_ANIMATION: Anim = {\n  name: \"grass\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    15,\n  ],\n};\n\nexport const TREE_ANIMATION: Anim = {\n  name: \"tree\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    16,\n  ],\n};\n\nexport const TREE_LEAF_ANIMATION: Anim = {\n  name: \"tree_leaf\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    17,\n  ],\n};\n\nexport const MOUNTAIN_ANIMATION: Anim = {\n  name: \"mountain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    25,\n  ],\n};\n\nexport const LAKE_ANIMATION: Anim = {\n  name: \"lake\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    33,\n  ],\n};\n\nexport const WAVE_ANIMATION: Anim = {\n  name: \"wave\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    34,\n  ],\n};\n\nexport const RIVER_ANIMATION: Anim = {\n  name: \"river\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    32,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const CLOUD_ANIMATION: Anim = {\n  name: \"cloud\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    18,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SHADOW_ANIMATION: Anim = {\n  name: \"shadow\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    19,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const HOUSE_ANIMATION: Anim = {\n  name: \"house\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    27, 28, 29,\n  ],\n  mul: 20,\n};\n\nexport const CABANA_ANIMATION: Anim = {\n  name: \"cabana\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    61,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const DIGITS_ANIMATION: Anim[] = new Array(10)\n  .fill(36)\n  .map((base, i) => ({\n    name: `num_${i}`,\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    frames: [\n      base + i,\n    ],\n  }));\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const DOG_ANIMATION: Anim = {\n  name: \"dog\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    46,\n  ],\n};\n\nexport const DOG_WAIT_ANIMATION: Anim = {\n  name: \"dog_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    46, 47,\n  ],\n};\n\nexport const DOG_JUMP_ANIMATION: Anim = {\n  name: \"dog_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    47, 48, 49, 49, 50,\n  ],\n  airFrames: [48, 49],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const COW_ANIMATION: Anim = {\n  name: \"cow\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    51,\n  ],\n}\n\nexport const COW_WAIT_ANIMATION: Anim = {\n  name: \"cow_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    51, 52, 51,\n  ],\n};\n\nexport const COW_JUMP_ANIMATION: Anim = {\n  name: \"cow_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 5,\n  frames: [\n    51, 53, 54,\n  ],\n  airFrames: [54],\n};\n\nexport const COW_SLEEP_ANIMATION: Anim = {\n  name: \"cow_sleep\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 10,\n  frames: [\n    55,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const WHEAT_ANIMATION: Anim = {\n  name: \"wheat\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    56,\n  ],\n};\n\nexport const WOOD_ANIMATION: Anim = {\n  name: \"wood\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    57,\n  ],\n};\n\nexport const BRAIN_ANIMATION: Anim = {\n  name: \"brain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    58,\n  ],\n};\n\nexport const GOLD_ANIMATION: Anim = {\n  name: \"gold\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    59,\n  ],\n};\n\nexport const TRADE_ANIMATION: Anim = {\n  name: \"trade\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    60,\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const CURSOR: Elem = {\n  name: \"cursor\",\n  type: \"cursor\",\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"triangle\",\n  },\n  mouseFollower: {\n    snap: 1,\n  },\n  dynamic: true,\n};\n",
  "export const SIZE: number = 30;\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const CLOUD: Elem = {\n  name: \"cloud\",\n  type: \"cloud\",\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n  },\n  animation: {\n    name: \"cloud\",\n  },\n  spread: {\n    animation: \"cloud\",\n    count: [4, 5] as [number, number],\n    color: \"#ffffffaa\",\n    size: 1.2,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const GRASS: Elem = {\n  name: \"grass\",\n  type: \"tile\",\n  resourcesProduced: {\n    wheat: 2,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"grassland\",\n  },\n  spread: {\n    animation: \"grass\",\n    count: [3, 7] as [number, number],\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const PLAIN: Elem = {\n  name: \"plain\",\n  type: \"tile_overlay\",\n  resourcesProduced: {\n    wood: 1,\n    wheat: -1,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: .9,\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"plain\",\n  },\n  spread: {\n    animation: \"grass\",\n    count: [3, 7] as [number, number],\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const LAKE: Elem = {\n  name: \"lake\",\n  type: \"tile_overlay\",\n  resourcesProduced: {\n    wheat: -1,\n    trade: 2,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: .1,\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"lake\",\n  },\n  spread: {\n    animation: \"wave\",\n    count: [3, 7] as [number, number],\n  },\n  branchOut: {\n    count: [1, 5] as [number, number],\n    chance: .2,\n    element: {\n      definition: \"river\",\n    },\n  },\n  water: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const TREE: Elem = {\n  name: \"tree\",\n  type: \"decor\",\n  resourcesProduced: {\n    wood: 1,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.1,\n  },\n  condition: {\n    tile: \"plain\",\n    noTile: \"lake\",\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"tree\",\n  },\n  spread: {\n    animation: \"tree_leaf\",\n    count: [50, 100] as [number, number],\n    radius: .25,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const MOUNTAIN: Elem = {\n  name: \"mountain\",\n  type: \"decor\",\n  resourcesProduced: {\n    wheat: -2,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.1,\n  },\n  condition: {\n    tile: \"plain\",\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"mountain\",\n  },\n  spread: {\n    animation: \"mountain\",\n    count: [8, 10] as [number, number],\n    radius: .3,\n    behind: true,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const HOBO_DEFINITION: Elem = {\n  name: \"hobo\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    offset: [0, .3] as [number, number],\n    size: [1.2, 1.2] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"hobo\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"hobo_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"hobo_jump\",\n    distance: 1,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SHEEP: Elem = {\n  definition: \"sheep\",\n  owner: 1,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const CABANA: Elem = {\n  name: \"cabana\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.02,\n  },\n  definition: \"cabana\",\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const HOBO_ANIMATION: Anim = {\n  name: \"hobo\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    86,\n  ],\n};\n\nexport const HOBO_WAIT_ANIMATION: Anim = {\n  name: \"hobo_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    86, 87,\n  ],\n};\n\nexport const HOBO_JUMP_ANIMATION: Anim = {\n  name: \"hobo_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    86, 88, 86, 89,\n  ],\n};\n",
  "import type { Scene } from \"../definition/scene\";\nimport { CABANA_DEFINITION } from \"./definitions/cabana\";\nimport { COW_DEFINITION } from \"./definitions/cow\";\nimport { DOG_DEFINITION } from \"./definitions/dog\";\nimport { HOUSE_DEFINITION } from \"./definitions/house\";\nimport { RIVER_DEFINITION } from \"./definitions/river\";\nimport { SHEEP_DEFINITION } from \"./definitions/sheep\";\nimport { COW_MENU } from \"./menu/cow-menu\";\nimport { HOUSE_MENU } from \"./menu/house-menu\";\nimport { SHEEP_MENU } from \"./menu/sheep-menu\";\nimport { BEAVER_RESEARCH } from \"./research/beaver\";\nimport { BOVINE_RESEARCH } from \"./research/bovine\";\nimport { CANINE_RESEARCH } from \"./research/canine\";\nimport { ELEPHANT_RESEARCH } from \"./research/elephant\";\nimport { EAGLE_RESEARCH } from \"./research/eagle\";\nimport { GOAT_RESEARCH } from \"./research/goat\";\nimport { HORSE_RESEARCH } from \"./research/horse\";\nimport { LAMA_RESEARCH } from \"./research/lama\";\nimport { MONKEY_RESEARCH } from \"./research/monkey\";\nimport { OWL_RESEARCH } from \"./research/owl\";\nimport { PANDA_RESEARCH } from \"./research/panda\";\nimport { PIG_RESEARCH } from \"./research/pig\";\nimport { SKUNK_RESEARCH } from \"./research/skunk\";\nimport { SQUIRREL_RESEARCH } from \"./research/squirrel\";\nimport { TORTOISE_RESEARCH } from \"./research/tortoise\";\nimport { WOLVES_RESEARCH } from \"./research/wolves\";\nimport { BRAIN_RESOURCE } from \"./resources/brain\";\nimport { GOLD_RESOURCE } from \"./resources/gold\";\nimport { TRADE_RESOURCE } from \"./resources/trade\";\nimport { WHEAT_RESOURCE } from \"./resources/wheat\";\nimport { WOOD_RESOURCE } from \"./resources/wood\";\nimport { RABBIT_RESEARCH } from \"./research/rabbit\";\nimport { BLUE_ANIMATION, BLUE_SELECTED_ANIMATION, HOVER_ANIMATION, INDIC_ANIMATION, TRIANGLE_ANIMATION } from \"./animations/indicators\";\nimport { SHEEP_ANIMATION, SHEEP_JUMP_ANIMATION, SHEEP_WAIT_ANIMATION } from \"./animations/sheep\";\nimport { GRASS_ANIMATION, GRASSLAND_ANIMATION, LAKE_ANIMATION, MOUNTAIN_ANIMATION, PLAIN_ANIMATION, RIVER_ANIMATION, TREE_ANIMATION, TREE_LEAF_ANIMATION, WAVE_ANIMATION } from \"./animations/terrain\";\nimport { CLOUD_ANIMATION } from \"./animations/cloud\";\nimport { SHADOW_ANIMATION } from \"./animations/shadow\";\nimport { CABANA_ANIMATION, HOUSE_ANIMATION } from \"./animations/house\";\nimport { DIGITS_ANIMATION } from \"./animations/digits\";\nimport { DOG_ANIMATION, DOG_JUMP_ANIMATION, DOG_WAIT_ANIMATION } from \"./animations/dog\";\nimport { COW_ANIMATION, COW_JUMP_ANIMATION, COW_SLEEP_ANIMATION, COW_WAIT_ANIMATION } from \"./animations/cow\";\nimport { BRAIN_ANIMATION, GOLD_ANIMATION, TRADE_ANIMATION, WHEAT_ANIMATION, WOOD_ANIMATION } from \"./animations/resources\";\nimport { CURSOR } from \"./elems/cursor\";\nimport { CLOUD } from \"./elems/cloud\";\nimport { GRASS } from \"./elems/grass\";\nimport { PLAIN } from \"./elems/plain\";\nimport { LAKE } from \"./elems/lake\";\nimport { TREE } from \"./elems/tree\";\nimport { MOUNTAIN } from \"./elems/mountain\";\nimport { HOBO_DEFINITION } from \"./definitions/hobo\";\nimport { SHEEP } from \"./elems/sheep\";\nimport { CABANA } from \"./elems/cabana\";\nimport { HOBO_ANIMATION, HOBO_JUMP_ANIMATION, HOBO_WAIT_ANIMATION } from \"./animations/hobo\";\n\nexport const worldData: Scene = (window as any).worldData = {\n  scale: 80,\n  players: [\n    {\n      tax: 50,\n      resources: {\n        brain: 0,\n        gold: 0,\n      },\n    },\n  ],\n  layers: {\n    \"tile\": 0,\n    \"tile_overlay\": 1,\n    \"road\": 3,\n    \"house\": 4,\n    \"unit\": 4,\n    \"decor\": 4,\n    \"cloud\": 6,\n    \"cursor\": 7,\n  },\n  colayers: {\n    \"house\": 1,\n    \"decor\": 2,\n    \"unit\": 3,\n  },\n  definitions: [\n    HOBO_DEFINITION,\n    SHEEP_DEFINITION,\n    DOG_DEFINITION,\n    COW_DEFINITION,\n    RIVER_DEFINITION,\n    HOUSE_DEFINITION,\n    CABANA_DEFINITION,\n  ],\n  animations: [\n    TRIANGLE_ANIMATION,\n    SHEEP_ANIMATION,\n    SHEEP_WAIT_ANIMATION,\n    SHEEP_JUMP_ANIMATION,\n    HOVER_ANIMATION,\n    INDIC_ANIMATION,\n    BLUE_ANIMATION,\n    GRASSLAND_ANIMATION,\n    PLAIN_ANIMATION,\n    GRASS_ANIMATION,\n    TREE_ANIMATION,\n    TREE_LEAF_ANIMATION,\n    MOUNTAIN_ANIMATION,\n    CLOUD_ANIMATION,\n    SHADOW_ANIMATION,\n    BLUE_SELECTED_ANIMATION,\n    LAKE_ANIMATION,\n    WAVE_ANIMATION,\n    RIVER_ANIMATION,\n    HOUSE_ANIMATION,\n    CABANA_ANIMATION,\n    ...DIGITS_ANIMATION,\n    DOG_ANIMATION,\n    DOG_WAIT_ANIMATION,\n    DOG_JUMP_ANIMATION,\n    COW_ANIMATION,\n    COW_WAIT_ANIMATION,\n    COW_JUMP_ANIMATION,\n    COW_SLEEP_ANIMATION,\n    WHEAT_ANIMATION,\n    WOOD_ANIMATION,\n    BRAIN_ANIMATION,\n    GOLD_ANIMATION,\n    TRADE_ANIMATION,\n    HOBO_ANIMATION,\n    HOBO_JUMP_ANIMATION,\n    HOBO_WAIT_ANIMATION,\n  ],\n  elems: [\n    CURSOR,\n    CLOUD,\n    SHEEP,\n    GRASS,\n    PLAIN,\n    LAKE,\n    TREE,\n    MOUNTAIN,\n    CABANA,\n  ],\n  menu: [\n    SHEEP_MENU,\n    HOUSE_MENU,\n    COW_MENU,\n  ],\n  resources: {\n    wheat: WHEAT_RESOURCE,\n    wood: WOOD_RESOURCE,\n    brain: BRAIN_RESOURCE,\n    gold: GOLD_RESOURCE,\n    trade: TRADE_RESOURCE,\n  },\n  research: [\n    CANINE_RESEARCH,\n    BOVINE_RESEARCH,\n    WOLVES_RESEARCH,\n    BOVINE_RESEARCH,\n    TORTOISE_RESEARCH,\n    GOAT_RESEARCH,\n    SQUIRREL_RESEARCH,\n    SKUNK_RESEARCH,\n    HORSE_RESEARCH,\n    MONKEY_RESEARCH,\n    PANDA_RESEARCH,\n    PIG_RESEARCH,\n    ELEPHANT_RESEARCH,\n    BEAVER_RESEARCH,\n    OWL_RESEARCH,\n    LAMA_RESEARCH,\n    EAGLE_RESEARCH,\n    RABBIT_RESEARCH,\n  ],\n};\n",
  "/// <reference lib=\"dom\" />\n/// <reference lib=\"dom.iterable\" />\n\n'use strict';\n\nimport { Manager } from \"./manager\";\nimport { worldData } from \"./content/world\";\nimport { engineInit } from \"./lib/littlejs\";\n\nlet manager = new Manager(worldData);\n(window as any).manager = manager;\n\nfunction gameInit() {\n}\n\nfunction gameUpdate() {\n  manager.refresh();\n}\n\nfunction postUpdate() {\n}\n\nfunction render() {\n}\n\nfunction renderPost() {\n}\n\nengineInit(\n  gameInit,\n  gameUpdate,\n  postUpdate,\n  render,\n  renderPost,\n  manager.animation.imageSources,\n)\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "debugId": "EDC90D5B4A8D23C964756e2164756e21",
  "names": []
}