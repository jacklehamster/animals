{
  "version": 3,
  "sources": ["../../dist/littlejs.esm.min.js", "../../dist/littlejs.esm.min.js", "../../dist/littlejs.esm.min.js", "../../src/lib/littlejs.ts", "../../src/animation/animation-manager.ts", "../../src/core/objects/decor.ts", "../../src/core/objects/move-option.ts", "../../src/core/objects/attack-option.ts", "../../src/core/projectile.ts", "../../src/core/objects/game-object.ts", "../../src/content/constant.ts", "../../src/ui/hud.ts", "../../src/ai/thinker.ts", "../../src/core/manager.ts", "../../src/content/definitions/cabana.ts", "../../src/content/definitions/cow.ts", "../../src/content/definitions/dog.ts", "../../src/content/definitions/house.ts", "../../src/content/definitions/river.ts", "../../src/content/definitions/sheep.ts", "../../src/content/animations/bull.ts", "../../src/content/menu/cow-menu.ts", "../../src/content/animations/cow.ts", "../../src/content/animations/dog.ts", "../../src/content/animations/house.ts", "../../src/content/animations/sheep.ts", "../../src/content/animations/squirrel.ts", "../../src/content/animations/turtle.ts", "../../src/content/animations/beaver.ts", "../../src/content/menu/house-menu-debug.ts", "../../src/content/menu/house-menu.ts", "../../src/content/menu/sheep-menu.ts", "../../src/content/research/beaver.ts", "../../src/content/research/bovine.ts", "../../src/content/research/canine.ts", "../../src/content/research/squirrel.ts", "../../src/content/research/tortoise.ts", "../../src/content/research/wolves.ts", "../../src/content/resources/brain.ts", "../../src/content/resources/gold.ts", "../../src/content/resources/trade.ts", "../../src/content/resources/wheat.ts", "../../src/content/resources/wood.ts", "../../src/content/animations/indicators.ts", "../../src/content/animations/terrain.ts", "../../src/content/animations/cloud.ts", "../../src/content/animations/shadow.ts", "../../src/content/animations/digits.ts", "../../src/content/animations/resources.ts", "../../src/content/elems/cursor.ts", "../../src/content/elems/cloud.ts", "../../src/content/elems/grass.ts", "../../src/content/elems/plain.ts", "../../src/content/elems/lake.ts", "../../src/content/elems/tree.ts", "../../src/content/elems/mountain.ts", "../../src/content/definitions/hobo.ts", "../../src/content/elems/sheep.ts", "../../src/content/elems/cabana.ts", "../../src/content/animations/hobo.ts", "../../src/content/definitions/squirrel.ts", "../../src/content/elems/test-units.ts", "../../src/content/animations/soldier.ts", "../../src/content/definitions/soldier.ts", "../../src/content/animations/nut.ts", "../../src/content/research/oviculture.ts", "../../src/content/definitions/beaver.ts", "../../src/content/menu/squirrel-menu.ts", "../../src/content/definitions/bull.ts", "../../src/content/research/taurology.ts", "../../src/content/menu/beaver-menu.ts", "../../src/content/definitions/tree.ts", "../../src/content/definitions/turtle.ts", "../../src/content/definitions/fruit.ts", "../../src/content/animations/goodies.ts", "../../src/content/elems/fruit.ts", "../../src/content/definitions/potgold.ts", "../../src/content/definitions/coral.ts", "../../src/content/elems/coral.ts", "../../src/content/elems/potgold.ts", "../../src/content/animations/globe.ts", "../../src/content/research/exploration.ts", "../../src/content/research/productivity.ts", "../../src/content/research/expansion.ts", "../../src/content/definitions/village.ts", "../../src/content/research/village.ts", "../../src/content/animations/spaceship.ts", "../../src/content/menu/village-menu.ts", "../../src/content/research/spaceship.ts", "../../src/content/world.ts", "../../src/index.ts"],
  "sourcesContent": [
    "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "let showWatermark=0,debugKey=\"\";const debug=0,debugOverlay=0,debugPhysics=0,debugParticles=0,debugRaycast=0,debugGamepads=0,debugMedals=0;function ASSERT(){}function debugInit(){}function debugUpdate(){}function debugRender(){}function debugRect(){}function debugPoly(){}function debugCircle(){}function debugPoint(){}function debugLine(){}function debugOverlap(){}function debugText(){}function debugClear(){}function debugSaveCanvas(){}function debugSaveText(){}function debugSaveDataURL(){}const PI=Math.PI;function abs(a){return Math.abs(a)}function min(a,b){return Math.min(a,b)}function max(a,b){return Math.max(a,b)}function sign(a){return Math.sign(a)}function mod(a,b=1){return(a%b+b)%b}function clamp(a,b=0,c=1){return a<b?b:a>c?c:a}function percent(a,b,c){return(c-=b)?clamp((a-b)/c):0}function lerp(a,b,c){return b+clamp(a)*(c-b)}function distanceWrap(a,b,c=1){a=(a-b)%c;return 2*a%c-a}function lerpWrap(a,b,c,d=1){return c+clamp(a)*distanceWrap(b,c,d)}function distanceAngle(a,b){return distanceWrap(a,b,2*PI)}function lerpAngle(a,b,c){return lerpWrap(a,b,c,2*PI)}function smoothStep(a){return a*a*(3-2*a)}function nearestPowerOfTwo(a){return 2**Math.ceil(Math.log2(a))}function isOverlapping(a,b,c,d=vec2()){return 2*abs(a.x-c.x)<b.x+d.x&&2*abs(a.y-c.y)<b.y+d.y}function isIntersecting(a,b,c,d){c=c.subtract(d.scale(.5));d=c.add(d);b=b.subtract(a);c=a.subtract(c);d=a.subtract(d);a=[-b.x,b.x,-b.y,b.y];b=[c.x,-d.x,c.y,-d.y];c=0;d=1;for(let e=4;e--;)if(a[e]){const f=b[e]/a[e];if(0>a[e]){if(f>d)return!1;c=max(f,c)}else{if(f<c)return!1;d=min(f,d)}}else if(0>b[e])return!1;return!0}function wave(a=1,b=1,c=time){return b/2*(1-Math.cos(c*a*2*PI))}function formatTime(a){return(a/60|0)+\":\"+(10>a%60?\"0\":\"\")+(a%60|0)}function rand(a=1,b=0){return b+Math.random()*(a-b)}function randInt(a,b=0){return Math.floor(rand(a,b))}function randSign(){return 2*randInt(2)-1}function randVector(a=1){return(new Vector2).setAngle(rand(2*PI),a)}function randInCircle(a=1,b=0){return 0<a?randVector(a*rand(b/a,1)**.5):new Vector2}function randColor(a=new Color,b=new Color(0,0,0,1),c=!1){return c?a.lerp(b,rand()):new Color(rand(a.r,b.r),rand(a.g,b.g),rand(a.b,b.b),rand(a.a,b.a))}class RandomGenerator{constructor(a){this.seed=a}float(a=1,b=0){this.seed^=this.seed<<13;this.seed^=this.seed>>>17;this.seed^=this.seed<<5;return b+(a-b)*abs(this.seed%1e8)/1e8}int(a,b=0){return Math.floor(this.float(a,b))}sign(){return.5<this.float()?1:-1}}function vec2(a=0,b){return\"number\"==typeof a?new Vector2(a,void 0==b?a:b):new Vector2(a.x,a.y)}function isVector2(a){return a instanceof Vector2}class Vector2{constructor(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid())}set(a=0,b=0){this.x=a;this.y=b;ASSERT(this.isValid());return this}copy(){return new Vector2(this.x,this.y)}add(a){ASSERT(isVector2(a));return new Vector2(this.x+a.x,this.y+a.y)}subtract(a){ASSERT(isVector2(a));return new Vector2(this.x-a.x,this.y-a.y)}multiply(a){ASSERT(isVector2(a));return new Vector2(this.x*a.x,this.y*a.y)}divide(a){ASSERT(isVector2(a));return new Vector2(this.x/a.x,this.y/a.y)}scale(a){ASSERT(!isVector2(a));return new Vector2(this.x*a,this.y*a)}length(){return this.lengthSquared()**.5}lengthSquared(){return this.x**2+this.y**2}distance(a){ASSERT(isVector2(a));return this.distanceSquared(a)**.5}distanceSquared(a){ASSERT(isVector2(a));return(this.x-a.x)**2+(this.y-a.y)**2}normalize(a=1){const b=this.length();return b?this.scale(a/b):new Vector2(0,a)}clampLength(a=1){const b=this.length();return b>a?this.scale(a/b):this}dot(a){ASSERT(isVector2(a));return this.x*a.x+this.y*a.y}cross(a){ASSERT(isVector2(a));return this.x*a.y-this.y*a.x}angle(){return Math.atan2(this.x,this.y)}setAngle(a=0,b=1){this.x=b*Math.sin(a);this.y=b*Math.cos(a);return this}rotate(a){const b=Math.cos(a);a=Math.sin(a);return new Vector2(this.x*b-this.y*a,this.x*a+this.y*b)}setDirection(a,b=1){a=mod(a,4);ASSERT(0==a||1==a||2==a||3==a);return vec2(a%2?a-1?-b:b:0,a%2?0:a?-b:b)}direction(){return abs(this.x)>abs(this.y)?0>this.x?3:1:0>this.y?2:0}invert(){return new Vector2(this.y,-this.x)}floor(){return new Vector2(Math.floor(this.x),Math.floor(this.y))}area(){return abs(this.x*this.y)}lerp(a,b){ASSERT(isVector2(a));return this.add(a.subtract(this).scale(clamp(b)))}arrayCheck(a){ASSERT(isVector2(a));return 0<=this.x&&0<=this.y&&this.x<a.x&&this.y<a.y}toString(a=3){if(debug)return`(${(0>this.x?\"\":\" \")+this.x.toFixed(a)},${(0>this.y?\"\":\" \")+this.y.toFixed(a)} )`}isValid(){return\"number\"==typeof this.x&&!isNaN(this.x)&&\"number\"==typeof this.y&&!isNaN(this.y)}}function rgb(a,b,c,d){return new Color(a,b,c,d)}function hsl(a,b,c,d){return(new Color).setHSLA(a,b,c,d)}function isColor(a){return a instanceof Color}class Color{constructor(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid())}set(a=1,b=1,c=1,d=1){this.r=a;this.g=b;this.b=c;this.a=d;ASSERT(this.isValid());return this}copy(){return new Color(this.r,this.g,this.b,this.a)}add(a){ASSERT(isColor(a));return new Color(this.r+a.r,this.g+a.g,this.b+a.b,this.a+a.a)}subtract(a){ASSERT(isColor(a));return new Color(this.r-a.r,this.g-a.g,this.b-a.b,this.a-a.a)}multiply(a){ASSERT(isColor(a));return new Color(this.r*a.r,this.g*a.g,this.b*a.b,this.a*a.a)}divide(a){ASSERT(isColor(a));return new Color(this.r/a.r,this.g/a.g,this.b/a.b,this.a/a.a)}scale(a,b=a){return new Color(this.r*a,this.g*a,this.b*a,this.a*b)}clamp(){return new Color(clamp(this.r),clamp(this.g),clamp(this.b),clamp(this.a))}lerp(a,b){ASSERT(isColor(a));return this.add(a.subtract(this).scale(clamp(b)))}setHSLA(a=0,b=0,c=1,d=1){a=mod(a,1);b=clamp(b);c=clamp(c);b=.5>c?c*(1+b):c+b-c*b;c=2*c-b;const e=(f,g,k)=>1>6*(k=mod(k,1))?f+6*(g-f)*k:1>2*k?g:2>3*k?f+(g-f)*(4-6*k):f;this.r=e(c,b,a+1/3);this.g=e(c,b,a);this.b=e(c,b,a-1/3);this.a=d;ASSERT(this.isValid());return this}HSLA(){const a=clamp(this.r),b=clamp(this.g),c=clamp(this.b),d=clamp(this.a),e=Math.max(a,b,c),f=Math.min(a,b,c),g=(e+f)/2;let k=0,h=0;if(e!=f){let m=e-f;h=.5<g?m/(2-e-f):m/(e+f);a==e?k=(b-c)/m+(b<c?6:0):b==e?k=(c-a)/m+2:c==e&&(k=(a-b)/m+4)}return[k/6,h,g,d]}mutate(a=.05,b=0){return new Color(this.r+rand(a,-a),this.g+rand(a,-a),this.b+rand(a,-a),this.a+rand(b,-b)).clamp()}toString(a=!0){const b=c=>(16>(c=255*clamp(c)|0)?\"0\":\"\")+c.toString(16);return\"#\"+b(this.r)+b(this.g)+b(this.b)+(a?b(this.a):\"\")}setHex(a){ASSERT(\"string\"==typeof a&&\"#\"==a[0]);ASSERT([4,5,7,9].includes(a.length),\"Invalid hex\");6>a.length?(this.r=clamp(parseInt(a[1],16)/15),this.g=clamp(parseInt(a[2],16)/15),this.b=clamp(parseInt(a[3],16)/15),this.a=5==a.length?clamp(parseInt(a[4],16)/15):1):(this.r=clamp(parseInt(a.slice(1,3),16)/255),this.g=clamp(parseInt(a.slice(3,5),16)/255),this.b=clamp(parseInt(a.slice(5,7),16)/255),this.a=9==a.length?clamp(parseInt(a.slice(7,9),16)/255):1);ASSERT(this.isValid());return this}rgbaInt(){const a=255*clamp(this.r)|0,b=255*clamp(this.g)<<8,c=255*clamp(this.b)<<16,d=255*clamp(this.a)<<24;return a+b+c+d}isValid(){return\"number\"==typeof this.r&&!isNaN(this.r)&&\"number\"==typeof this.g&&!isNaN(this.g)&&\"number\"==typeof this.b&&!isNaN(this.b)&&\"number\"==typeof this.a&&!isNaN(this.a)}}const WHITE=rgb(),BLACK=rgb(0,0,0),GRAY=rgb(.5,.5,.5),RED=rgb(1,0,0),ORANGE=rgb(1,.5,0),YELLOW=rgb(1,1,0),GREEN=rgb(0,1,0),CYAN=rgb(0,1,1),BLUE=rgb(0,0,1),PURPLE=rgb(.5,0,1),MAGENTA=rgb(1,0,1);class Timer{constructor(a){this.time=void 0==a?void 0:time+a;this.setTime=a}set(a=0){this.time=time+a;this.setTime=a}unset(){this.time=void 0}isSet(){return void 0!=this.time}active(){return time<this.time}elapsed(){return time>=this.time}get(){return this.isSet()?time-this.time:0}getPercent(){return this.isSet()?percent(this.time-time,this.setTime,0):0}toString(){if(debug)return this.isSet()?Math.abs(this.get())+\" seconds \"+(0>this.get()?\"before\":\"after\"):\"unset\"}valueOf(){return this.get()}}let cameraPos=vec2(),cameraScale=32,canvasMaxSize=vec2(1920,1080),canvasFixedSize=vec2(),canvasPixelated=!0,fontDefault=\"arial\",showSplashScreen=!1,headlessMode=!1,glEnable=!0,glOverlay=!0,tileSizeDefault=vec2(16),tileFixBleedScale=0,enablePhysicsSolver=!0,objectDefaultMass=1,objectDefaultDamping=1,objectDefaultAngleDamping=1,objectDefaultElasticity=0,objectDefaultFriction=.8,objectMaxSpeed=1,gravity=0,particleEmitRateScale=1,gamepadsEnable=!0,gamepadDirectionEmulateStick=!0,inputWASDEmulateDirection=!0,touchInputEnable=!0,touchGamepadEnable=!1,touchGamepadAnalog=!0,touchGamepadSize=99,touchGamepadAlpha=.3,vibrateEnable=!0,soundEnable=!0,soundVolume=.3,soundDefaultRange=40,soundDefaultTaper=.7,medalDisplayTime=5,medalDisplaySlideTime=.5,medalDisplaySize=vec2(640,80),medalDisplayIconSize=50,medalsPreventUnlock=!1;function setCameraPos(a){cameraPos=a}function setCameraScale(a){cameraScale=a}function setCanvasMaxSize(a){canvasMaxSize=a}function setCanvasFixedSize(a){canvasFixedSize=a}function setCanvasPixelated(a){canvasPixelated=a}function setFontDefault(a){fontDefault=a}function setShowSplashScreen(a){showSplashScreen=a}function setHeadlessMode(a){headlessMode=a}function setGlEnable(a){glEnable=a}function setGlOverlay(a){glOverlay=a}function setTileSizeDefault(a){tileSizeDefault=a}function setTileFixBleedScale(a){tileFixBleedScale=a}function setEnablePhysicsSolver(a){enablePhysicsSolver=a}function setObjectDefaultMass(a){objectDefaultMass=a}function setObjectDefaultDamping(a){objectDefaultDamping=a}function setObjectDefaultAngleDamping(a){objectDefaultAngleDamping=a}function setObjectDefaultElasticity(a){objectDefaultElasticity=a}function setObjectDefaultFriction(a){objectDefaultFriction=a}function setObjectMaxSpeed(a){objectMaxSpeed=a}function setGravity(a){gravity=a}function setParticleEmitRateScale(a){particleEmitRateScale=a}function setGamepadsEnable(a){gamepadsEnable=a}function setGamepadDirectionEmulateStick(a){gamepadDirectionEmulateStick=a}function setInputWASDEmulateDirection(a){inputWASDEmulateDirection=a}function setTouchInputEnable(a){touchInputEnable=a}function setTouchGamepadEnable(a){touchGamepadEnable=a}function setTouchGamepadAnalog(a){touchGamepadAnalog=a}function setTouchGamepadSize(a){touchGamepadSize=a}function setTouchGamepadAlpha(a){touchGamepadAlpha=a}function setVibrateEnable(a){vibrateEnable=a}function setSoundEnable(a){soundEnable=a}function setSoundVolume(a){soundVolume=a;soundEnable&&!headlessMode&&audioGainNode&&(audioGainNode.gain.value=a)}function setSoundDefaultRange(a){soundDefaultRange=a}function setSoundDefaultTaper(a){soundDefaultTaper=a}function setMedalDisplayTime(a){medalDisplayTime=a}function setMedalDisplaySlideTime(a){medalDisplaySlideTime=a}function setMedalDisplaySize(a){medalDisplaySize=a}function setMedalDisplayIconSize(a){medalDisplayIconSize=a}function setMedalsPreventUnlock(a){medalsPreventUnlock=a}function setShowWatermark(a){showWatermark=a}function setDebugKey(a){debugKey=a}class EngineObject{constructor(a=vec2(),b=vec2(1),c,d=0,e=new Color,f=0){ASSERT(isVector2(a)&&isVector2(b),\"ensure pos and size are vec2s\");ASSERT(\"number\"!==typeof c||!c,\"old style tile setup\");this.pos=a.copy();this.size=b;this.drawSize=void 0;this.tileInfo=c;this.angle=d;this.color=e;this.additiveColor=void 0;this.mirror=!1;this.mass=objectDefaultMass;this.damping=objectDefaultDamping;this.angleDamping=objectDefaultAngleDamping;this.elasticity=objectDefaultElasticity;this.friction=objectDefaultFriction;this.gravityScale=1;this.renderOrder=f;this.velocity=vec2();this.angleVelocity=0;this.spawnTime=time;this.children=[];this.clampSpeedLinear=!0;this.parent=void 0;this.localPos=vec2();this.localAngle=0;this.collideRaycast=this.isSolid=this.collideSolidObjects=this.collideTiles=!1;engineObjects.push(this)}updateTransforms(){const a=this.parent;if(a){const b=a.getMirrorSign();this.pos=this.localPos.multiply(vec2(b,1)).rotate(-a.angle).add(a.pos);this.angle=b*this.localAngle+a.angle}for(const b of this.children)b.updateTransforms()}update(){if(!this.parent){if(this.clampSpeedLinear)this.velocity.x=clamp(this.velocity.x,-objectMaxSpeed,objectMaxSpeed),this.velocity.y=clamp(this.velocity.y,-objectMaxSpeed,objectMaxSpeed);else{var a=this.velocity.lengthSquared();a>objectMaxSpeed*objectMaxSpeed&&(a=objectMaxSpeed/a**.5,this.velocity.x*=a,this.velocity.y*=a)}a=this.pos.copy();this.velocity.x*=this.damping;this.velocity.y*=this.damping;this.mass&&(this.velocity.y+=gravity*this.gravityScale);this.pos.x+=this.velocity.x;this.pos.y+=this.velocity.y;this.angle+=this.angleVelocity*=this.angleDamping;ASSERT(0<=this.angleDamping&&1>=this.angleDamping);ASSERT(0<=this.damping&&1>=this.damping);if(enablePhysicsSolver&&this.mass){var b=0>this.velocity.y;if(this.groundObject){var c=this.groundObject.velocity?this.groundObject.velocity.x:0;this.velocity.x=c+(this.velocity.x-c)*this.friction;this.groundObject=0}if(this.collideSolidObjects)for(var d of engineObjectsCollide){if(!this.isSolid&&!d.isSolid||d.destroyed||d.parent||d==this)continue;if(!isOverlapping(this.pos,this.size,d.pos,d.size))continue;c=this.collideWithObject(d);var e=d.collideWithObject(this);if(!c||!e)continue;if(isOverlapping(a,this.size,d.pos,d.size)){c=a.subtract(d.pos);e=c.length();c=.01>e?randVector(.001):c.scale(.001/e);this.velocity=this.velocity.add(c);d.mass&&(d.velocity=d.velocity.subtract(c));debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f00\");continue}e=this.size.add(d.size);var f=2*(a.y-d.pos.y)>e.y+gravity;const k=2*abs(a.y-d.pos.y)<e.y;var g=2*abs(a.x-d.pos.x)<e.x;c=max(this.elasticity,d.elasticity);if(f||g||!k)if(this.pos.y=d.pos.y+(e.y/2+.001)*sign(a.y-d.pos.y),d.groundObject&&b||!d.mass)b&&(this.groundObject=d),this.velocity.y*=-c;else if(d.mass){g=(this.mass*this.velocity.y+d.mass*d.velocity.y)/(this.mass+d.mass);const h=d.velocity.y*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.y*this.mass/(this.mass+d.mass);this.velocity.y=lerp(c,g,this.velocity.y*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.y*d.mass/(this.mass+d.mass));d.velocity.y=lerp(c,g,h)}!f&&k&&(this.pos.x=d.pos.x+(e.x/2+.001)*sign(a.x-d.pos.x),d.mass?(e=(this.mass*this.velocity.x+d.mass*d.velocity.x)/(this.mass+d.mass),f=d.velocity.x*(d.mass-this.mass)/(this.mass+d.mass)+2*this.velocity.x*this.mass/(this.mass+d.mass),this.velocity.x=lerp(c,e,this.velocity.x*(this.mass-d.mass)/(this.mass+d.mass)+2*d.velocity.x*d.mass/(this.mass+d.mass)),d.velocity.x=lerp(c,e,f)):this.velocity.x*=-c);debugOverlay&&debugPhysics&&debugOverlap(this.pos,this.size,d.pos,d.size,\"#f0f\")}if(this.collideTiles&&tileCollisionTest(this.pos,this.size,this)&&!tileCollisionTest(a,this.size,this)){d=tileCollisionTest(vec2(a.x,this.pos.y),this.size,this);c=tileCollisionTest(vec2(this.pos.x,a.y),this.size,this);if(d||!c)this.velocity.y*=-this.elasticity,(this.groundObject=b)?this.pos.y=(a.y-this.size.y/2|0)+this.size.y/2+1e-4:this.pos.y=a.y;c&&(this.pos.x=a.x,this.velocity.x*=-this.elasticity);debugOverlay&&debugPhysics&&debugRect(this.pos,this.size,\"#f00\")}}}}render(){drawTile(this.pos,this.drawSize||this.size,this.tileInfo,this.color,this.angle,this.mirror,this.additiveColor)}destroy(){if(!this.destroyed){this.destroyed=1;this.parent&&this.parent.removeChild(this);for(const a of this.children)a.destroy(a.parent=0)}}localToWorld(a){return this.pos.add(a.rotate(-this.angle))}worldToLocal(a){return a.subtract(this.pos).rotate(this.angle)}localToWorldVector(a){return a.rotate(this.angle)}worldToLocalVector(a){return a.rotate(-this.angle)}collideWithTile(a,b){return 0<a}collideWithObject(a){return!0}getAliveTime(){return time-this.spawnTime}applyAcceleration(a){this.mass&&(this.velocity=this.velocity.add(a))}applyForce(a){this.applyAcceleration(a.scale(1/this.mass))}getMirrorSign(){return this.mirror?-1:1}addChild(a,b=vec2(),c=0){ASSERT(!a.parent&&!this.children.includes(a));this.children.push(a);a.parent=this;a.localPos=b.copy();a.localAngle=c}removeChild(a){ASSERT(a.parent==this&&this.children.includes(a));this.children.splice(this.children.indexOf(a),1);a.parent=0}setCollision(a=!0,b=!0,c=!0,d=!0){ASSERT(a||!b,\"solid objects must be set to collide\");this.collideSolidObjects=a;this.isSolid=b;this.collideTiles=c;this.collideRaycast=d}toString(){if(debug){let a=\"type = \"+this.constructor.name;if(this.pos.x||this.pos.y)a+=\"\\npos = \"+this.pos;if(this.velocity.x||this.velocity.y)a+=\"\\nvelocity = \"+this.velocity;if(this.size.x||this.size.y)a+=\"\\nsize = \"+this.size;this.angle&&(a+=\"\\nangle = \"+this.angle.toFixed(3));this.color&&(a+=\"\\ncolor = \"+this.color);return a}}renderDebugInfo(){if(debug){const a=vec2(max(this.size.x,.2),max(this.size.y,.2)),b=rgb(this.collideTiles?1:0,this.collideSolidObjects?1:0,this.isSolid?1:0,this.parent?.2:.5),c=this.parent?rgb(1,1,1,.5):rgb(0,0,0,.8);drawRect(this.pos,a,b,this.angle,!1);drawRect(this.pos,a.scale(.8),c,this.angle,!1);this.parent&&drawLine(this.pos,this.parent.pos,.1,rgb(0,0,1,.5),!1)}}}let mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize=vec2(),textureInfos=[],drawCount;function tile(a=vec2(),b=tileSizeDefault,c=0,d=0){if(headlessMode)return new TileInfo;\"number\"===typeof b&&(ASSERT(0<b),b=vec2(b));var e=textureInfos[c];ASSERT(e,\"Texture not loaded\");const f=b.add(vec2(2*d));e=e.size.x/f.x|0;\"number\"===typeof a&&(a=vec2(a%e,a/e|0));a=vec2(a.x*f.x+d,a.y*f.y+d);return new TileInfo(a,b,c,d)}class TileInfo{constructor(a=vec2(),b=tileSizeDefault,c=0,d=0){this.pos=a.copy();this.size=b.copy();this.textureIndex=c;this.padding=d}offset(a){return new TileInfo(this.pos.add(a),this.size,this.textureIndex)}frame(a){ASSERT(\"number\"==typeof a);return this.offset(vec2(a*(this.size.x+2*this.padding),0))}getTextureInfo(){return textureInfos[this.textureIndex]}}class TextureInfo{constructor(a){this.image=a;this.size=vec2(a.width,a.height);this.glTexture=glEnable&&glCreateTexture(a)}}function screenToWorld(a){return new Vector2((a.x-mainCanvasSize.x/2+.5)/cameraScale+cameraPos.x,(a.y-mainCanvasSize.y/2+.5)/-cameraScale+cameraPos.y)}function worldToScreen(a){return new Vector2((a.x-cameraPos.x)*cameraScale+mainCanvasSize.x/2-.5,(a.y-cameraPos.y)*-cameraScale+mainCanvasSize.y/2-.5)}function getCameraSize(){return mainCanvasSize.scale(1/cameraScale)}function drawTile(a,b=vec2(1),c,d=new Color,e=0,f,g=new Color(0,0,0,0),k=glEnable,h,m){ASSERT(!m||!k,\"context only supported in canvas 2D mode\");ASSERT(\"number\"!==typeof c||!c,\"this is an old style calls, to fix replace it with tile(tileIndex, tileSize)\");const n=c&&c.getTextureInfo();if(k)if(h&&(a=screenToWorld(a),b=b.scale(1/cameraScale)),n){var l=vec2(1).divide(n.size);k=c.pos.x*l.x;h=c.pos.y*l.y;m=c.size.x*l.x;const p=c.size.y*l.y;l=l.scale(tileFixBleedScale);glSetTexture(n.glTexture);glDraw(a.x,a.y,f?-b.x:b.x,b.y,e,k+l.x,h+l.y,k-l.x+m,h-l.y+p,d.rgbaInt(),g.rgbaInt())}else glDraw(a.x,a.y,b.x,b.y,e,0,0,0,0,0,d.rgbaInt());else showWatermark&&++drawCount,b=vec2(b.x,-b.y),drawCanvas2D(a,b,e,f,p=>{if(n){const q=c.pos.x+tileFixBleedScale,r=c.pos.y+tileFixBleedScale,x=c.size.x-2*tileFixBleedScale,v=c.size.y-2*tileFixBleedScale;p.globalAlpha=d.a;p.drawImage(n.image,q,r,x,v,-.5,-.5,1,1);p.globalAlpha=1}else p.fillStyle=d,p.fillRect(-.5,-.5,1,1)},h,m)}function drawRect(a,b,c,d,e,f,g){drawTile(a,b,void 0,c,d,!1,void 0,e,f,g)}function drawLine(a,b,c=.1,d,e,f,g){b=vec2((b.x-a.x)/2,(b.y-a.y)/2);c=vec2(c,2*b.length());drawRect(a.add(b),c,d,b.angle(),e,f,g)}function drawPoly(a,b=new Color,c=0,d=new Color(0,0,0),e,f=mainContext){f.fillStyle=b.toString();f.beginPath();for(const g of e?a:a.map(worldToScreen))f.lineTo(g.x,g.y);f.closePath();f.fill();c&&(f.strokeStyle=d.toString(),f.lineWidth=e?c:c*cameraScale,f.stroke())}function drawEllipse(a,b=1,c=1,d=0,e=new Color,f=0,g=new Color(0,0,0),k,h=mainContext){k||(a=worldToScreen(a),b*=cameraScale,c*=cameraScale,f*=cameraScale);h.fillStyle=e.toString();h.beginPath();h.ellipse(a.x,a.y,b,c,d,0,9);h.fill();f&&(h.strokeStyle=g.toString(),h.lineWidth=f,h.stroke())}function drawCircle(a,b=1,c=new Color,d=0,e=new Color(0,0,0),f,g=mainContext){drawEllipse(a,b,b,0,c,d,e,f,g)}function drawCanvas2D(a,b,c,d,e,f,g=mainContext){f||(a=worldToScreen(a),b=b.scale(cameraScale));g.save();g.translate(a.x+.5,a.y+.5);g.rotate(c);g.scale(d?-b.x:b.x,-b.y);e(g);g.restore()}function setBlendMode(a,b=glEnable,c){ASSERT(!c||!b,\"context only supported in canvas 2D mode\");b?glAdditive=a:(c||=mainContext,c.globalCompositeOperation=a?\"lighter\":\"source-over\")}function drawText(a,b,c=1,d,e=0,f,g,k,h,m){drawTextScreen(a,worldToScreen(b),c*cameraScale,d,e*cameraScale,f,g,k,h,m)}function drawTextScreen(a,b,c=1,d=new Color,e=0,f=new Color(0,0,0),g=\"center\",k=fontDefault,h=overlayContext,m){h.fillStyle=d.toString();h.lineWidth=e;h.strokeStyle=f.toString();h.textAlign=g;h.font=c+\"px \"+k;h.textBaseline=\"middle\";h.lineJoin=\"round\";b=b.copy();(a+\"\").split(\"\\n\").forEach(n=>{e&&h.strokeText(n,b.x,b.y,m);h.fillText(n,b.x,b.y,m);b.y+=c})}let engineFontImage;class FontImage{constructor(a,b=vec2(8),c=vec2(0,1),d=overlayContext){engineFontImage||((engineFontImage=new Image).src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAYAQAAAAA9+x6JAAAAAnRSTlMAAHaTzTgAAAGiSURBVHjaZZABhxxBEIUf6ECLBdFY+Q0PMNgf0yCgsSAGZcT9sgIPtBWwIA5wgAPEoHUyJeeSlW+gjK+fegWwtROWpVQEyWh2npdpBmTUFVhb29RINgLIukoXr5LIAvYQ5ve+1FqWEMqNKTX3FAJHyQDRZvmKWubAACcv5z5Gtg2oyCWE+Yk/8JZQX1jTTCpKAFGIgza+dJCNBF2UskRlsgwitHbSV0QLgt9sTPtsRlvJjEr8C/FARWA2bJ/TtJ7lko34dNDn6usJUMzuErP89UUBJbWeozrwLLncXczd508deAjLWipLO4Q5XGPcJvPu92cNDaN0P5G1FL0nSOzddZOrJ6rNhbXGmeDvO3TF7DeJWl4bvaYQTNHCTeuqKZmbjHaSOFes+IX/+IhHrnAkXOAsfn24EM68XieIECoccD4KZLk/odiwzeo2rovYdhvb2HYFgyznJyDpYJdYOmfXgVdJTaUi4xA2uWYNYec9BLeqdl9EsoTw582mSFDX2DxVLbNt9U3YYoeatBad1c2Tj8t2akrjaIGJNywKB/7h75/gN3vCMSaadIUTAAAAAElFTkSuQmCC\");this.image=a||engineFontImage;this.tileSize=b;this.paddingSize=c;this.context=d}drawText(a,b,c=1,d){this.drawTextScreen(a,worldToScreen(b).floor(),c*cameraScale|0,d)}drawTextScreen(a,b,c=4,d){const e=this.context;e.save();e.imageSmoothingEnabled=!canvasPixelated;const f=this.tileSize,g=f.add(this.paddingSize).scale(c),k=this.image.width/this.tileSize.x|0;(a+\"\").split(\"\\n\").forEach((h,m)=>{const n=d?h.length*f.x*c/2|0:0;for(let q=h.length;q--;){var l=h[q].charCodeAt(0);if(32>l||127<l)l=127;var p=l-32;l=p%k;p=p/k|0;const r=b.add(vec2(q,m).multiply(g));e.drawImage(this.image,l*f.x,p*f.y,f.x,f.y,r.x-n,r.y,f.x*c,f.y*c)}});e.restore()}}function isFullscreen(){return!!document.fullscreenElement}function toggleFullscreen(){const a=mainCanvas.parentElement;isFullscreen()?document.exitFullscreen&&document.exitFullscreen():a.requestFullscreen&&a.requestFullscreen()}function keyIsDown(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&1)}function keyWasPressed(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&2)}function keyWasReleased(a,b=0){ASSERT(0<b||\"number\"!==typeof a||3>a,\"use code string for keyboard\");return inputData[b]&&!!(inputData[b][a]&4)}function clearInput(){inputData=[[]];touchGamepadButtons=[]}const mouseIsDown=keyIsDown,mouseWasPressed=keyWasPressed,mouseWasReleased=keyWasReleased;let mousePos=vec2(),mousePosScreen=vec2(),mouseWheel=0,isUsingGamepad=!1,preventDefaultInput=!1;function gamepadIsDown(a,b=0){return keyIsDown(a,b+1)}function gamepadWasPressed(a,b=0){return keyWasPressed(a,b+1)}function gamepadWasReleased(a,b=0){return keyWasReleased(a,b+1)}function gamepadStick(a,b=0){return gamepadStickData[b]?gamepadStickData[b][a]||vec2():vec2()}let inputData=[[]];function inputUpdate(){headlessMode||(touchInputEnable&&isTouchDevice||document.hasFocus()||clearInput(),mousePos=screenToWorld(mousePosScreen),gamepadsUpdate())}function inputUpdatePost(){if(!headlessMode){for(const a of inputData)for(const b in a)a[b]&=1;mouseWheel=0}}function inputInit(){function a(b){return inputWASDEmulateDirection?\"KeyW\"==b?\"ArrowUp\":\"KeyS\"==b?\"ArrowDown\":\"KeyA\"==b?\"ArrowLeft\":\"KeyD\"==b?\"ArrowRight\":b:b}headlessMode||(onkeydown=b=>{b.repeat||(isUsingGamepad=!1,inputData[0][b.code]=3,inputWASDEmulateDirection&&(inputData[0][a(b.code)]=3));preventDefaultInput&&b.preventDefault()},onkeyup=b=>{inputData[0][b.code]=4;inputWASDEmulateDirection&&(inputData[0][a(b.code)]=4)},onmousedown=b=>{soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();isUsingGamepad=!1;inputData[0][b.button]=3;mousePosScreen=mouseToScreen(b);b.button&&b.preventDefault()},onmouseup=b=>inputData[0][b.button]=inputData[0][b.button]&2|4,onmousemove=b=>mousePosScreen=mouseToScreen(b),onwheel=b=>mouseWheel=b.ctrlKey?0:sign(b.deltaY),oncontextmenu=b=>!1,onblur=b=>clearInput(),isTouchDevice&&touchInputEnable&&touchInputInit())}function mouseToScreen(a){if(!mainCanvas||headlessMode)return vec2();const b=mainCanvas.getBoundingClientRect();return vec2(mainCanvas.width,mainCanvas.height).multiply(vec2(percent(a.x,b.left,b.right),percent(a.y,b.top,b.bottom)))}const gamepadStickData=[];function gamepadsUpdate(){const a=g=>{const k=h=>.3<h?percent(h,.3,.8):-.3>h?-percent(-h,.3,.8):0;return vec2(k(g.x),k(-g.y)).clampLength()};if(touchGamepadEnable&&isTouchDevice&&(ASSERT(touchGamepadButtons,\"set touchGamepadEnable before calling init!\"),touchGamepadTimer.isSet())){var b=gamepadStickData[0]||(gamepadStickData[0]=[]);b[0]=vec2();touchGamepadAnalog?b[0]=a(touchGamepadStick):.3<touchGamepadStick.lengthSquared()&&(b[0].x=Math.round(touchGamepadStick.x),b[0].y=-Math.round(touchGamepadStick.y),b[0]=b[0].clampLength());b=inputData[1]||(inputData[1]=[]);for(var c=10;c--;){var d=3==c?2:2==c?3:c,e=gamepadIsDown(d,0);b[d]=touchGamepadButtons[c]?e?1:3:e?4:0}}if(gamepadsEnable&&navigator&&navigator.getGamepads&&(debug||document.hasFocus()))for(b=navigator.getGamepads(),c=b.length;c--;){e=b[c];const g=inputData[c+1]||(inputData[c+1]=[]);d=gamepadStickData[c]||(gamepadStickData[c]=[]);if(e){for(var f=0;f<e.axes.length-1;f+=2)d[f>>1]=a(vec2(e.axes[f],e.axes[f+1]));for(f=e.buttons.length;f--;){const k=e.buttons[f],h=gamepadIsDown(f,c);g[f]=k.pressed?h?1:3:h?4:0;isUsingGamepad||=!c&&k.pressed}gamepadDirectionEmulateStick&&(e=vec2((gamepadIsDown(15,c)&&1)-(gamepadIsDown(14,c)&&1),(gamepadIsDown(12,c)&&1)-(gamepadIsDown(13,c)&&1)),e.lengthSquared()&&(d[0]=e.clampLength()));touchGamepadEnable&&isUsingGamepad&&touchGamepadTimer.unset()}}}function vibrate(a=100){vibrateEnable&&!headlessMode&&navigator&&navigator.vibrate&&navigator.vibrate(a)}function vibrateStop(){vibrate(0)}const isTouchDevice=void 0!==window.ontouchstart;let touchGamepadTimer=new Timer,touchGamepadButtons,touchGamepadStick;function touchInputInit(){function a(e){soundEnable&&!headlessMode&&audioContext&&\"running\"!=audioContext.state&&audioContext.resume();const f=e.touches.length;if(f){const g=vec2(e.touches[0].clientX,e.touches[0].clientY);mousePosScreen=mouseToScreen(g);d?isUsingGamepad=touchGamepadEnable:inputData[0][0]=3}else d&&(inputData[0][0]=inputData[0][0]&2|4);d=f;document.hasFocus()&&e.preventDefault();return!0}function b(e){touchGamepadStick=vec2();touchGamepadButtons=[];isUsingGamepad=!0;if(e.touches.length&&(touchGamepadTimer.set(),paused&&!d)){touchGamepadButtons[9]=1;a(e);return}const f=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize),g=mainCanvasSize.subtract(vec2(touchGamepadSize,touchGamepadSize)),k=mainCanvasSize.scale(.5);for(const m of e.touches){var h=mouseToScreen(vec2(m.clientX,m.clientY));h.distance(f)<touchGamepadSize?touchGamepadStick=h.subtract(f).scale(2/touchGamepadSize).clampLength():h.distance(g)<touchGamepadSize?(h=h.subtract(g).direction(),touchGamepadButtons[h]=1):h.distance(k)<touchGamepadSize&&!d&&(touchGamepadButtons[9]=1)}a(e);return!0}let c=a;touchGamepadEnable&&(c=b,touchGamepadButtons=[],touchGamepadStick=vec2());document.addEventListener(\"touchstart\",e=>c(e),{passive:!1});document.addEventListener(\"touchmove\",e=>c(e),{passive:!1});document.addEventListener(\"touchend\",e=>c(e),{passive:!1});onmousedown=onmouseup=()=>0;let d}function touchGamepadRender(){if(touchInputEnable&&isTouchDevice&&!headlessMode&&touchGamepadEnable&&touchGamepadTimer.isSet()){var a=percent(touchGamepadTimer.get(),4,3);if(a&&!paused){var b=overlayContext;b.save();b.globalAlpha=a*touchGamepadAlpha;b.strokeStyle=\"#fff\";b.lineWidth=3;b.fillStyle=0<touchGamepadStick.lengthSquared()?\"#fff\":\"#000\";b.beginPath();a=vec2(touchGamepadSize,mainCanvasSize.y-touchGamepadSize);if(touchGamepadAnalog)b.arc(a.x,a.y,touchGamepadSize/2,0,9),b.fill();else for(var c=10;c--;){var d=c*PI/4;b.arc(a.x,a.y,.6*touchGamepadSize,d+PI/8,d+PI/8);c%2&&b.arc(a.x,a.y,.33*touchGamepadSize,d,d);1==c&&b.fill()}b.stroke();a=vec2(mainCanvasSize.x-touchGamepadSize,mainCanvasSize.y-touchGamepadSize);for(c=4;c--;)d=a.add(vec2().setDirection(c,touchGamepadSize/2)),b.fillStyle=touchGamepadButtons[c]?\"#fff\":\"#000\",b.beginPath(),b.arc(d.x,d.y,touchGamepadSize/4,0,9),b.fill(),b.stroke();b.restore()}}}let audioContext=new AudioContext,audioGainNode;function audioInit(){soundEnable&&!headlessMode&&(audioGainNode=audioContext.createGain(),audioGainNode.connect(audioContext.destination),audioGainNode.gain.value=soundVolume)}class Sound{constructor(a,b=soundDefaultRange,c=soundDefaultTaper){soundEnable&&!headlessMode&&(this.range=b,this.taper=c,this.randomness=0,this.gainNode=audioContext.createGain(),a&&(this.randomness=void 0!=a[1]?a[1]:.05,a[1]=0,this.sampleChannels=[zzfxG(...a)],this.sampleRate=zzfxR))}play(a,b=1,c=1,d=1,e=!1){if(soundEnable&&!headlessMode&&this.sampleChannels){var f;if(a){if(f=this.range){const g=cameraPos.distanceSquared(a);if(g>f*f)return;b*=percent(g**.5,f,f*this.taper)}f=2*worldToScreen(a).x/mainCanvas.width-1}a=c+c*this.randomness*d*rand(-1,1);return this.source=playSamples(this.sampleChannels,b,a,f,e,this.sampleRate,this.gainNode)}}setVolume(a=1){this.gainNode.gain.value=a}stop(){this.source&&this.source.stop();this.source=void 0}getSource(){return this.source}playNote(a,b,c){return this.play(b,c,2**(a/12),0)}getDuration(){return this.sampleChannels&&this.sampleChannels[0].length/this.sampleRate}isLoading(){return!this.sampleChannels}}class SoundWave extends Sound{constructor(a,b=0,c,d,e){super(void 0,c,d);soundEnable&&!headlessMode&&(this.randomness=b,fetch(a).then(f=>f.arrayBuffer()).then(f=>audioContext.decodeAudioData(f)).then(f=>{this.sampleChannels=[];for(let g=f.numberOfChannels;g--;)this.sampleChannels[g]=Array.from(f.getChannelData(g));this.sampleRate=f.sampleRate}).then(()=>e&&e(this)))}}function playAudioFile(a,b=1,c=!1){if(soundEnable&&!headlessMode)return new SoundWave(a,0,0,0,d=>d.play(void 0,b,1,1,c))}class Music extends Sound{constructor(a){super(void 0);soundEnable&&!headlessMode&&(this.randomness=0,this.sampleChannels=zzfxM(...a),this.sampleRate=zzfxR)}playMusic(a,b=!1){return super.play(void 0,a,1,1,b)}}function speak(a,b=\"\",c=1,d=1,e=1){if(soundEnable&&!headlessMode&&speechSynthesis)return a=new SpeechSynthesisUtterance(a),a.lang=b,a.volume=2*c*soundVolume,a.rate=d,a.pitch=e,speechSynthesis.speak(a),a}function speakStop(){speechSynthesis&&speechSynthesis.cancel()}function getNoteFrequency(a,b=220){return b*2**(a/12)}function playSamples(a,b=1,c=1,d=0,e=!1,f=zzfxR,g){if(soundEnable&&!headlessMode){var k=audioContext.createBuffer(a.length,a[0].length,f),h=audioContext.createBufferSource();a.forEach((m,n)=>k.getChannelData(n).set(m));h.buffer=k;h.playbackRate.value=c;h.loop=e;g=g||audioContext.createGain();g.gain.value=b;g.connect(audioGainNode);a=new StereoPannerNode(audioContext,{pan:clamp(d,-1,1)});h.connect(a).connect(g);\"running\"!=audioContext.state?audioContext.resume().then(()=>h.start()):h.start();return h}}function zzfx(...a){return playSamples([zzfxG(...a)])}const zzfxR=44100;function zzfxG(a=1,b=.05,c=220,d=0,e=0,f=.1,g=0,k=1,h=0,m=0,n=0,l=0,p=0,q=0,r=0,x=0,v=0,D=1,z=0,E=0,A=0){let w=2*PI;var t=zzfxR;let F=h*=500*w/t/t;b=c*=rand(1+b,1-b)*w/t;let C=[],y=0,G=0,u=0,H=1,R=0,S=0,B=0,J;var L=w*abs(A)*2/t,K=Math.cos(L),M=Math.sin(L)/2/2,I=1+M;L=-2*K/I;M=(1-M)/I;let N=(1+sign(A)*K)/2/I;K=-(sign(A)+K)/I;let O=I=0,P=0,Q=0;d=d*t+9;z*=t;e*=t;f*=t;v*=t;m*=500*w/t**3;r*=w/t;n*=w/t;l*=t;p=p*t|0;for(J=d+z+e+f+v|0;u<J;C[u++]=B*a)++S%(100*x|0)||(B=g?1<g?2<g?3<g?Math.sin(y**3):clamp(Math.tan(y),1,-1):1-(2*y/w%2+2)%2:1-4*abs(Math.round(y/w)-y/w):Math.sin(y),B=(p?1-E+E*Math.sin(w*u/p):1)*sign(B)*abs(B)**k*(u<d?u/d:u<d+z?1-(u-d)/z*(1-D):u<d+z+e?D:u<J-v?(J-u-v)/f*D:0),B=v?B/2+(v>u?0:(u<J-v?1:(J-u)/v)*C[u-v|0]/2/a):B,A&&(B=Q=N*I+K*(I=O)+N*(O=B)-M*P-L*(P=Q))),t=(c+=h+=m)*Math.cos(r*G++),y+=t+t*q*Math.sin(u**5),H&&++H>l&&(c+=n,b+=n,H=0),!p||++R%p||(c=b,h=F,H=H||1);return C}function zzfxM(a,b,c,d=125){let e,f,g,k,h,m,n,l,p,q,r,x,v,D=0,z,E=[],A=[],w=[],t=0,F=0,C=1,y={},G=zzfxR/d*60>>2;for(;C;t++)E=[C=l=x=0],c.forEach((u,H)=>{n=b[u][t]||[0,0,0];C|=b[u][t]&&1;z=x+(b[u][0].length-2-(l?0:1))*G;v=H==c.length-1;e=2;for(g=x;e<n.length+v;l=++e){h=n[e];p=e==n.length+v-1&&v||q!=(n[0]||0)||h|0;for(f=0;f<G&&l;f++>G-99&&p&&1>r?r+=1/99:0)m=(1-r)*E[D++]/2||0,A[g]=(A[g]||0)-m*F+m,w[g]=(w[g++]||0)+m*F+m;h&&(r=h%1,F=n[1]||0,h|=0)&&(E=y[[q=n[D=0]||0,h]]=y[[q,h]]||(k=[...a[q]],k[2]*=2**((h-12)/12),0<h?zzfxG(...k):[]))}x=z});return[A,w]}let tileCollision=[],tileCollisionSize=vec2();function initTileCollision(a){tileCollisionSize=a;tileCollision=[];for(a=tileCollision.length=tileCollisionSize.area();a--;)tileCollision[a]=0}function setTileCollisionData(a,b=0){a.arrayCheck(tileCollisionSize)&&(tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]=b)}function getTileCollisionData(a){return a.arrayCheck(tileCollisionSize)?tileCollision[(a.y|0)*tileCollisionSize.x+a.x|0]:0}function tileCollisionTest(a,b=vec2(),c){const d=max(a.x-b.x/2|0,0);var e=max(a.y-b.y/2|0,0);const f=min(a.x+b.x/2,tileCollisionSize.x);for(a=min(a.y+b.y/2,tileCollisionSize.y);e<a;++e)for(b=d;b<f;++b){const g=tileCollision[e*tileCollisionSize.x+b];if(g&&(!c||c.collideWithTile(g,vec2(b,e))))return!0}return!1}function tileCollisionRaycast(a,b,c){const d=b.subtract(a),e=d.length();var f=d.normalize();f=vec2(abs(1/f.x),abs(1/f.y));let g=a.floor(),k=f.x*(0>d.x?a.x-g.x:g.x-a.x+1),h=f.y*(0>d.y?a.y-g.y:g.y-a.y+1);for(;;){const m=getTileCollisionData(g);if(m&&(!c||c.collideWithTile(m,g)))return debugRaycast&&debugLine(a,b,\"#f00\",.02),debugRaycast&&debugPoint(g.add(vec2(.5)),\"#ff0\"),g.add(vec2(.5));if(k>e&&h>e)break;k>h?(g.y+=sign(d.y),h+=f.y):(g.x+=sign(d.x),k+=f.x)}debugRaycast&&debugLine(a,b,\"#00f\",.02)}class TileLayerData{constructor(a,b=0,c=!1,d=new Color){this.tile=a;this.direction=b;this.mirror=c;this.color=d}clear(){this.tile=this.direction=0;this.mirror=!1;this.color=new Color}}class TileLayer extends EngineObject{constructor(a,b=tileCollisionSize,c=tile(),d=vec2(1),e=0){super(a,b,c,0,void 0,e);this.canvas=document.createElement(\"canvas\");this.context=this.canvas.getContext(\"2d\");this.scale=d;this.isOverlay=!1;this.data=[];for(a=this.size.area();a--;)this.data.push(new TileLayerData);headlessMode&&(this.redraw=()=>{},this.render=()=>{},this.redrawStart=()=>{},this.redrawEnd=()=>{},this.drawTileData=()=>{},this.drawCanvas2D=()=>{})}setData(a,b,c=!1){a.arrayCheck(this.size)&&(this.data[(a.y|0)*this.size.x+a.x|0]=b,c&&this.drawTileData(a))}getData(a){return a.arrayCheck(this.size)&&this.data[(a.y|0)*this.size.x+a.x|0]}update(){}render(){ASSERT(mainContext!=this.context,\"must call redrawEnd() after drawing tiles\");glOverlay||this.isOverlay||glCopyToContext(mainContext);const a=worldToScreen(this.pos.add(vec2(0,this.size.y*this.scale.y)));(this.isOverlay?overlayContext:mainContext).drawImage(this.canvas,a.x,a.y,cameraScale*this.size.x*this.scale.x,cameraScale*this.size.y*this.scale.y)}redraw(){this.redrawStart(!0);for(let a=this.size.x;a--;)for(let b=this.size.y;b--;)this.drawTileData(vec2(a,b),!1);this.redrawEnd()}redrawStart(a=!1){this.savedRenderSettings=[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale];mainCanvas=this.canvas;mainContext=this.context;mainCanvasSize=this.size.multiply(this.tileInfo.size);cameraPos=this.size.scale(.5);cameraScale=this.tileInfo.size.x;a&&(mainCanvas.width=mainCanvasSize.x,mainCanvas.height=mainCanvasSize.y);this.context.imageSmoothingEnabled=!canvasPixelated;glPreRender()}redrawEnd(){ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\");glCopyToContext(mainContext,!0);[mainCanvas,mainContext,mainCanvasSize,cameraPos,cameraScale]=this.savedRenderSettings}drawTileData(a,b=!0){var c=this.tileInfo.size;b&&(b=a.multiply(c),this.context.clearRect(b.x,this.canvas.height-b.y,c.x,-c.y));b=this.getData(a);void 0!=b.tile&&(ASSERT(mainContext==this.context,\"must call redrawStart() before drawing tiles\"),a=a.add(vec2(.5)),c=tile(b.tile,c,this.tileInfo.textureIndex),drawTile(a,vec2(1),c,b.color,b.direction*PI/2,b.mirror))}drawCanvas2D(a,b,c,d,e){const f=this.context;f.save();a=a.subtract(this.pos).multiply(this.tileInfo.size);b=b.multiply(this.tileInfo.size);f.translate(a.x,this.canvas.height-a.y);f.rotate(c);f.scale(d?-b.x:b.x,b.y);e(f);f.restore()}drawTile(a,b=vec2(1),c,d=new Color,e,f){this.drawCanvas2D(a,b,e,f,g=>{const k=c&&c.getTextureInfo();k?(g.globalAlpha=d.a,g.drawImage(k.image,c.pos.x,c.pos.y,c.size.x,c.size.y,-.5,-.5,1,1),g.globalAlpha=1):(g.fillStyle=d,g.fillRect(-.5,-.5,1,1))})}drawRect(a,b,c,d){this.drawTile(a,b,void 0,c,d)}}class ParticleEmitter extends EngineObject{constructor(a,b,c=0,d=0,e=100,f=PI,g,k=new Color,h=new Color,m=new Color(1,1,1,0),n=new Color(1,1,1,0),l=.5,p=.1,q=1,r=.1,x=.05,v=1,D=1,z=0,E=PI,A=.1,w=.2,t=!1,F=!1,C=!0,y=F?1e9:0,G=!1){super(a,vec2(),g,b,void 0,y);this.emitSize=c;this.emitTime=d;this.emitRate=e;this.emitConeAngle=f;this.colorStartA=k;this.colorStartB=h;this.colorEndA=m;this.colorEndB=n;this.randomColorLinear=C;this.particleTime=l;this.sizeStart=p;this.sizeEnd=q;this.speed=r;this.angleSpeed=x;this.damping=v;this.angleDamping=D;this.gravityScale=z;this.particleConeAngle=E;this.fadeRate=A;this.randomness=w;this.collideTiles=t;this.additive=F;this.localSpace=G;this.trailScale=0;this.particleCreateCallback=this.particleDestroyCallback=void 0;this.emitTimeBuffer=0}update(){this.parent&&super.update();if(!this.emitTime||this.getAliveTime()<=this.emitTime){if(this.emitRate*particleEmitRateScale){const a=1/this.emitRate/particleEmitRateScale;for(this.emitTimeBuffer+=timeDelta;0<this.emitTimeBuffer;this.emitTimeBuffer-=a)this.emitParticle()}}else this.destroy();debugParticles&&debugRect(this.pos,vec2(this.emitSize),\"#0f0\",0,this.angle)}emitParticle(){var a=\"number\"===typeof this.emitSize?randInCircle(this.emitSize/2):vec2(rand(-.5,.5),rand(-.5,.5)).multiply(this.emitSize).rotate(this.angle);let b=rand(this.particleConeAngle,-this.particleConeAngle);this.localSpace||(a=this.pos.add(a),b+=this.angle);const c=this.randomness;var d=l=>l+l*rand(c,-c);const e=d(this.particleTime),f=d(this.sizeStart),g=d(this.sizeEnd),k=d(this.speed);d=d(this.angleSpeed)*randSign();var h=rand(this.emitConeAngle,-this.emitConeAngle);const m=randColor(this.colorStartA,this.colorStartB,this.randomColorLinear),n=randColor(this.colorEndA,this.colorEndB,this.randomColorLinear);h=this.localSpace?h:this.angle+h;a=new Particle(a,this.tileInfo,b,m,n,e,f,g,this.fadeRate,this.additive,this.trailScale,this.localSpace&&this,this.particleDestroyCallback);a.velocity=vec2().setAngle(h,k);a.angleVelocity=d;a.fadeRate=this.fadeRate;a.damping=this.damping;a.angleDamping=this.angleDamping;a.elasticity=this.elasticity;a.friction=this.friction;a.gravityScale=this.gravityScale;a.collideTiles=this.collideTiles;a.renderOrder=this.renderOrder;a.mirror=!!randInt(2);this.particleCreateCallback&&this.particleCreateCallback(a);return a}render(){}}class Particle extends EngineObject{constructor(a,b,c,d,e,f,g,k,h,m,n,l,p){super(a,vec2(),b,c);this.colorStart=d;this.colorEndDelta=e.subtract(d);this.lifeTime=f;this.sizeStart=g;this.sizeEndDelta=k-g;this.fadeRate=h;this.additive=m;this.trailScale=n;this.localSpaceEmitter=l;this.destroyCallback=p;this.clampSpeedLinear=!1}render(){const a=min((time-this.spawnTime)/this.lifeTime,1),b=vec2(this.sizeStart+a*this.sizeEndDelta);var c=this.fadeRate/2;c=new Color(this.colorStart.r+a*this.colorEndDelta.r,this.colorStart.g+a*this.colorEndDelta.g,this.colorStart.b+a*this.colorEndDelta.b,(this.colorStart.a+a*this.colorEndDelta.a)*(a<c?a/c:a>1-c?(1-a)/c:1));this.additive&&setBlendMode(!0);let d=this.pos,e=this.angle;this.localSpaceEmitter&&(d=this.localSpaceEmitter.pos.add(d.rotate(-this.localSpaceEmitter.angle)),e+=this.localSpaceEmitter.angle);if(this.trailScale){var f=this.velocity;this.localSpaceEmitter&&(f=f.rotate(-this.localSpaceEmitter.angle));var g=f.length();g&&(f=f.scale(1/g),g*=this.trailScale,b.y=max(b.x,g),e=f.angle(),drawTile(d.add(f.multiply(vec2(0,-g/2))),b,this.tileInfo,c,e,this.mirror))}else drawTile(d,b,this.tileInfo,c,e,this.mirror);this.additive&&setBlendMode();debugParticles&&debugRect(d,b,\"#f005\",0,e);1==a&&(this.color=c,this.size=b,this.destroyCallback&&this.destroyCallback(this),this.destroyed=1)}}const medals={};let medalsDisplayQueue=[],medalsSaveName,medalsDisplayTimeLast;function medalsInit(a){medalsSaveName=a;debugMedals||medalsForEach(b=>b.unlocked=!!localStorage[b.storageKey()]);engineAddPlugin(void 0,function(){if(medalsDisplayQueue.length){var b=medalsDisplayQueue[0],c=timeReal-medalsDisplayTimeLast;if(medalsDisplayTimeLast)if(c>medalDisplayTime)medalsDisplayTimeLast=0,medalsDisplayQueue.shift();else{const d=medalDisplayTime-medalDisplaySlideTime;b.render(c<medalDisplaySlideTime?1-c/medalDisplaySlideTime:c>d?(c-d)/medalDisplaySlideTime:0)}else medalsDisplayTimeLast=timeReal}})}function medalsForEach(a){Object.values(medals).forEach(b=>a(b))}class Medal{constructor(a,b,c=\"\",d=\"🏆\",e){ASSERT(0<=a&&!medals[a]);this.id=a;this.name=b;this.description=c;this.icon=d;this.unlocked=!1;e&&((this.image=new Image).src=e);medals[a]=this}unlock(){medalsPreventUnlock||this.unlocked||(ASSERT(medalsSaveName,\"save name must be set\"),localStorage[this.storageKey()]=this.unlocked=!0,medalsDisplayQueue.push(this))}render(a=0){const b=overlayContext;var c=min(medalDisplaySize.x,mainCanvas.width);const d=overlayCanvas.width-c;a*=-medalDisplaySize.y;b.save();b.beginPath();b.fillStyle=new Color(.9,.9,.9).toString();b.strokeStyle=new Color(0,0,0).toString();b.lineWidth=3;b.rect(d,a,c,medalDisplaySize.y);b.fill();b.stroke();b.clip();this.renderIcon(vec2(d+15+medalDisplayIconSize/2,a+medalDisplaySize.y/2));c=vec2(d+medalDisplayIconSize+30,a+28);drawTextScreen(this.name,c,38,new Color(0,0,0),0,void 0,\"left\");c.y+=32;drawTextScreen(this.description,c,24,new Color(0,0,0),0,void 0,\"left\");b.restore()}renderIcon(a,b=medalDisplayIconSize){this.image?overlayContext.drawImage(this.image,a.x-b/2,a.y-b/2,b,b):drawTextScreen(this.icon,a,.7*b,new Color(0,0,0))}storageKey(){return medalsSaveName+\"_\"+this.id}}let glCanvas,glContext,glAntialias=!0,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive;function glInit(){if(glEnable&&!headlessMode){glCanvas=document.createElement(\"canvas\");glContext=glCanvas.getContext(\"webgl2\",{antialias:glAntialias});var a=mainCanvas.parentElement;glOverlay&&a.appendChild(glCanvas);glShader=glCreateProgram(\"#version 300 es\\nprecision highp float;uniform mat4 m;in vec2 g;in vec4 p,u,c,a;in float r;out vec2 v;out vec4 d,e;void main(){vec2 s=(g-.5)*p.zw;gl_Position=m*vec4(p.xy+s*cos(r)-vec2(-s.y,s)*sin(r),1,1);v=mix(u.xw,u.zy,g);d=c;e=a;}\",\"#version 300 es\\nprecision highp float;uniform sampler2D s;in vec2 v;in vec4 d,e;out vec4 c;void main(){c=texture(s,v)*d+e;}\");a=new ArrayBuffer(gl_INSTANCE_BUFFER_SIZE);glPositionData=new Float32Array(a);glColorData=new Uint32Array(a);glArrayBuffer=glContext.createBuffer();glGeometryBuffer=glContext.createBuffer();a=new Float32Array([glInstanceCount=0,0,1,0,0,1,1,1]);glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);glContext.bufferData(gl_ARRAY_BUFFER,a,gl_STATIC_DRAW)}}function glPreRender(){if(glEnable&&!headlessMode){glContext.viewport(0,0,glCanvas.width=mainCanvas.width,glCanvas.height=mainCanvas.height);glContext.clear(gl_COLOR_BUFFER_BIT);glContext.useProgram(glShader);glContext.activeTexture(gl_TEXTURE0);textureInfos[0]&&glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=textureInfos[0].glTexture);var a=glAdditive=glBatchAdditive=0,b=(d,e,f,g)=>{d=glContext.getAttribLocation(glShader,d);const k=f&&gl_INSTANCE_BYTE_STRIDE,h=f&&1,m=1==f;glContext.enableVertexAttribArray(d);glContext.vertexAttribPointer(d,g,e,m,k,a);glContext.vertexAttribDivisor(d,h);a+=g*f};glContext.bindBuffer(gl_ARRAY_BUFFER,glGeometryBuffer);b(\"g\",gl_FLOAT,0,2);glContext.bindBuffer(gl_ARRAY_BUFFER,glArrayBuffer);glContext.bufferData(gl_ARRAY_BUFFER,gl_INSTANCE_BUFFER_SIZE,gl_DYNAMIC_DRAW);b(\"p\",gl_FLOAT,4,4);b(\"u\",gl_FLOAT,4,4);b(\"c\",gl_UNSIGNED_BYTE,1,4);b(\"a\",gl_UNSIGNED_BYTE,1,4);b(\"r\",gl_FLOAT,4,1);b=vec2(2*cameraScale).divide(mainCanvasSize);var c=vec2(-1).subtract(cameraPos.multiply(b));glContext.uniformMatrix4fv(glContext.getUniformLocation(glShader,\"m\"),!1,[b.x,0,0,0,0,b.y,0,0,1,1,1,1,c.x,c.y,0,0])}}function glSetTexture(a){headlessMode||a==glActiveTexture||(glFlush(),glContext.bindTexture(gl_TEXTURE_2D,glActiveTexture=a))}function glCompileShader(a,b){b=glContext.createShader(b);glContext.shaderSource(b,a);glContext.compileShader(b);if(debug&&!glContext.getShaderParameter(b,gl_COMPILE_STATUS))throw glContext.getShaderInfoLog(b);return b}function glCreateProgram(a,b){const c=glContext.createProgram();glContext.attachShader(c,glCompileShader(a,gl_VERTEX_SHADER));glContext.attachShader(c,glCompileShader(b,gl_FRAGMENT_SHADER));glContext.linkProgram(c);if(debug&&!glContext.getProgramParameter(c,gl_LINK_STATUS))throw glContext.getProgramInfoLog(c);return c}function glCreateTexture(a){const b=glContext.createTexture();glContext.bindTexture(gl_TEXTURE_2D,b);a&&a.width?glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,gl_RGBA,gl_UNSIGNED_BYTE,a):(a=new Uint8Array([255,255,255,255]),glContext.texImage2D(gl_TEXTURE_2D,0,gl_RGBA,1,1,0,gl_RGBA,gl_UNSIGNED_BYTE,a));a=canvasPixelated?gl_NEAREST:gl_LINEAR;glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MIN_FILTER,a);glContext.texParameteri(gl_TEXTURE_2D,gl_TEXTURE_MAG_FILTER,a);return b}function glFlush(){if(glInstanceCount){var a=glBatchAdditive?gl_ONE:gl_ONE_MINUS_SRC_ALPHA;glContext.blendFuncSeparate(gl_SRC_ALPHA,a,gl_ONE,a);glContext.enable(gl_BLEND);glContext.bufferSubData(gl_ARRAY_BUFFER,0,glPositionData);glContext.drawArraysInstanced(gl_TRIANGLE_STRIP,0,4,glInstanceCount);showWatermark&&(drawCount+=glInstanceCount);glInstanceCount=0;glBatchAdditive=glAdditive}}function glCopyToContext(a,b=!1){glEnable&&(glInstanceCount||b)&&(glFlush(),glOverlay&&!b||a.drawImage(glCanvas,0,0))}function glSetAntialias(a=!0){ASSERT(!glCanvas,\"must be called before engineInit\");glAntialias=a}function glDraw(a,b,c,d,e,f,g,k,h,m,n=0){ASSERT(\"number\"==typeof m&&\"number\"==typeof n,\"invalid color\");(glInstanceCount>=gl_MAX_INSTANCES||glBatchAdditive!=glAdditive)&&glFlush();let l=glInstanceCount*gl_INDICIES_PER_INSTANCE;glPositionData[l++]=a;glPositionData[l++]=b;glPositionData[l++]=c;glPositionData[l++]=d;glPositionData[l++]=f;glPositionData[l++]=g;glPositionData[l++]=k;glPositionData[l++]=h;glColorData[l++]=m;glColorData[l++]=n;glPositionData[l++]=e;glInstanceCount++}const gl_ONE=1,gl_TRIANGLE_STRIP=5,gl_SRC_ALPHA=770,gl_ONE_MINUS_SRC_ALPHA=771,gl_BLEND=3042,gl_TEXTURE_2D=3553,gl_UNSIGNED_BYTE=5121,gl_FLOAT=5126,gl_RGBA=6408,gl_NEAREST=9728,gl_LINEAR=9729,gl_TEXTURE_MAG_FILTER=10240,gl_TEXTURE_MIN_FILTER=10241,gl_COLOR_BUFFER_BIT=16384,gl_TEXTURE0=33984,gl_ARRAY_BUFFER=34962,gl_STATIC_DRAW=35044,gl_DYNAMIC_DRAW=35048,gl_FRAGMENT_SHADER=35632,gl_VERTEX_SHADER=35633,gl_COMPILE_STATUS=35713,gl_LINK_STATUS=35714,gl_UNPACK_FLIP_Y_WEBGL=37440,gl_INDICIES_PER_INSTANCE=11,gl_MAX_INSTANCES=1e4,gl_INSTANCE_BYTE_STRIDE=4*gl_INDICIES_PER_INSTANCE,gl_INSTANCE_BUFFER_SIZE=gl_MAX_INSTANCES*gl_INSTANCE_BYTE_STRIDE,engineName=\"LittleJS\",engineVersion=\"1.10.7\",frameRate=60,timeDelta=1/frameRate;let engineObjects=[],engineObjectsCollide=[],frame=0,time=0,timeReal=0,paused=!1;function setPaused(a){paused=a}let frameTimeLastMS=0,frameTimeBufferMS=0,averageFPS=0;const pluginUpdateList=[],pluginRenderList=[];function engineAddPlugin(a,b){ASSERT(!pluginUpdateList.includes(a));ASSERT(!pluginRenderList.includes(b));a&&pluginUpdateList.push(a);b&&pluginRenderList.push(b)}function engineInit(a,b,c,d,e,f=[],g=document.body){function k(n=0){var l=n-frameTimeLastMS;frameTimeLastMS=n;if(debug||showWatermark)averageFPS=lerp(.05,averageFPS,1e3/(l||1));n=debug&&keyIsDown(\"Equal\");const p=debug&&keyIsDown(\"Minus\");debug&&(l*=n?5:p?.2:1);timeReal+=l/1e3;frameTimeBufferMS+=paused?0:l;n||(frameTimeBufferMS=min(frameTimeBufferMS,50));h();if(paused){for(const r of engineObjects)r.parent||r.updateTransforms();inputUpdate();pluginUpdateList.forEach(r=>r());debugUpdate();c();inputUpdatePost()}else{l=0;0>frameTimeBufferMS&&-9<frameTimeBufferMS&&(l=frameTimeBufferMS,frameTimeBufferMS=0);for(;0<=frameTimeBufferMS;frameTimeBufferMS-=1e3/frameRate)time=frame++/frameRate,inputUpdate(),b(),pluginUpdateList.forEach(r=>r()),engineObjectsUpdate(),debugUpdate(),c(),inputUpdatePost();frameTimeBufferMS+=l}if(!headlessMode){mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height);mainContext.imageSmoothingEnabled=!canvasPixelated;glPreRender();d();engineObjects.sort((r,x)=>r.renderOrder-x.renderOrder);for(var q of engineObjects)q.destroyed||q.render();e();pluginRenderList.forEach(r=>r());touchGamepadRender();debugRender();glCopyToContext(mainContext);showWatermark&&(overlayContext.textAlign=\"right\",overlayContext.textBaseline=\"top\",overlayContext.font=\"1em monospace\",overlayContext.fillStyle=\"#000\",q=engineName+\" v\"+engineVersion+\" / \"+drawCount+\" / \"+engineObjects.length+\" / \"+averageFPS.toFixed(1)+(glEnable?\" GL\":\" 2D\"),overlayContext.fillText(q,mainCanvas.width-3,3),overlayContext.fillStyle=\"#fff\",overlayContext.fillText(q,mainCanvas.width-2,2),drawCount=0)}requestAnimationFrame(k)}function h(){if(!headlessMode){if(canvasFixedSize.x){mainCanvas.width=canvasFixedSize.x;mainCanvas.height=canvasFixedSize.y;const n=innerWidth/innerHeight,l=mainCanvas.width/mainCanvas.height;(glCanvas||mainCanvas).style.width=mainCanvas.style.width=overlayCanvas.style.width=n<l?\"100%\":\"\";(glCanvas||mainCanvas).style.height=mainCanvas.style.height=overlayCanvas.style.height=n<l?\"\":\"100%\"}else mainCanvas.width=min(innerWidth,canvasMaxSize.x),mainCanvas.height=min(innerHeight,canvasMaxSize.y);overlayCanvas.width=mainCanvas.width;overlayCanvas.height=mainCanvas.height;mainCanvasSize=vec2(mainCanvas.width,mainCanvas.height)}}function m(){new Promise(n=>n(a())).then(k)}ASSERT(Array.isArray(f),\"pass in images as array\");headlessMode?m():(g.style.cssText=\"margin:0;overflow:hidden;width:100vw;height:100vh;display:flex;align-items:center;justify-content:center;background:#000;user-select:none;-webkit-user-select:none;\"+(touchInputEnable?\"touch-action:none;-webkit-touch-callout:none\":\"\"),g.appendChild(mainCanvas=document.createElement(\"canvas\")),mainContext=mainCanvas.getContext(\"2d\"),inputInit(),audioInit(),debugInit(),glInit(),g.appendChild(overlayCanvas=document.createElement(\"canvas\")),overlayContext=overlayCanvas.getContext(\"2d\"),mainCanvas.style.cssText=overlayCanvas.style.cssText=\"position:absolute\",glCanvas&&(glCanvas.style.cssText=\"position:absolute\"),h(),g=f.map((n,l)=>new Promise(p=>{const q=new Image;q.onerror=q.onload=()=>{textureInfos[l]=new TextureInfo(q);p()};q.src=n})),f.length||g.push(new Promise(n=>{textureInfos[0]=new TextureInfo(new Image);n()})),showSplashScreen&&g.push(new Promise(n=>{function l(){clearInput();drawEngineSplashScreen(p+=.01);1<p?n():setTimeout(l,16)}let p=0;console.log(`${engineName} Engine v${engineVersion}`);l()})),Promise.all(g).then(m))}function engineObjectsUpdate(){function a(b){if(!b.destroyed){b.update();for(const c of b.children)a(c)}}engineObjectsCollide=engineObjects.filter(b=>b.collideSolidObjects);for(const b of engineObjects)b.parent||(a(b),b.updateTransforms());engineObjects=engineObjects.filter(b=>!b.destroyed)}function engineObjectsDestroy(){for(const a of engineObjects)a.parent||a.destroy();engineObjects=engineObjects.filter(a=>!a.destroyed)}function engineObjectsCollect(a,b,c=engineObjects){const d=[];if(a)if(b instanceof Vector2)for(const e of c)isOverlapping(a,b,e.pos,e.size)&&d.push(e);else{b*=b;for(const e of c)a.distanceSquared(e.pos)<b&&d.push(e)}else for(const e of c)d.push(e);return d}function engineObjectsCallback(a,b,c,d=engineObjects){engineObjectsCollect(a,b,d).forEach(e=>c(e))}function engineObjectsRaycast(a,b,c=engineObjects){const d=[];for(const e of c)e.collideRaycast&&isIntersecting(a,b,e.pos,e.size)&&(debugRaycast&&debugRect(e.pos,e.size,\"#f00\"),d.push(e));debugRaycast&&debugLine(a,b,d.length?\"#f00\":\"#00f\",.02);return d}function drawEngineSplashScreen(a){const b=overlayContext;var c=overlayCanvas.width=innerWidth,d=overlayCanvas.height=innerHeight,e=percent(a,1,.8),f=percent(a,0,.5),g=b.createRadialGradient(c/2,d/2,0,c/2,d/2,.7*Math.hypot(c,d));g.addColorStop(0,hsl(0,0,lerp(f,0,e/2),e).toString());g.addColorStop(1,hsl(0,0,0,e).toString());b.save();b.fillStyle=g;b.fillRect(0,0,c,d);g=(h,m,n,l,p)=>{b.beginPath();b.rect(h,m,n,p?l*k:l);(b.fillStyle=p)?b.fill():b.stroke()};f=(h,m,n,l=0,p=2*PI,q,r)=>{const x=(l+p)/2;l=k*(p-l)/2;b.beginPath();r&&b.lineTo(h,m);b.arc(h,m,n,x-l,x+l);(b.fillStyle=q)?b.fill():b.stroke()};e=(h=0,m=0)=>hsl([.98,.3,.57,.14][h%4]-10,.8,[0,.3,.5,.8,.9][m]).toString();a=wave(1,1,a);const k=percent(a,.1,.5);b.translate(c/2,d/2);c=min(6,min(c,d)/99);b.scale(c,c);b.translate(-40,-35);b.lineJoin=b.lineCap=\"round\";b.lineWidth=.1+1.9*k;c=percent(a,.1,1);b.setLineDash([99*c,99]);g(7,16,18,-8,e(2,2));g(7,8,18,4,e(2,3));g(25,8,8,8,e(2,1));g(25,8,-18,8);g(25,8,8,8);g(25,16,7,23,e());g(11,39,14,-23,e(1,1));g(11,16,14,18,e(1,2));g(11,16,14,8,e(1,3));g(25,16,-14,24);g(15,29,6,-9,e(2,2));f(15,21,5,0,PI/2,e(2,4),1);g(21,21,-6,9);g(37,14,9,6,e(3,2));g(37,14,4.5,6,e(3,3));g(37,14,9,6);g(50,20,10,-8,e(0,1));g(50,20,6.5,-8,e(0,2));g(50,20,3.5,-8,e(0,3));g(50,20,10,-8);f(55,2,11.4,.5,PI-.5,e(3,3));f(55,2,11.4,.5,PI/2,e(3,2),1);f(55,2,11.4,.5,PI-.5);g(45,7,20,-7,e(0,2));g(45,-1,20,4,e(0,3));g(45,-1,20,8);for(c=5;c--;)f(60-6*c,30,9.9,0,2*PI,e(c+2,3)),f(60-6*c,30,10,-.5,PI+.5,e(c+2,2)),f(60-6*c,30,10.1,.5,PI-.5,e(c+2,1));f(36,30,10,PI/2,3*PI/2);f(48,30,10,PI/2,3*PI/2);f(60,30,10);b.beginPath();b.lineTo(36,20);b.lineTo(60,20);b.stroke();f(60,30,4,PI,3*PI,e(3,2));f(60,30,4,PI,2*PI,e(3,3));f(60,30,4,PI,3*PI);for(c=6;c--;)b.beginPath(),b.lineTo(53,54),b.lineTo(53,40),b.lineTo(53+(1+2.9*c)*k,40),b.lineTo(53+(4+3.5*c)*k,54),b.fillStyle=e(0,c%2+2),b.fill(),c%2&&b.stroke();g(6,40,5,5);g(6,40,5,5,e());g(15,54,38,-14,e());for(g=3;g--;)for(c=2;c--;)f(15*g+15,47,c?7:1,PI,3*PI,e(g,3)),b.stroke(),f(15*g+15,47,c?7:1,0,PI,e(g,2)),b.stroke();b.beginPath();b.lineTo(6,40);b.lineTo(68,40);b.stroke();b.beginPath();b.lineTo(77,54);b.lineTo(4,54);b.stroke();f=engineName;b.font=\"900 16px arial\";b.textAlign=\"center\";b.textBaseline=\"top\";b.lineWidth=.1+3.9*k;g=0;for(c=0;c<f.length;++c)g+=b.measureText(f[c]).width;for(c=2;c--;)for(let h=0,m=41-g/2;h<f.length;++h)b.fillStyle=e(h,2),d=b.measureText(f[h]).width,b[c?\"strokeText\":\"fillText\"](f[h],m+d/2,55.5,17*k),m+=d;b.restore()}export{engineName,engineVersion,frameRate,timeDelta,engineObjects,frame,time,timeReal,paused,setPaused,engineInit,engineObjectsUpdate,engineObjectsDestroy,engineObjectsCallback,engineObjectsRaycast,engineAddPlugin,debug,debugOverlay,showWatermark,ASSERT,debugRect,debugPoly,debugCircle,debugPoint,debugLine,debugOverlap,debugText,debugClear,debugSaveCanvas,debugSaveText,debugSaveDataURL,cameraPos,cameraScale,canvasMaxSize,canvasFixedSize,canvasPixelated,fontDefault,showSplashScreen,headlessMode,tileSizeDefault,tileFixBleedScale,enablePhysicsSolver,objectDefaultMass,objectDefaultDamping,objectDefaultAngleDamping,objectDefaultElasticity,objectDefaultFriction,objectMaxSpeed,gravity,particleEmitRateScale,glEnable,glOverlay,gamepadsEnable,gamepadDirectionEmulateStick,inputWASDEmulateDirection,touchGamepadEnable,touchGamepadAnalog,touchGamepadSize,touchGamepadAlpha,vibrateEnable,soundEnable,soundVolume,soundDefaultRange,soundDefaultTaper,medalDisplayTime,medalDisplaySlideTime,medalDisplaySize,medalDisplayIconSize,setCameraPos,setCameraScale,setCanvasMaxSize,setCanvasFixedSize,setCanvasPixelated,setFontDefault,setShowSplashScreen,setHeadlessMode,setGlEnable,setGlOverlay,setTileSizeDefault,setTileFixBleedScale,setEnablePhysicsSolver,setObjectDefaultMass,setObjectDefaultDamping,setObjectDefaultAngleDamping,setObjectDefaultElasticity,setObjectDefaultFriction,setObjectMaxSpeed,setGravity,setParticleEmitRateScale,setTouchInputEnable,setGamepadsEnable,setGamepadDirectionEmulateStick,setInputWASDEmulateDirection,setTouchGamepadEnable,setTouchGamepadAnalog,setTouchGamepadSize,setTouchGamepadAlpha,setVibrateEnable,setSoundEnable,setSoundVolume,setSoundDefaultRange,setSoundDefaultTaper,setMedalDisplayTime,setMedalDisplaySlideTime,setMedalDisplaySize,setMedalDisplayIconSize,setMedalsPreventUnlock,setShowWatermark,setDebugKey,PI,abs,min,max,sign,mod,clamp,percent,distanceWrap,lerpWrap,distanceAngle,lerpAngle,lerp,smoothStep,nearestPowerOfTwo,isOverlapping,isIntersecting,wave,formatTime,rand,randInt,randSign,randInCircle,randVector,randColor,RandomGenerator,Vector2,Color,Timer,vec2,rgb,hsl,isColor,WHITE,BLACK,GRAY,RED,ORANGE,YELLOW,GREEN,CYAN,BLUE,PURPLE,MAGENTA,textureInfos,tile,TileInfo,TextureInfo,mainCanvas,mainContext,overlayCanvas,overlayContext,mainCanvasSize,screenToWorld,worldToScreen,drawTile,drawRect,drawLine,drawPoly,drawEllipse,drawCircle,drawCanvas2D,setBlendMode,drawTextScreen,drawText,engineFontImage,FontImage,isFullscreen,toggleFullscreen,getCameraSize,glCanvas,glContext,glCompileShader,glCopyToContext,glCreateProgram,glCreateTexture,glDraw,glFlush,glSetTexture,glSetAntialias,glAntialias,glShader,glActiveTexture,glArrayBuffer,glGeometryBuffer,glPositionData,glColorData,glInstanceCount,glAdditive,glBatchAdditive,keyIsDown,keyWasPressed,keyWasReleased,clearInput,mouseIsDown,mouseWasPressed,mouseWasReleased,mousePos,mousePosScreen,mouseWheel,isUsingGamepad,preventDefaultInput,gamepadIsDown,gamepadWasPressed,gamepadWasReleased,gamepadStick,mouseToScreen,gamepadsUpdate,vibrate,vibrateStop,isTouchDevice,Sound,SoundWave,Music,playAudioFile,speak,speakStop,getNoteFrequency,audioContext,playSamples,zzfx,EngineObject,tileCollision,tileCollisionSize,initTileCollision,setTileCollisionData,getTileCollisionData,tileCollisionTest,tileCollisionRaycast,TileLayerData,TileLayer,ParticleEmitter,Particle,medals,medalsPreventUnlock,medalsInit,Medal};",
  "export {\n  cameraPos, cameraScale, EngineObject,\n  mousePos, mouseWasPressed, mouseWasReleased,\n  setCameraPos, setCameraScale, vec2,\n  Vector2, Color, randColor,\n  engineInit, TileInfo,\n} from '../../dist/littlejs.esm.min';\n// } from 'littlejsengine';\nimport { setEnablePhysicsSolver, setGamepadsEnable, setShowSplashScreen } from '../../dist/littlejs.esm.min';\nexport * as LittleJS from \"../../dist/littlejs.esm.min\";\n\nsetShowSplashScreen(true);\nsetEnablePhysicsSolver(false);\nsetGamepadsEnable(false);\n",
  "import { TileInfo, vec2 } from \"../lib/littlejs\";\nimport type { Anim } from \"../definition/animation\";\n\nexport interface AnimationInfo {\n  animation?: Anim;\n  tileInfos: TileInfo[];\n  airFramesSet?: Set<number>;\n}\n\nexport class AnimationManager {\n  private readonly animationInfos: Record<string, AnimationInfo> = {};\n  readonly imageSources: string[] = [];\n\n  constructor(animations: Anim[]) {\n    this.saveImageSource(animations);\n    this.registerAnimations(animations);\n    this.registerTileInfos(animations);\n    this.updateExtra(animations);\n  }\n\n  private saveImageSource(animations: Anim[]) {\n    animations?.forEach((animation) => {\n      if (animation.imageSource && !this.imageSources.includes(animation.imageSource)) {\n        this.imageSources.push(animation.imageSource);\n      }\n    });\n  }\n\n  private ensureAnimationInfos(name: string) {\n    if (!this.animationInfos[name]) {\n      this.animationInfos[name] = {\n        animation: undefined,\n        tileInfos: [],\n      };\n    }\n    return this.animationInfos[name];\n  }\n\n  private registerTileInfos(animations: Anim[]) {\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      const imgSource = animation.imageSource;\n      if (imgSource) {\n        const size = vec2(animation.spriteSize?.[0] ?? 0, animation.spriteSize?.[1] ?? 0);\n        animation.frames?.forEach((frame) => {\n          const mul = animation.mul ?? 1;\n          const cols = 30;\n          for (let i = 0; i < mul; i++) {\n            animInfo.tileInfos.push(new TileInfo(undefined,\n              size,\n              this.imageSources.indexOf(imgSource),\n              2).frame(frame % cols).offset(vec2(0, Math.floor(frame / cols) * (size.y + 4))));\n          }\n        });\n      }\n\n\n    });\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      animation.children?.forEach((child) => {\n        const childAnimInfo = this.getInfo(child);\n        animInfo.tileInfos.push(...childAnimInfo.tileInfos);\n      });\n    });\n  }\n\n  private registerAnimations(animations: Anim[]) {\n    animations?.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      animInfo.animation = animation;\n    });\n  }\n\n  private updateExtra(animations: Anim[]) {\n    animations.forEach((animation) => {\n      const animInfo = this.ensureAnimationInfos(animation.name);\n      if (animation.airFrames?.length) {\n        let count = 0;\n        animInfo.airFramesSet = new Set();\n        animation.frames?.forEach((frame) => {\n          const mul = animation.mul ?? 1;\n          for (let i = 0; i < mul; i++) {\n            if (animation.airFrames?.includes(frame)) {\n              animInfo.airFramesSet?.add(count);\n            }\n            count++;\n          }\n        });\n      }\n    });\n  }\n\n  getInfo(name: string) {\n    return this.animationInfos[name];\n  }\n}\n",
  "import { EngineObject, vec2, Vector2 } from \"../../lib/littlejs\";\n\nexport class DecorObject extends EngineObject {\n  initialPos: Vector2;\n  bornTime: number;\n  doomTime?: number;\n  motionX: number = Math.random();\n  motionY: number = Math.random();\n  constructor(parent: EngineObject, x: number, y: number) {\n    super();\n\n    parent.addChild(this, vec2(x, y));\n    this.initialPos = vec2(x, y);\n    this.bornTime = Date.now() - Math.random() * 100000;\n  }\n}\n",
  "import type { AnimationInfo } from \"../../animation/animation-manager\";\nimport { EngineObject, Vector2 } from \"../../lib/littlejs\";\n\nexport class MoveOption extends EngineObject {\n  animation?: AnimationInfo;\n  constructor(\n    readonly px: number,\n    readonly py: number,\n    public from: Vector2,\n    public canReveal: number,\n    public movePoints: number,\n    public distanceTravelled: number,\n    readonly canLand: boolean,\n  ) {\n    super();\n  }\n}\n",
  "import type { AnimationInfo } from \"../../animation/animation-manager\";\nimport { EngineObject } from \"../../lib/littlejs\";\n\nexport class AttackOption extends EngineObject {\n  animation?: AnimationInfo;\n  constructor(\n    readonly px: number,\n    readonly py: number,\n  ) {\n    super();\n\n  }\n\n}\n",
  "import { EngineObject, Vector2 } from \"../lib/littlejs\";\n\nexport class Projectile extends EngineObject {\n  constructor(start: Vector2, readonly target: Vector2, readonly speed: number) {\n    super();\n    this.pos.set(start.x, start.y);\n    this.size.set(.5, .5);\n    this.renderOrder = 10000000;\n  }\n\n  move() {\n    const dx = this.target.x - this.pos.x;\n    const dy = this.target.y - this.pos.y;\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    if (dist < this.speed) {\n      this.pos.set(this.target.x, this.target.y);\n      return true;\n    }\n    this.pos.set(this.pos.x + dx / dist * this.speed, this.pos.y + dy / dist * this.speed);\n    this.angle += .2;\n  }\n\n  landed() {\n    return this.pos.x === this.target.x && this.pos.y === this.target.y;\n  }\n}\n",
  "import { Color, EngineObject, mousePos, mouseWasPressed, mouseWasReleased, randColor, vec2, Vector2 } from \"../../lib/littlejs\";\nimport type { Elem } from \"../../definition/elem\";\nimport type { Manager } from \"../manager\";\nimport type { AnimationInfo } from \"../../animation/animation-manager\";\nimport type { Resources } from \"../../definition/resources\";\nimport { DecorObject } from \"./decor\";\nimport { MoveOption } from \"./move-option\";\nimport { AttackOption } from \"./attack-option\";\nimport { Projectile } from \"../projectile\";\n\nexport class GameObject extends EngineObject {\n  animationInfo?: AnimationInfo;\n  hoveredAnimationInfo?: AnimationInfo;\n  selectedAnimationInfo?: AnimationInfo;\n  moveAnimationInfo?: AnimationInfo;\n  attackAnimationInfo?: AnimationInfo;\n  harvestAnimationInfo?: AnimationInfo;\n  shadowAnimationInfo?: AnimationInfo;\n  frameRate: number = 60;\n  mouseFollower?: { offset: Vector2; snap?: number };\n  px: number = 0; py: number = 0;\n  positionDetached?: boolean;\n  // type?: string;\n  onHoverHideCursor?: boolean;\n  visible: boolean = true;\n  elem?: Elem;\n  hovered: boolean = false;\n  decors: DecorObject[] = [];\n  shadow?: EngineObject;\n  labels: EngineObject[] = [];\n  updated?: boolean = false;\n  moveOptions?: Record<string, MoveOption>;\n  attackOptions?: Record<string, AttackOption>;\n  clearedCloud?: boolean;\n  bornTime: number = Date.now() - Math.random() * 10000;\n  moveQueue: Vector2[] = [];\n  resources: EngineObject[] = [];\n  floatResources?: number;\n  resourceBars: EngineObject[] = [];\n  moving?: boolean;\n  talkingTime?: number;\n  attackTarget?: GameObject;\n  attackOrigin?: Vector2;\n  retaliationDamage?: number;\n  onDone?: (self: GameObject) => void;\n  hasPendingActions?: boolean;\n  damageTime?: number;\n  retaliating?: boolean;\n  projectile?: Projectile;\n  unitsSupported: Set<GameObject> = new Set();\n\n  constructor(public manager: Manager, private gridShift: Vector2 = vec2(0, 0)) {\n    super();\n  }\n\n  getColor(color: string): Color {\n    if (color === \"random\") {\n      return randColor();\n    } else {\n      return new Color().setHex(color);\n    }\n  }\n\n  async refresh(elem: Elem) {\n    if (!this.elem) {\n      const definition = this.manager.scene.definitions.find((def) => def.name === elem.definition);\n      if (definition) {\n        this.elem = JSON.parse(JSON.stringify(definition));\n      } else {\n        this.elem = elem.copy ? JSON.parse(JSON.stringify(elem)) : elem;\n      }\n      this.manager.defineElem(this.elem!);\n\n      // this.elem = JSON.parse(JSON.stringify(elem));\n\n    }\n    elem = this.elem!;\n    const config = elem.gameObject;\n    if (config) {\n      this.visible = !config.hidden;\n      if (this.home) {\n        this.home.unitsSupported.add(this);\n      }\n      if (elem.owner === undefined) {\n        elem.owner = 0;\n      }\n      if (elem.type === \"cursor\") {\n        this.manager.cursor = this;\n      }\n      if (!this.positionDetached) {\n        const px = this.gridShift.x + (config.pos?.[0] ?? 0);\n        const py = this.gridShift.y + (config.pos?.[1] ?? 0);\n        this.setPosition(px, py, true);\n        const offset = this.elem?.gameObject?.offset ?? [0, 0];\n        this.pos.set(px + offset[0], py + offset[1]);\n      }\n      this.updateSize(1);\n      if (config.rotation) {\n        this.angle = config.rotation;\n      }\n      if (config.color) {\n        this.color = this.getColor(config.color);\n      }\n      if (elem.animation) {\n        this.animationInfo = this.manager.animation.getInfo(elem.animation.name);\n      }\n      if (elem.onHover) {\n        if (elem.onHover.animation) {\n          this.hoveredAnimationInfo = this.manager.animation.getInfo(elem.onHover.animation);\n        }\n        this.onHoverHideCursor = elem.onHover.hideCursor;\n      }\n      if (elem.selected?.animation) {\n        this.selectedAnimationInfo = this.manager.animation.getInfo(elem.selected.animation);\n      }\n      if (elem.move?.animation) {\n        this.moveAnimationInfo = this.manager.animation.getInfo(elem.move.animation);\n      }\n      if (elem?.attack?.animation) {\n        this.attackAnimationInfo = this.manager.animation.getInfo(elem.attack.animation);\n      }\n      if (elem.harvest?.animation) {\n        this.harvestAnimationInfo = this.manager.animation.getInfo(elem.harvest.animation);\n      }\n      if (elem.shadow) {\n        if (elem.shadow.animation) {\n          this.shadowAnimationInfo = this.manager.animation.getInfo(elem.shadow.animation);\n          if (!this.shadow) {\n            this.shadow = new EngineObject();\n            this.shadow.size.set(this.size.x, this.size.y);\n            this.shadow.tileInfo = this.getTileInfoAnimate(this.shadowAnimationInfo);\n            const offset = this.elem?.gameObject?.offset ?? [0, 0];\n            this.addChild(this.shadow, vec2(-offset[0], -offset[1]));\n          }\n        }\n      }\n      if (elem.mouseFollower) {\n        this.mouseFollower = {\n          offset: vec2(elem.mouseFollower.offset?.[0] ?? 0, elem.mouseFollower.offset?.[1] ?? 0),\n          snap: elem.mouseFollower.snap,\n        };\n      }\n      if (elem.spread) {\n        const { animation, count, radius, color, size } = elem.spread;\n        const animInfo = this.manager.animation.getInfo(animation);\n        const actualCount = count[0] + Math.floor(Math.random() * (count[1] - count[0]));\n        for (let i = 0; i < actualCount; i++) {\n          const x = (Math.random() - 1 / 2) * (size ?? 1);\n          const y = (Math.random() - 1 / 2) * (size ?? 1);\n          if (radius && x * x + y * y > radius * radius) {\n            continue;\n          }\n          const decor = new DecorObject(this, x, y);\n          decor.tileInfo = this.getTileInfoAnimate(animInfo);\n          if (color) {\n            decor.color = this.getColor(color);\n          }\n          this.decors.push(decor);\n        }\n        if (elem.branchOut && Math.random() <= (elem.branchOut.chance ?? 1)) {\n          const { count, element } = elem.branchOut;\n          const actualCount = count[0] + Math.floor(Math.random() * (count[1] - count[0]));\n          const pos = vec2(this.pos.x, this.pos.y);\n          const directions: [number, number][] = [[-1, 0], [0, -1], [1, 0], [0, 1]];\n          let lastDir: [number, number] | undefined;\n          for (let i = 0; i < actualCount; i++) {\n            const el = this.manager.defineElem(JSON.parse(JSON.stringify(element)));\n            const oppositeDirIndex = lastDir ? (directions.indexOf(lastDir) + 2) % 4 : undefined;\n            const filteredDirections = directions.filter((_dir, index) => index !== oppositeDirIndex);\n            const dir = filteredDirections[Math.floor(Math.random() * filteredDirections.length)];\n            pos.set(pos.x + dir[0], pos.y + dir[1]);\n\n            if (this.manager.grid[`road_${pos.x}_${pos.y}`]) {\n              break;\n            }\n\n            const rot = Math.atan2(-dir[1], dir[0]);\n\n            if (!el.gameObject) {\n              el.gameObject = {};\n            }\n            if (!el.gameObject.noRotation) {\n              el.gameObject.rotation = rot;\n            }\n            el.gameObject.pos = [pos.x, pos.y];\n            this.manager.scene.elems.push(el);\n            lastDir = dir;\n          }\n        }\n      }\n      if (elem.selfSelect) {\n        elem.selfSelect = false;\n        setTimeout(() => {\n          this.manager.setSelection(this);\n        }, 300);\n      }\n      await this.refreshLabel();\n      this.refreshBars();\n      this.refreshAlpha();\n    } else {\n      if (this.manager.grid[this.getTag()] === this) {\n        delete this.manager.grid[this.getTag()];\n      }\n      if (this.manager.selected === this) {\n        this.manager.setSelection(undefined);\n      }\n      this.destroy();\n    }\n  }\n\n  hideBars() {\n    this.resourceBars.forEach(bar => bar.destroy());\n    this.resourceBars.length = 0;\n  }\n\n  refreshBars() {\n    this.hideBars();\n    if (!this.elem?.resourcesAccumulated) {\n      return;\n    }\n    const [offX, offY] = this.elem?.gameObject?.offset ?? [0, 0];\n    let count = 0;\n    Object.entries(this.elem.resourcesAccumulated).forEach(([key, value]) => {\n      const res = key as keyof Resources;\n      if (this.manager.scene.resources[res]?.global) {\n        return;\n      }\n      if (!value) {\n        return;\n      }\n      const backBar = new EngineObject(vec2(0, 0), vec2(1, .3));\n      backBar.color = new Color(0, 0, 0, .3);\n      this.addChild(backBar, vec2(0 - offX, count * .3 - offY - .3));\n      this.resourceBars.push(backBar);\n\n      const numValuesToShow = Math.min(10, value);\n      const spacing = Math.min(.2, 1 / numValuesToShow);\n      for (let j = 0; j < numValuesToShow; j++) {\n        const barIcon = new EngineObject(vec2(0, 0), vec2(.5, .5));\n        barIcon.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(key));\n        this.addChild(barIcon, vec2(-.4 + j * spacing - offX + Math.floor(j / 5) * .1 - Math.floor((numValuesToShow - 1) / 5) * .05, count * .3 - offY - .3));\n        this.resourceBars.push(barIcon);\n      }\n      if (value > 10) {\n        const color = value >= this.resourceCapacity(res) ? new Color(1, .7, .7, 1) : new Color(1, 1, 1, 1);\n        const digits = this.generateEngineObjectsForDigit(value, .4, .16, vec2(.5 - offX, count * .3 - offY - .3,), color);\n        this.resourceBars.push(...digits);\n      }\n      count++;\n    });\n    this.updated = false;\n  }\n\n  isRevealed() {\n    return this.manager.isRevealed(this.px, this.py);\n  }\n\n  async refreshLabel() {\n    this.labels.forEach(label => label.destroy());\n    this.labels.length = 0;\n    if (this.elem?.harvesting && !this.elem?.level) {\n      return;\n    }\n    if (!this.isRevealed()) {\n      return;\n    }\n    let numToShow = this.elem?.level ?? this.elem?.hitpoints;\n    if (!numToShow) {\n      return;\n    }\n    const size = this.elem?.level ? .5 : .3;\n    const offset = this.elem?.level ? vec2(0, .25) : vec2(-.5, .2);\n    const charSize = this.elem?.level ? .2 : .15;\n    const labelAlpha = await this.canAct() ? 1 : .5;\n    const isOwnedByPlayer = this.elem?.owner === this.manager.getPlayer();\n    const color = !this.elem?.owner ?\n      new Color(1, .5, .5, labelAlpha) :\n      !isOwnedByPlayer ? new Color(.5, .5, .5, labelAlpha) :\n        this.elem?.hitpoints\n          ? (this.elem.hitpoints < (this.elem.maxHitPoints ?? 0)\n            ? new Color(1, 1, 0, labelAlpha)\n            : new Color(0, 1, 0, labelAlpha))\n          : await this.canAffordMoreHarvester()\n            ? new Color(1, .9, 0, labelAlpha)\n            : new Color(1, 1, 1, labelAlpha);\n    if (!this.labels) {\n      this.labels = [];\n    }\n    const digits = this.generateEngineObjectsForDigit(numToShow, size, charSize, offset, color);\n    this.labels.push(...digits);\n    this.labels.forEach(label => label.renderOrder = this.renderOrder + .2);\n  }\n\n  async canAffordMoreHarvester() {\n    return (await this.findNearby((obj) => !!obj?.elem?.harvesting)).size < (this.elem?.level ?? 0);\n  }\n\n  resourceMaxedOut() {\n    return Object.entries(this.elem?.resourcesAccumulated ?? {}).some(([resource, value]) => {\n      const res = resource as keyof Resources;\n      if (this.manager.scene.resources[res]?.global || this.manager.scene.resources[res]?.forGrowth) {\n        return;\n      }\n      return value >= this.resourceCapacity(resource as keyof Resources);\n    });\n  }\n\n  generateDigits(num: number) {\n    const digits: number[] = [];\n    let l = Math.max(0, num);\n    while (l > 0) {\n      const d = l % 10;\n      digits.push(d);\n      l = Math.floor(l / 10);\n    }\n    return digits;\n  }\n\n  generateEngineObjectsForDigit(num: number, size: number, charSize: number, offset: Vector2, color: Color) {\n    const digits = this.generateDigits(num);\n    return digits.map((d, i) => {\n      const digit = new EngineObject(vec2(0, 0), vec2(size, size));\n      digit.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(`num_${d}`));\n      digit.color = color;\n      this.addChild(digit, offset.add(vec2(-i * charSize, 0)));\n      return digit;\n    });\n  }\n\n  private hideResources() {\n    this.resources.forEach(resource => resource.destroy());\n    this.resources.length = 0;\n  }\n\n  showResources(x: number, y: number,\n    owner?: number,\n    floatResources: boolean = false,\n    res?: Resources,\n  ) {\n    const resources = res ?? this.manager.getResources(x, y);\n    if (!resources) {\n      return;\n    }\n\n\n    const rand = floatResources ? (Math.random() - .5) * .5 : 0;\n    const resourceSpacing = .15;\n    const offset = this.elem?.gameObject?.offset ?? [0, 0];\n    const offX = (x - this.px - offset[0]) + rand, offY = y - this.py - offset[1];\n    const RESOURCES: [\"wheat\", \"wood\", \"trade\", \"gold\", \"brain\"] = [\"wheat\", \"wood\", \"trade\", \"gold\", \"brain\"];\n    let total = 0;\n    RESOURCES.forEach((resource) => {\n      for (let i = 0; i < (resources[resource] ?? 0); i++) {\n        total++;\n      }\n    });\n\n    let count = 0;\n    RESOURCES.forEach((resource) => {\n      const value = resources[resource] ?? 0;\n      if (!value) {\n        return;\n      }\n      const MAX_ROW = 8;\n      for (let i = 0; i < value; i++) {\n        const indic = new EngineObject(vec2(0, 0), vec2(.5, .5));\n        indic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(resource));\n        indic.color = new Color(1, 1, 1, 1);\n        const col = count % MAX_ROW;\n        const row = Math.floor(count / MAX_ROW);\n        this.addChild(indic,\n          vec2(\n            offX + (col - (Math.min(total, MAX_ROW) - 1) / 2) * resourceSpacing + rand,\n            offY + (row - Math.floor(total / MAX_ROW) / 2) * resourceSpacing + rand\n          )\n        );\n        this.resources.push(indic);\n        count++;\n      }\n    });\n    let harvesting = floatResources;\n    if (!floatResources) {\n      this.manager.iterateGridCell(x, y, async (elem) => {\n        if (elem.elem?.owner === owner && elem.elem?.harvesting) {\n          harvesting = true;\n        }\n      });\n    }\n    if (!floatResources) {\n      const indic = new EngineObject(vec2(0, 0), vec2(count * resourceSpacing + .2, .3));\n      indic.color = harvesting ? new Color(1, .5, 1, .8) : new Color(.5, .5, .5, .8);\n      this.addChild(indic, vec2(offX, offY));\n      this.resources.push(indic);\n    }\n    this.updated = false;\n    if (floatResources) {\n      this.floatResources = Date.now();\n    }\n  }\n\n  setHarvesting(value: boolean) {\n    if (this.elem) {\n      if (this.elem.harvesting !== value) {\n        this.elem.harvesting = value;\n        this.home?.refreshLabel();\n        if (this.elem.harvesting) {\n          this.spendActions();\n        } else {\n          this.manager.setSelection(this);\n        }\n      }\n    }\n  }\n\n  private getTag() {\n    return GameObject.getTag(this.elem?.type, this.px, this.py);\n  }\n\n  static getTag(type: string | undefined, px: number, py: number) {\n    return `${type}_${px}_${py}`;\n  }\n\n  updateSize(s?: number) {\n    const age = Date.now() - this.bornTime;\n    const scale = s ?? Math.min(1, age / 200);\n    const config = this.elem?.gameObject;\n    this.size.set(\n      scale * (this.visible ? (config?.size?.[0] ?? 0) : 0) * (this.elem?.gameObject?.lastDx ?? 1),\n      scale * (this.visible ? (config?.size?.[1] ?? 0) : 0),\n    );\n  }\n\n  clearMoves() {\n    if (this.elem?.turn) {\n      this.elem.turn.moves = 0;\n      this.elem.turn.attacks = 0;\n      this.elem.turn.actions = 0;\n    }\n  }\n\n  hasMove() {\n    return this.elem?.turn?.moves;\n  }\n\n  hasAttack() {\n    return this.elem?.turn?.attacks;\n  }\n\n  hasAction() {\n    return this.elem?.turn?.actions;\n  }\n\n  async canAttack() {\n    if (!this.elem?.attack || this.elem.attack.disabled) {\n      return false;\n    }\n    if (!this.elem.turn?.attacks) {\n      return false;\n    }\n    if (!this.elem?.turn.moves && !this.elem.attack.attackAfterMove) {\n      return false;\n    }\n    const foes = await this.findNearbyFoe(this.elem.attack.range);\n    if (!foes.size) {\n      return false;\n    }\n    let hasFoeToAttack = false;\n    foes.forEach((foe) => {\n      if (this.canAttackAt(foe.px, foe.py)) {\n        hasFoeToAttack = true;\n      }\n    });\n    if (!hasFoeToAttack) {\n      return false;\n    }\n\n    return true;\n  }\n\n  spendAttack() {\n    const elem = this.elem;\n    if (elem && elem.turn?.attacks) {\n      elem.turn.attacks = this.elem?.attack?.attackAfterAttack ? 1 : 0;\n      elem.turn.moves = this.elem?.attack?.moveAfterAttack ? 1 : 0;\n    }\n  }\n\n  spendMove() {\n    if (this.elem?.endlessMove) {\n      this.doneMoving();\n      return;\n    }\n    const elem = this.elem;\n    if (elem && elem.turn?.moves) {\n      elem.turn.moves--;\n      this.doneMoving();\n    }\n  }\n\n  doneMoving() {\n    if (this.hasPendingActions) {\n      return;\n    }\n    this.afterDoneMoving();\n  }\n\n  private async afterDoneMoving() {\n    this.refreshAlpha();\n    this.refreshLabel();\n    await this.manager.unlockRewards(this);\n    this.manager.checkForAnyMove();\n\n    if (this.manager.isAiPlayer(this.elem?.owner)) {\n      await this.manager.selectNext();\n    } else if (!this.canAct() || this.elem?.harvesting || this.elem?.waiting) {\n      await this.manager.selectNext();\n    } else if (this.manager.selected === this) {\n      if (this.elem?.settler || this.elem?.worker) {\n        this.showResourcesNearby();\n      }\n      await this.showActionOptions();\n      this.manager.hud.showSelected(this);\n    }\n  }\n\n  spendActions() {\n    const elem = this.elem;\n    if (elem && elem.turn?.actions) {\n      elem.turn.actions--;\n      this.doneMoving();\n    }\n  }\n\n  async canAct() {\n    return this.hasMove() || (this.hasAttack() && await this.canAttack()) || this.hasAction();\n  }\n\n  refreshAlpha() {\n    if (this.elem?.turn && this.elem?.type === \"unit\") {\n      if (!this.canAct() || this.elem?.waiting) {\n        this.color = new Color(1, 1, 1, .5);\n      } else {\n        this.color = new Color(1, 1, 1, 1);\n      }\n    }\n  }\n\n  async giveTurn() {\n    const elem = this.elem;\n    if (elem?.turn) {\n      elem.turn.moves = elem.turn.attacks = 1;\n      if (elem.worker) {\n        elem.turn.actions = 1;\n      }\n      if (this.elem?.harvesting || this.elem?.waiting) {\n        //  check nearby foes\n        const foes = await this.findNearbyFoe();\n        if (foes.size) {\n          this.elem.harvesting = false;\n          this.elem.waiting = false;\n          this.updated = false;\n        }\n      }\n\n      this.refreshAlpha();\n      this.refreshLabel();\n    }\n  }\n\n  attackTowards(px: number, py: number) {\n    console.log(this.elem?.name, \"Attack towards\", px, py);\n    const dx = px - this.px;\n    const dy = py - this.py;\n    const dist = Math.max(Math.abs(dx), Math.abs(dy));\n    if (dist === 0) {\n      return;\n    }\n    if (dist > 1) {\n      const x = Math.sign(dx);\n      const y = Math.sign(dy);\n      this.simpleMoveTo(this.px + x, this.py + y);\n      console.log(\"move by\", x, y);\n    }\n    this.moveQueue.push(vec2(px, py));\n  }\n\n  simpleMoveTo(px: number, py: number) {\n    this.moveQueue = [vec2(px, py)];\n    this.hideResources();\n    this.hideMoveOptions();\n    this.manager.hud.showSelected(undefined);\n  }\n\n  attackAt(px: number, py: number) {\n    const dx = px - this.px;\n    const dy = py - this.py;\n    if (!this.elem?.attack?.range) {\n      //  melee attack. Just move to the target\n      this.moveQueue.push(vec2(px, py));\n      this.hideResources();\n      this.hideMoveOptions();\n      this.manager.hud.showSelected(undefined);\n    } else {\n      //  ranged attack\n      const unit = this.manager.unitAt(px, py);\n      if (unit) {\n        this.attackRange(unit);\n\n      }\n\n    }\n  }\n\n  moveTo(px: number, py: number) {\n    this.positionDetached = true;\n    const moveOption = this.moveOptions?.[`${px}_${py}`];\n    if (!moveOption) {\n      if (this.moveQueue)\n        this.moveQueue.length = 0;\n      return;\n    }\n    if (!this.moveQueue) {\n      this.moveQueue = [];\n    }\n    this.moveQueue.push(vec2(px, py));\n    const from = moveOption.from;\n    if (from.x !== this.px || from.y !== this.py) {\n      this.moveTo(from.x, from.y);\n      return;\n    }\n    this.hideResources();\n    this.hideMoveOptions();\n    this.manager.hud.showSelected(undefined);\n  }\n\n  talkTo(gameObject: GameObject) {\n    if (!this.elem?.gameObject) {\n      return;\n    }\n    const dx = gameObject.px - this.px;\n    if (this.elem.gameObject.lastDx !== Math.sign(dx)) {\n      this.elem.gameObject.lastDx = Math.sign(dx);\n      this.updateSize();\n    }\n    this.talkingTime = Date.now() + Math.random() * 3000;\n  }\n\n  async moveUnitTo(px: number, py: number) {\n    this.talkingTime = undefined;\n    // check if there's a unit at the target position\n    const target = this.manager.unitAt(px, py);\n    if (target) {\n      if (this.elem?.owner === target.elem?.owner) {\n        this.talkTo(target);\n        target.talkTo(this);\n        return;\n      }\n      if (this.elem?.owner !== target.elem?.owner && await this.canAttack()) {\n        this.attack(target);\n        return;\n      }\n    } else {\n      this.setPosition(px, py);\n    }\n  }\n\n  setPosition(px: number, py: number, force?: boolean) {\n    if (this.px === px && this.py === py && !force) return;\n\n    if (this.manager.grid[this.getTag()] === this) {\n      delete this.manager.grid[this.getTag()];\n    }\n    if (this.px !== px && this.elem?.gameObject) {\n      this.elem.gameObject.lastDx = Math.sign(px - this.px);\n      this.updateSize();\n    }\n\n    this.px = px;\n    this.py = py;\n\n    if (this.manager.grid[this.getTag()] !== this) {\n      this.manager.grid[this.getTag()]?.destroy();\n      this.manager.grid[this.getTag()] = this;\n    }\n\n    if (this.elem?.type === \"cursor\") {\n      this.manager.onCursorMove(px, py);\n    }\n    if (this.elem?.type === \"cloud\") {\n      this.manager.revealed.delete(`${px}_${py}`);\n    }\n\n    this.clearedCloud = false;\n    this.updated = false;\n  }\n\n  hasMoveOptionToLandOn(x: number, y: number) {\n    return this.moveOptions?.[`${x}_${y}`]?.canLand;\n  }\n\n  hasAttackOptionOn(x: number, y: number) {\n    return this.attackOptions?.[`${x}_${y}`];\n  }\n\n  canLandOn(px: number, py: number) {\n    if (!this.canMoveTo(px, py)) {\n      return false;\n    }\n    return true;\n  }\n\n  canAttackAt(px: number, py: number) {\n    const elem = this.elem;\n    if (!elem) {\n      return false;\n    }\n    if (this.elem?.owner && !this.manager.isRevealed(px, py)) {\n      return false;\n    }\n    const dx = px - this.px;\n    const dy = py - this.py;\n    const distance = Math.max(Math.abs(dx), Math.abs(dy));\n    if (distance > (elem.attack?.range ?? 1)) {\n      return false;\n    }\n    const targetUnit = this.manager.unitAt(px, py);\n    // const targetHouse = this.manager.houseAt(px, py);\n    if (targetUnit) {\n      return targetUnit.elem?.owner !== elem.owner;\n    }\n    // if (targetHouse) {\n    //   return targetHouse.elem?.owner !== elem.owner;\n    // }\n    return false;\n  }\n\n  canMoveTo(px: number, py: number) {\n    const elem = this.elem;\n    if (!elem) {\n      return false;\n    }\n    if (this.px === px && this.py === py) {\n      return false;\n    }\n    if (!this.elem?.turn?.moves) {\n      return false;\n    }\n    if (elem.type !== \"unit\") {\n      return false;\n    }\n    if (!this.manager.grid[`tile_${px}_${py}`]) {\n      return false;\n    }\n    if (!this.manager.isRevealed(px, py)) {\n      if (!this.manager.isAiPlayer(this.elem.owner) && !this.elem.team) {\n        return false;\n      }\n    }\n    const decor = this.manager.grid[`decor_${px}_${py}`];\n    if (decor) {\n      if (!elem?.canCrossTerrains?.includes(decor.elem?.name ?? \"\")) {\n        return false;\n      }\n    }\n    const tile_overlay = this.manager.grid[`tile_overlay_${px}_${py}`];\n    if (tile_overlay?.elem?.water) {\n      if (!elem?.canCrossTerrains?.includes(tile_overlay?.elem?.name ?? \"\")) {\n        return false\n      }\n    }\n    if (this.elem?.closeToHome && this.home) {\n      const home = this.home;\n      const dx = px - home.px;\n      const dy = py - home.py;\n      if (this.manager.isResearched(\"expansion\", this.manager.getPlayer())) {\n        if (Math.abs(dx * dy) >= 4) {\n          return false;\n        }\n      } else {\n        if (Math.abs(dx) > 1 || Math.abs(dy) > 1) {\n          return false;\n        }\n      }\n    }\n    const targetUnit = this.manager.unitAt(px, py);\n    if (targetUnit) {\n      return false;\n    }\n\n    // const targetHouse = this.manager.houseAt(px, py);\n    // if (targetHouse && targetHouse.elem?.owner !== elem.owner) {\n    //   return false;\n    // }\n    // if (!targetUnit) {\n    //   return this.hasMove();\n    // }\n\n    // if (targetUnit?.elem?.owner === elem.owner) {\n    //   return false;\n    // }\n    //  else if (!this.canAttack() || (this.elem?.attack?.range ?? 1) > 1) {\n    //   return false;\n    // }\n\n    return true;\n  }\n\n  hide() {\n    if (this.visible) {\n      this.visible = false;\n      this.size.set(0, 0);\n    }\n  }\n\n  show() {\n    if (!this.visible) {\n      this.visible = true;\n      this.updateSize();\n    }\n  }\n\n  hoverIndic?: EngineObject;\n\n  onHoverChange() {\n    if (this.manager.shifting) {\n      return;\n    }\n    if (this.onHoverHideCursor) {\n      if (this.manager.hovering(this)) {\n        this.manager.setHovered(this);\n        if (this.elem?.onHover?.indic && !this.hoverIndic) {\n          this.hoverIndic = new EngineObject();\n          const scale = this.elem.onHover.indic.scale ?? 1;\n          this.hoverIndic.size.set(this.size.x * scale, this.size.y * scale);\n          this.hoverIndic.tileInfo = this.manager.animation.getInfo(this.elem.onHover.indic.animation).tileInfos[0];\n          this.hoverIndic.pos.set(this.px, this.py);\n          const offset = this.elem?.gameObject?.offset ?? [0, 0];\n          this.addChild(this.hoverIndic, vec2(-offset[0], -offset[1]));\n          this.updated = false;\n        }\n      } else {\n        this.manager.setHovered(undefined);\n        if (this.elem?.onHover?.indic && this.hoverIndic) {\n          this.removeChild(this.hoverIndic);\n          this.hoverIndic.destroy();\n          this.hoverIndic = undefined;\n        }\n      }\n    }\n  }\n\n  selectIndic?: EngineObject;\n\n  showResourcesNearby() {\n    const home = this.elem?.settler ? this : this.elem?.worker ? this.home : this;\n    if (home) {\n      const range = this.manager.isResearched(\"expansion\", this.elem?.owner ?? 0) ? 2 : 1;\n      for (let y = -range; y <= range; y++) {\n        for (let x = -range; x <= range; x++) {\n          if (Math.abs(x * y) < 4) {\n            if (this.elem?.building || home.px + x === this.px && home.py + y === this.py || this.canMoveTo(home.px + x, home.py + y)) {\n              this.showResources(home.px + x, home.py + y, this.elem?.owner);\n            }\n          }\n        }\n      }\n      home?.hideBars();\n    }\n  }\n\n  async onSelectChange() {\n    if (this.manager.selected === this) {\n      if (this.elem?.selected?.indic && !this.selectIndic) {\n        this.selectIndic = new EngineObject();\n        const scale = this.elem.selected.indic.scale ?? 1;\n        this.selectIndic.size.set(this.size.x * scale, this.size.y * scale);\n        this.selectIndic.renderOrder = this.renderOrder - .1;\n        this.selectIndic.tileInfo = this.manager.animation.getInfo(this.elem.selected.indic.animation).tileInfos[0];\n        const offset = this.elem?.gameObject?.offset ?? [0, 0];\n        this.addChild(this.selectIndic, vec2(-offset[0], -offset[1]));\n        this.selectIndic.pos.set(this.px, this.py);\n        if (!this.elem?.owner) {\n          this.selectIndic.color = new Color(1, 0, 0, 1);\n        }\n\n        if (this.manager.isAiPlayer(this.elem?.owner)) {\n          if (await this.canAct() && this.manager.isRevealed(this.px, this.py)) {\n            this.manager.thinker?.think(this);\n          }\n          return;\n        }\n\n        //  show move options\n        this.showActionOptions();\n        if (!this.moving) {\n          const resourcesFloating = Date.now() - (this.floatResources ?? 0) < 2000;\n\n          if ((this.elem?.settler || this.elem?.worker) && !resourcesFloating) {\n            if (!this.elem?.building && this.elem?.harvesting) {\n              this.showResources(this.px, this.py, this.elem?.owner);\n            } else {\n              this.showResourcesNearby();\n            }\n          }\n        }\n        this.hideBars();\n      }\n    } else {\n      if (this.elem?.selected?.indic && this.selectIndic) {\n        this.selectIndic.destroy();\n        this.selectIndic = undefined;\n      }\n      this.hideMoveOptions();\n      if (this.elem?.animation) {\n        this.hideResources();\n      }\n      this.refreshBars();\n    }\n  }\n\n  async showActionOptions() {\n    if (this.hasMove() && !await this.manager.checkCondition(this.elem?.move?.disabled, this)) {\n      this.addMoveOptions(this.elem?.move?.distance ?? 1, vec2(this.px, this.py));\n    }\n    if (this.hasAttack() && await this.canAttack()) {\n      this.addAttackOptions(this.elem?.attack?.range ?? 1);\n    }\n  }\n\n  hideMoveOptions() {\n    if (this.moveOptions) {\n      Object.values(this.moveOptions).forEach(moveOption => moveOption.destroy());\n      delete this.moveOptions;\n    }\n    if (this.attackOptions) {\n      Object.values(this.attackOptions).forEach(attackOption => attackOption.destroy());\n      delete this.attackOptions;\n    }\n  }\n\n  addMoveOptions(movePoints: number, from: Vector2, revealPotential = 0, distanceTravelled = 0) {\n    if (!movePoints) {\n      return;\n    }\n    const DIRECTIONS = [\n      [-1, 0], [0, -1], [1, 0], [0, 1],\n      [-1, -1], [1, -1], [-1, 1], [1, 1],\n    ];\n    const froms: [Vector2, number, number][] = [];\n    DIRECTIONS.forEach(([dx, dy]) => {\n      if (!this.canMoveTo(from.x + dx, from.y + dy)) {\n        return;\n      }\n      const newDistanceTravelled = distanceTravelled + Math.sqrt(dx * dx + dy * dy);\n      const existingMoveOption = this.moveOptions?.[`${from.x + dx}_${from.y + dy}`];\n      if (existingMoveOption) {\n        const canReveal = revealPotential + this.manager.countRevealPotential(from.x + dx, from.y + dy);\n        let shouldReplace = false;\n        if (existingMoveOption.movePoints < movePoints) {\n          //  this route takes less points\n          shouldReplace = true;\n        } else if (existingMoveOption.movePoints === movePoints) {\n          if (existingMoveOption.distanceTravelled > newDistanceTravelled) {\n            //  this route takes same points but less distance\n            shouldReplace = true;\n          } else if (existingMoveOption.distanceTravelled === newDistanceTravelled && existingMoveOption.canReveal < canReveal) {\n            //  this route takes same points and distance but more revealing\n            shouldReplace = true\n          }\n        }\n        if (shouldReplace) {\n          existingMoveOption.canReveal = canReveal;\n          existingMoveOption.from = from;\n          existingMoveOption.movePoints = movePoints;\n          existingMoveOption.distanceTravelled = newDistanceTravelled;\n          froms.push([vec2(from.x + dx, from.y + dy), canReveal, newDistanceTravelled]);\n        }\n        return;\n      }\n\n      const obj = new MoveOption(\n        from.x + dx,\n        from.y + dy,\n        from,\n        revealPotential + this.manager.countRevealPotential(from.x + dx, from.y + dy),\n        movePoints,\n        newDistanceTravelled,\n        this.canLandOn(from.x + dx, from.y + dy),\n      );\n      obj.size.set(this.size.x, this.size.y);\n      if (this.elem?.selected?.moveIndic) {\n        obj.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.selected.moveIndic.animation));\n      } else {\n        obj.color = new Color(0, 0, 0, .3);\n        obj.tileInfo = this.tileInfo;\n      }\n      if (!obj.canLand) {\n        obj.color = new Color(0, 0, 0, 0);\n      }\n      const unit = this.manager.unitAt(from.x + dx, from.y + dy);\n      if (unit) {\n        obj.color = new Color(1, 0, 0, .5);\n      }\n      const offset = this.elem?.gameObject?.offset ?? [0, 0];\n      this.addChild(obj, vec2((from.x + dx - this.px) - offset[0], (from.y + dy - this.py) - offset[1]));\n      if (!this.moveOptions) {\n        this.moveOptions = {};\n      }\n      this.moveOptions[`${from.x + dx}_${from.y + dy}`] = obj;\n      froms.push([vec2(from.x + dx, from.y + dy), obj.canReveal, obj.distanceTravelled]);\n      this.updated = false;\n    });\n    froms.forEach(([from, revealing, newDistanceTravelled]) => this.addMoveOptions(movePoints - 1, from, revealing, newDistanceTravelled));\n  }\n\n  addAttackOptions(range: number) {\n    if (!range) {\n      return;\n    }\n    for (let y = -range; y <= range; y++) {\n      for (let x = -range; x <= range; x++) {\n        if (this.canAttackAt(this.px + x, this.py + y)) {\n          const obj = new AttackOption(this.px + x, this.py + y);\n          obj.size.set(this.size.x, this.size.y);\n          if (this.elem?.selected?.moveIndic) {\n            obj.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.selected.moveIndic.animation));\n          } else {\n            obj.color = new Color(0, 0, 0, .3);\n            obj.tileInfo = this.tileInfo;\n          }\n          const unit = this.manager.unitAt(this.px + x, this.py + y);\n          if (unit) {\n            obj.color = new Color(1, 0, 0, .5);\n          }\n          this.addChild(obj, vec2(x, y));\n          if (!this.attackOptions) {\n            this.attackOptions = {};\n          }\n          this.attackOptions[`${this.px + x}_${this.py + y}`] = obj;\n          this.updated = false;\n        }\n      }\n    }\n  }\n\n  getFrame(animInfo?: AnimationInfo) {\n    if (!animInfo) {\n      return 0;\n    }\n    const timeOffset = this.talkingTime ?? this.bornTime;\n    const globalFrame = Math.floor((Date.now() + timeOffset) / (1000 / this.frameRate));\n    return animInfo?.animation?.once ? Math.min(globalFrame, animInfo.tileInfos.length - 1) : globalFrame % (animInfo.tileInfos.length);\n  }\n\n  getTileInfoAnimate(animInfo: AnimationInfo) {\n    const t = this.getFrame(animInfo);\n    return animInfo?.tileInfos?.[t];\n  }\n\n  checkResourceCaps() {\n    const elem = this.elem;\n    if (!elem?.resourcesAccumulated) {\n      return;\n    }\n    Object.entries(elem.resourcesAccumulated).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      const maxCapacity = this.resourceCapacity(k);\n      if (value > maxCapacity) {\n        if (!elem.resourcesCapped) {\n          elem.resourcesCapped = {};\n        }\n        elem.resourcesCapped[k] = value;\n      }\n    });\n  }\n\n  calculateUnitResourcesRevenue() {\n    const resources: Resources = {\n      wheat: 0,\n      wood: 0,\n      trade: 0,\n      gold: 0,\n      brain: 0,\n    };\n    this.unitsSupported.forEach(unit => {\n      const res = unit.calculateUnitResourcesRevenue();\n      Object.entries(res).forEach(([key, value]) => {\n        resources[key as keyof Resources] += value;\n      });\n    });\n    Object.entries(resources).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      if (this.manager.scene.resources[k]?.global) {\n        return;\n      }\n      resources[k] += value;\n    });\n    return resources;\n  }\n\n  accumulateResources(resources: Resources) {\n    if (this.doomed) {\n      return;\n    }\n    if (this.home) {\n      this.home.accumulateResources(resources);\n      return;\n    }\n    const elem = this.elem;\n    if (!elem) {\n      return;\n    }\n    Object.entries(resources).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      if (this.manager.scene.resources[k]?.global) {\n        return;\n      }\n      if (!elem.resourcesAccumulated) {\n        elem.resourcesAccumulated = {};\n      }\n      if (!elem.resourcesCapped?.[k]) {\n        elem.resourcesAccumulated[k] = (elem.resourcesAccumulated[k] ?? 0) + value;\n      }\n    });\n    if (elem.type === \"house\" && elem.resourcesAccumulated) {\n      if (this.manager.isResearched(\"productivity\", this.manager.getPlayer())) {\n        elem.resourcesAccumulated.wood = (elem.resourcesAccumulated.wood ?? 0) + 1;\n      }\n\n      if ((elem.resourcesAccumulated.wheat ?? 0) >= this.nextLevelCost() && this.canUpdateLevel()) {\n        elem.resourcesAccumulated.wheat = (elem.resourcesAccumulated.wheat ?? 0) - this.nextLevelCost();\n        this.updateLevel((elem.level ?? 0) + 1);\n        this.updated = false;\n      }\n    }\n  }\n\n  updateResource(resource: keyof Resources, value: number | ((value: number) => number)) {\n    if (!this.elem) {\n      return;\n    }\n    if (!this.elem.resourcesAccumulated) {\n      this.elem.resourcesAccumulated = {};\n    }\n    const resObj = this.manager.getResourceType(resource);\n    const previousVal = resObj?.global ? this.manager.getPlayerResource(resource, this.elem.owner ?? 0) : this.elem.resourcesAccumulated[resource] ?? 0;\n    const val = typeof value === \"function\" ? value(previousVal) : value;\n    if (resObj?.global) {\n      if (this.elem.owner) {\n        this.manager.updateResource(resource, val, this.elem.owner);\n      }\n      return;\n    }\n    this.elem.resourcesAccumulated[resource] = val;\n    if (this.elem.resourcesCapped && val < this.resourceCapacity(resource)) {\n      this.elem.resourcesCapped[resource] = 0;\n    }\n    this.updated = false;\n  }\n\n  async fixCows() {\n    // cows number can't be higher than house level\n    const cows = await this.countUnitSupport(\"cow\");\n    const maxCows = this.elem?.level ?? 0;\n    if (cows > maxCows) {\n      let toRemove = cows - maxCows;\n      await this.manager.iterateRevealedCells(async (obj) => {\n        if (toRemove <= 0) {\n          return;\n        }\n        if (obj.elem?.name === \"cow\" && obj.home === this) {\n          obj.doom(true);\n          toRemove--;\n        }\n      });\n    }\n  }\n\n  canUpdateLevel() {\n    return this.elem?.type === \"house\" && (this.elem?.level ?? 0) < (this.elem?.maxLevel ?? 999);\n  }\n\n  async updateLevel(level: number) {\n    if (this.elem?.type === \"house\") {\n      this.elem.level = level;\n      await this.fixCows();\n      await this.refreshLabel();\n      this.updated = false;\n    }\n  }\n\n  nextLevelCost() {\n    return this.resourceCapacity(\"wheat\");\n  }\n\n  resourceCapacity(resource: keyof Resources) {\n    const capacity = (this.elem?.level ?? 0) + 1;\n    return capacity * 10;\n  }\n\n  async countUnitSupport(unit: string) {\n    let count = 0;\n    await this.manager.iterateRevealedCells(async (obj) => {\n      if (obj.elem?.name === unit && obj.home === this) {\n        count++;\n      }\n    });\n    return count;\n  }\n\n  update() {\n    super.update();\n    if (this.updated && !this.elem?.dynamic && !this.elem?.spread?.moving && !this.doomed && Date.now() - this.bornTime < 1000 && !this.floatResources) {\n      return;\n    }\n    // if (this.manager.inUI) {\n    //   return;\n    // }\n    const nowHoverered = this.manager.hovering(this);\n    if (this.hovered !== nowHoverered) {\n      this.hovered = nowHoverered;\n      this.onHoverChange();\n    }\n    if (this.hoverIndic && this.elem?.onHover?.indic) {\n      this.hoverIndic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.onHover.indic.animation));\n    }\n    if (this.selectIndic && this.elem?.selected?.indic) {\n      this.selectIndic.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.selected.indic.animation));\n    }\n    Object.values(this.moveOptions ?? {}).forEach(moveOption => {\n      if (moveOption.animation) {\n        moveOption.tileInfo = this.getTileInfoAnimate(moveOption.animation);\n      }\n    });\n    Object.values(this.attackOptions ?? {}).forEach(option => {\n      if (option.animation) {\n        option.tileInfo = this.getTileInfoAnimate(option.animation);\n      }\n    });\n    if (this.mouseFollower) {\n      let px = mousePos.x + this.mouseFollower.offset.x;\n      let py = mousePos.y + this.mouseFollower.offset.y;\n      if (this.mouseFollower.snap) {\n        px = Math.round(px / this.mouseFollower.snap) * this.mouseFollower.snap;\n        py = Math.round(py / this.mouseFollower.snap) * this.mouseFollower.snap;\n      }\n      this.setPosition(px, py);\n    }\n    const offset = this.elem?.gameObject?.offset ?? [0, 0];\n    const dx = (this.px + offset[0]) - this.pos.x;\n    const dy = (this.py + offset[1]) - this.pos.y;\n    const talking = this.talkingTime && Date.now() < this.talkingTime;\n    const animInfo = this.attackAnimationInfo && this.attackTarget\n      ? this.attackAnimationInfo\n      : this.harvestAnimationInfo && this.elem?.harvesting\n        ? this.harvestAnimationInfo\n        : this.moveAnimationInfo && (dx || dy)\n          ? this.moveAnimationInfo\n          : this.selectedAnimationInfo && this.isRevealed() && (this.manager.selected === this || talking)\n            ? this.selectedAnimationInfo\n            : this.hoveredAnimationInfo && this.manager.hovering(this)\n              ? this.hoveredAnimationInfo : this.animationInfo;\n\n    if (animInfo === this.animationInfo) {\n      if (Math.random() < .005) {\n        this.talkingTime = Date.now() + Math.random() * 3000;\n      }\n    }\n\n    if (animInfo) {\n      this.tileInfo = this.getTileInfoAnimate(animInfo);\n    }\n\n    if (dx || dy) {\n      const doMove = this.attackTarget || !animInfo?.airFramesSet || animInfo.airFramesSet?.has(this.getFrame(animInfo));\n      if (doMove) {\n        const immediate = !this.manager.isRevealed(this.px, this.py) && !this.manager.isRevealed(this.px + dx, this.py + dy);\n        this.moving = true;\n        if (dx * dx + dy * dy > .01) {\n          const dist = this.elem?.gameObject?.speed ? Math.sqrt(dx * dx + dy * dy) : 1;\n          const speed = immediate ? dist : Math.min(dist, this.attackTarget ? .2 : this.elem?.gameObject?.speed ?? .5);\n          this.pos.set(this.pos.x + dx / dist * speed, this.pos.y + dy / dist * speed);\n        } else {\n          this.pos.set(this.px + offset[0], this.py + offset[1]);\n        }\n      }\n    } else {\n      if (this.attackTarget) {\n        if (this.projectile) {\n          this.projectile.move();\n          if (this.projectile.landed()) {\n            const projectile = this.projectile;\n            this.projectile = undefined;\n            projectile.destroy();\n            this.finishAttack(this.attackTarget, true);\n          }\n        } else {\n          this.finishAttack(this.attackTarget);\n        }\n      } else if (this.moveQueue?.length) {\n        const dest = this.moveQueue.pop()!;\n        this.moveUnitTo(dest.x, dest.y);\n      } else if (this.moving) {\n        this.moving = false;\n        if (this.onDone) {\n          const onDone = this.onDone;\n          this.onDone = undefined;\n          onDone(this);\n        } else if (!this.hasPendingActions) {\n          if (!this.retaliating) {\n            this.spendMove();\n          } else {\n            this.retaliating = false;\n          }\n        }\n      }\n    }\n\n    if (this.elem?.type === \"cursor\") {\n      if (mouseWasReleased(0)) {\n        this.manager.mousePosDown = undefined;\n        this.manager.onTap(this.px, this.py, mousePos.x, mousePos.y);\n      }\n    }\n\n\n    const coLayers = this.manager.scene?.colayers;\n    let renderOrder = Math.round(-this.py) + (this.manager.scene.layers?.[this.elem?.type ?? \"\"] ?? 100) * 10000 + (coLayers?.[this.elem?.type ?? \"\"] ?? 0) * .001;\n    if (this.renderOrder !== renderOrder || !this.updated) {\n      this.renderOrder = renderOrder;\n      this.decors.forEach((decor) => {\n        decor.renderOrder = this.renderOrder + (this.elem?.spread?.behind ? -.1 : .1);\n      });\n      if (this.moveOptions) {\n        Object.values(this.moveOptions).forEach(moveOption => moveOption.renderOrder = this.renderOrder - .1);\n      }\n      if (this.attackOptions) {\n        Object.values(this.attackOptions).forEach(option => option.renderOrder = this.renderOrder - .1);\n      }\n      if (this.projectile) {\n        this.projectile.renderOrder = this.renderOrder + .1;\n      }\n\n      if (this.shadow) {\n        this.shadow.renderOrder = this.renderOrder - .1;\n      }\n      if (this.hoverIndic) {\n        this.hoverIndic.renderOrder = this.renderOrder - .1;\n      }\n      this.labels?.forEach(label => label.renderOrder = this.renderOrder + .2);\n      this.resources.forEach((resource) => resource.renderOrder = 100000 + (resource.tileInfo ? .1 : -.1));\n      this.resourceBars.forEach((resource) => resource.renderOrder = 100000 + (resource.tileInfo ? .1 : -.1));\n    }\n\n    if (this.elem?.spread?.moving && Math.random() < this.elem.spread.moving) {\n      this.decors.forEach((decor) => {\n        const time = Date.now() - decor.bornTime;\n        const dx = Math.sin(time / 5000 * decor.motionX) * .2;\n        const dy = Math.cos(time / 5000 * decor.motionY) * .2;\n        decor.localPos.set(decor.initialPos.x + dx, decor.initialPos.y + dy);\n      });\n    }\n\n    if (this.elem?.clearCloud && !this.clearedCloud) {\n      const expansion = this.elem?.type === \"house\" && this.manager.isResearched(\"expansion\", this.elem?.owner ?? 0);\n      const SIZE = expansion ? 2 : 1, LIMIT = 2;\n      for (let y = -SIZE; y <= SIZE; y++) {\n        for (let x = -SIZE; x <= SIZE; x++) {\n          if (Math.abs(x * y) < LIMIT * LIMIT) {\n            this.manager.clearCloud(this.px + x, this.py + y);\n          }\n        }\n      }\n      this.clearedCloud = true;\n    }\n\n    this.updated = true;\n\n    if (this.elem?.dynamic && Date.now() - this.bornTime < 1000) {\n      this.updateSize();\n    }\n\n    if (this.doomed) {\n      this.decors.forEach((decor: any) => {\n        const time = Date.now() - decor.doomTime;\n        if (time > 0) {\n          decor.size.set(decor.size.x * .9, decor.size.y * .9);\n        }\n      });\n    }\n\n    if (this.floatResources) {\n      if (Date.now() - this.floatResources > 2000) {\n        this.floatResources = undefined;\n        this.hideResources();\n        if (this.manager.selected === this) {\n          this.showResourcesNearby();\n        }\n      } else {\n        this.resources.forEach(res => res.localPos.y += .005);\n      }\n    }\n\n    if (this.damageTime) {\n      const timeLeft = this.damageTime - Date.now();\n      if (timeLeft >= 0) {\n        this.angle = Math.sin(Date.now() / 10) * timeLeft / 5000;\n        this.color = new Color(2, 0, 0, timeLeft / 1000);\n      } else {\n        this.damageTime = undefined;\n        this.angle = 0;\n        this.color = new Color(1, 1, 1, 1);\n      }\n    }\n  }\n\n  get home(): GameObject | undefined {\n    if (this.elem?.home && !this.elem?.building) {\n      return this.manager.grid[GameObject.getTag(\"house\", this.elem.home[0], this.elem.home[1])] ?? undefined;\n    }\n    return undefined;\n  }\n\n  doomed?: boolean = false;\n  doom(immediate?: boolean) {\n    if (this.doomed) {\n      return;\n    }\n    this.doomed = true;\n    if (this.home) {\n      this.home.unitsSupported.delete(this);\n    }\n    this.size.set(0, 0);\n    const destroy = () => {\n      if (this.manager.grid[this.getTag()] === this) {\n        delete this.manager.grid[this.getTag()];\n      }\n\n      this.decors.forEach((decor) => {\n        decor.destroy();\n      });\n      this.labels?.forEach(label => label.destroy());\n      this.resources.forEach(resource => resource.destroy());\n      this.resourceBars.forEach(bar => bar.destroy());\n      if (this.shadow) {\n        this.shadow.destroy();\n      }\n      this.destroy();\n    };\n\n    const DURATION = immediate ? 10 : 300;\n    setTimeout(destroy, DURATION * 2);\n    if (!immediate) {\n      this.decors.forEach((decor) => {\n        decor.doomTime = Date.now() + DURATION * Math.random();\n      });\n    }\n  }\n\n  updateLabel(showLabel: boolean) {\n    if (showLabel) {\n      this.refreshLabel();\n      this.refreshBars();\n      this.refreshAlpha();\n    } else {\n      this.labels.forEach(label => label.destroy());\n      this.labels.length = 0;\n      this.resourceBars.forEach(bar => bar.destroy());\n      this.resourceBars.length = 0;\n      this.color = new Color(1, 1, 1, 1);\n    }\n  }\n\n  getSurroundingCells(vectorCondition: (cell: Vector2) => boolean) {\n    const set: Set<Vector2> = new Set();\n    for (let y = -1; y <= 1; y++) {\n      for (let x = -1; x <= 1; x++) {\n        const vec = vec2(this.px + x, this.py + y);\n        if (vectorCondition(vec)) {\n          set.add(vec);\n        }\n      }\n    }\n    return set;\n  }\n\n  findNearbyFoe(distance: number = 1) {\n    return this.findNearby((cell) => {\n      return cell.elem?.type === \"unit\" && cell.elem?.owner !== this.elem?.owner;\n    }, distance);\n  }\n\n  async findNearby(cellCondition: (cell: GameObject) => boolean, distance: number = 1) {\n    const set: Set<GameObject> = new Set();\n    for (let y = -distance; y <= distance; y++) {\n      for (let x = -distance; x <= distance; x++) {\n        if (x === 0 && y === 0) {\n          continue;\n        }\n        await this.manager.iterateGridCell(this.px + x, this.py + y, async (cell) => {\n          if (cellCondition(cell)) {\n            set.add(cell);\n          }\n        });\n      }\n    }\n    return set;\n  }\n\n  finalDestination(): Vector2 {\n    return this.moveQueue?.[0] ?? vec2(this.px, this.py);\n  }\n\n  canAfford(resources?: Resources): boolean {\n    if (!resources) {\n      return true;\n    }\n    return Object.entries(resources).every(([key, value]) => {\n      const res = this.manager.getResourceType(key as keyof Resources);\n      if (res?.global) {\n        return this.manager.getPlayerResource(key as keyof Resources, this.elem?.owner ?? 0) >= value;\n      } else {\n        return (this.elem?.resourcesAccumulated?.[key as keyof Resources] ?? 0) >= value;\n      }\n    });\n  }\n\n  turnAround() {\n    if (!this.elem?.gameObject) {\n      return;\n    }\n    this.elem.gameObject.lastDx = -(this.elem.gameObject.lastDx ?? 1);\n    this.updateSize();\n  }\n\n  spend(resources?: Resources) {\n    if (!resources) {\n      return;\n    }\n    const resourcesAccumulated = this.elem?.resourcesAccumulated;\n    Object.entries(resources).forEach(([key, value]) => {\n      const k = key as keyof Resources;\n      const res = this.manager.getResourceType(k);\n      if (res?.global) {\n        this.manager.updateResource(k, amount => Math.max(0, amount - value), this.elem?.owner ?? 0);\n      } else {\n        if (resourcesAccumulated?.[k]) {\n          resourcesAccumulated[k] = Math.max(0, resourcesAccumulated[k] - value);\n        }\n      }\n    });\n  }\n\n  attack(target: GameObject, retaliationDamage?: number) {\n    if (!target || target.elem?.owner === this.elem?.owner) {\n      return;\n    }\n    this.attackTarget = target;\n    this.attackOrigin = vec2(this.px, this.py);\n    this.px = target.px;\n    this.py = target.py;\n    this.retaliationDamage = retaliationDamage;\n  }\n\n  attackRange(target: GameObject, retaliationDamage?: number) {\n    if (!target || target.elem?.owner === this.elem?.owner) {\n      return;\n    }\n    this.attackTarget = target;\n    this.attackOrigin = vec2(this.px, this.py);\n    this.retaliationDamage = this.retaliationDamage;\n    if (this.projectile) {\n      this.projectile.destroy();\n    }\n    this.projectile = new Projectile(this.pos, target.pos, .05);\n    if (this.elem?.attack?.projectile) {\n      this.projectile.tileInfo = this.getTileInfoAnimate(this.manager.animation.getInfo(this.elem.attack.projectile));\n    }\n  }\n\n  finishAttack(target: GameObject, done: boolean = false) {\n    const targetX = target.px, targetY = target.py;\n    const { retaliation, death } = !this.retaliating\n      ? target.takeDamageAndCheckDeath(this.elem?.attack?.damage ?? 1, this)\n      : target.takeDirectDamageAndCheckDeath(this.retaliationDamage);\n    this.px = this.attackOrigin?.x ?? this.px;\n    this.py = this.attackOrigin?.y ?? this.py;\n    this.attackTarget = undefined;\n    this.attackOrigin = undefined;\n    if (!this.retaliating) {\n      this.spendAttack();\n      if (death) {\n        if (!this.elem?.attack?.range) {\n          this.setPosition(targetX, targetY);\n        }\n        this.doneMoving();\n      } else {\n        // check distance\n        const dx = this.px - targetX;\n        const dy = this.py - targetY;\n        const distance = Math.max(Math.abs(dx), Math.abs(dy));\n        if (distance <= (target?.elem?.attack?.range ?? 1)) {\n          //  retaliate\n          this.hasPendingActions = true;\n          this.onDone = (self: GameObject) => {\n            setTimeout(() => {\n              target.retaliating = true;\n              target.onDone = (target: GameObject) => {\n                target.retaliating = false;\n                self.hasPendingActions = false;\n                self.doneMoving();\n              };\n              const rangedAttack = target?.elem?.attack?.range;\n              if (rangedAttack) {\n                target.attackRange(self, retaliation);\n              } else {\n                target.attack(self, retaliation);\n              }\n            }, 1000);\n          };\n          if (done) {\n            const onDone = this.onDone;\n            this.onDone = undefined;\n            onDone(this);\n          }\n        } else {\n          this.doneMoving();\n        }\n      }\n    } else {\n      target.doneMoving();  //  give back control to target\n    }\n  }\n\n  getDefenseBonus() {\n    let bonus = 1;\n    this.manager.iterateGridCell(this.px, this.py, async (cell) => {\n      if (cell.elem?.defenseBonus) {\n        bonus *= cell.elem.defenseBonus;\n      }\n    });\n    return bonus;\n  }\n\n  healthPercent() {\n    return this.elem?.hitpoints ? this.elem.hitpoints / (this.elem.maxHitPoints ?? 1) : 1;\n  }\n\n  getDefense() {\n    return this.elem?.attack?.defense ?? 1;\n  }\n\n  takeDirectDamageAndCheckDeath(damage: number = 0) {\n    if (this.elem) {\n      this.damageTime = Date.now() + damage * 100;\n      this.elem.hitpoints = (this.elem.hitpoints ?? 1) - damage;\n      if (this.elem.hitpoints > 0) {\n        this.refreshLabel();\n      } else {\n        this.doom(true);\n        return { retaliation: 0, death: true };\n      }\n    }\n    return { retaliation: 0, death: false };\n  }\n\n  takeDamageAndCheckDeath(attack: number, attacker: GameObject) {\n    // attackForce = attacker.attack * (attacker.health / attacker.maxHealth)\n    // defenseForce = defender.defense * (defender.health / defender.maxHealth) * defenseBonus \n    // totalDamage = attackForce + defenseForce \n    // attackResult = roundUp((attackForce / totalDamage) * attacker.attack * 4.5) \n    // defenseResult = roundDown((defenseForce / totalDamage) * defender.defense * 4.5)    \n\n    if (this.elem) {\n      const attackForce = attack * attacker.healthPercent();\n      const defenseForce = this.getDefense() * this.healthPercent() * this.getDefenseBonus();\n      const totalDamage = attackForce + defenseForce;\n      const attackResult = Math.ceil((attackForce / totalDamage) * attack * 4.5);\n      const defenseResult = Math.ceil((defenseForce / totalDamage) * this.getDefense() * 4.5);\n\n      this.damageTime = Date.now() + attackResult * 100;\n      this.elem.hitpoints = (this.elem.hitpoints ?? 1) - attackResult;\n      if (this.elem.hitpoints > 0) {\n        this.refreshLabel();\n        return { retaliation: defenseResult, death: false };\n      } else {\n        this.doom(true);\n        return { retaliation: 0, death: true };\n      }\n    }\n    return { retaliation: 0, death: false };\n  }\n}\n",
  "export const SIZE: number = 30;\nexport const DEBUG: boolean = window.location.search.includes(\"debug\");\nexport const READY: boolean = true;\n",
  "import { GameObject } from \"../core/objects/game-object\";\nimport type { Manager } from \"../core/manager\";\nimport type { Resources } from \"../definition/resources\";\nimport { DEBUG, READY } from \"../content/constant\";\nimport type { Research } from \"../definition/research\";\nimport { setCameraScale } from \"../lib/littlejs\";\nimport type { Elem } from \"../definition/elem\";\n\nconst SPRITESHEET_COLS = 30;\n\nspeechSynthesis.getVoices();\n\nexport class Hud {\n  ui: HTMLDivElement = document.createElement(\"div\");\n  bg: HTMLDivElement = document.createElement(\"div\");\n  buttonsOverlay: HTMLDivElement = document.createElement(\"div\");\n  quickActionOverlay: HTMLDivElement = document.createElement(\"div\");\n  resourceOverlay: HTMLDivElement = document.createElement(\"div\");\n  blocker: HTMLDivElement = document.createElement(\"div\");\n  dialog: HTMLDivElement = document.createElement(\"div\");\n  cat: HTMLImageElement = document.createElement(\"img\");\n  readonly itemsToDestroy = new Set<() => void>();\n  nextButton: HTMLButtonElement = document.createElement(\"button\");\n  endButton: HTMLButtonElement = document.createElement(\"button\");\n  researchList: HTMLDivElement = document.createElement(\"div\");\n  researchInfoDiv: HTMLDivElement = document.createElement(\"div\");\n  researchPopup: HTMLDivElement = document.createElement(\"div\");\n  spaceshipPopup: HTMLDivElement = document.createElement(\"div\");\n  music: HTMLAudioElement = document.createElement(\"audio\");\n  updated = false;\n  onKnob = false;\n\n  constructor(readonly manager: Manager) {\n  }\n\n  initialize() {\n    this.ui.id = \"hud\";\n    this.ui.classList.add(\"hud\");\n    document.body.appendChild(this.ui);\n    this.ui.addEventListener(\"mouseover\", e => {\n      this.manager.inUI = true;\n      this.manager.cursor?.hide();\n    });\n    this.ui.addEventListener(\"mouseout\", e => {\n      this.manager.inUI = false;\n      this.manager.refreshCursor();\n    });\n    this.ui.style.display = \"none\";\n\n    this.bg.style.width = \"100%\";\n    this.bg.style.height = \"100px\";\n    this.bg.style.position = \"absolute\";\n    this.bg.style.zIndex = \"100\";\n    this.bg.style.bottom = \"-100px\";\n    this.bg.style.left = \"0\";\n    this.bg.style.background = \"rgba(0, 0, 0, 1)\";\n    this.bg.style.transition = \"bottom 0.2s\";\n    this.bg.style.display = \"flex\";\n    this.bg.style.color = \"snow\";\n    this.bg.style.flexDirection = \"row\";\n    this.ui.appendChild(this.bg);\n\n    this.quickActionOverlay.style.position = \"absolute\";\n    this.quickActionOverlay.style.zIndex = \"100\";\n    this.quickActionOverlay.style.left = \"0\";\n    this.quickActionOverlay.style.bottom = \"-100px\";\n    this.quickActionOverlay.style.display = \"flex\";\n    this.quickActionOverlay.style.flexDirection = \"row\";\n    this.quickActionOverlay.style.transition = \"bottom 0.2s\";\n    this.ui.appendChild(this.quickActionOverlay);\n\n    this.buttonsOverlay.style.bottom = \"0\";\n    this.buttonsOverlay.style.right = \"0\";\n    this.buttonsOverlay.style.zIndex = \"100\";\n    this.buttonsOverlay.style.position = \"absolute\";\n    this.buttonsOverlay.style.display = \"flex\";\n    this.buttonsOverlay.style.flexDirection = \"column\";\n    this.buttonsOverlay.style.justifyContent = \"right\";\n    this.buttonsOverlay.style.gap = \"10px\";\n    this.buttonsOverlay.style.padding = \"10px\";\n    this.buttonsOverlay.style.transition = \"right 0.2s\";\n    this.buttonsOverlay.style.display = \"none\";\n    this.ui.appendChild(this.buttonsOverlay);\n    this.setHudButtons();\n\n    this.resourceOverlay.style.position = \"absolute\";\n    this.resourceOverlay.style.top = \"0\";\n    this.resourceOverlay.style.left = \"0\";\n    this.resourceOverlay.style.zIndex = \"100\";\n    this.resourceOverlay.style.display = \"none\";\n    this.ui.appendChild(this.resourceOverlay);\n\n    this.blocker.style.width = \"100%\";\n    this.blocker.style.height = \"100%\";\n    this.blocker.style.position = \"absolute\";\n    this.blocker.style.zIndex = \"100\";\n    this.blocker.style.top = \"0\";\n    this.blocker.style.left = \"0\";\n    this.blocker.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n    this.blocker.style.display = \"none\";\n    this.ui.appendChild(this.blocker);\n\n    this.dialog.style.position = \"absolute\";\n    this.dialog.style.zIndex = \"100\";\n    this.dialog.style.bottom = \"10px\";\n    this.dialog.style.left = \"50%\";\n    this.dialog.style.transform = \"translate(-50%, 0)\";\n    this.dialog.style.width = \"80%\";\n    this.dialog.style.height = \"200px\";\n    this.dialog.style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n    this.dialog.style.color = \"snow\";\n    this.dialog.style.flexDirection = \"column\";\n    this.dialog.style.justifyContent = \"center\";\n    this.dialog.style.alignItems = \"center\";\n    this.dialog.style.textAlign = \"center\";\n    this.dialog.style.textTransform = \"uppercase\";\n    this.dialog.style.whiteSpace = \"pre-wrap\";\n    this.dialog.style.display = \"none\";\n    this.dialog.style.pointerEvents = \"none\";\n    this.ui.appendChild(this.dialog);\n    //  add cat figure on dialog\n    this.cat.style.position = \"absolute\";\n    this.cat.style.bottom = \"0\";\n    this.cat.style.left = \"0\";\n    this.cat.src = \"./assets/cat.png\";\n    this.cat.style.display = \"none\";\n    this.cat.style.zIndex = \"100\";\n    this.ui.appendChild(this.cat);\n\n    this.researchList.style.position = \"absolute\";\n    this.researchList.style.zIndex = \"100\";\n    this.researchList.style.top = \"50%\";\n    this.researchList.style.left = \"50%\";\n    this.researchList.style.transform = \"translate(-50%, -50%)\";\n    this.researchList.style.width = \"400px\";\n    this.researchList.style.height = \"200px\";\n    this.researchList.style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n    this.researchList.style.color = \"snow\";\n    this.researchList.style.flexDirection = \"column\";\n    this.researchList.style.justifyContent = \"center\";\n    this.researchList.style.alignItems = \"center\";\n    this.researchList.style.textAlign = \"center\";\n    this.researchList.style.textTransform = \"uppercase\";\n    this.researchList.style.cursor = \"pointer\";\n    this.researchList.style.display = \"none\";\n    this.ui.appendChild(this.researchList);\n\n    this.researchInfoDiv.style.position = \"absolute\";\n    this.researchInfoDiv.style.zIndex = \"100\";\n    this.researchInfoDiv.style.top = \"10px\";\n    this.researchInfoDiv.style.right = \"10px\";\n    this.researchInfoDiv.style.width = \"200px\";\n    this.researchInfoDiv.style.height = \"60px\";\n    this.researchInfoDiv.style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n    this.researchInfoDiv.style.color = \"snow\";\n    this.researchInfoDiv.style.flexDirection = \"column\";\n    this.researchInfoDiv.style.justifyContent = \"center\";\n    this.researchInfoDiv.style.alignItems = \"center\";\n    this.researchInfoDiv.style.textAlign = \"center\";\n    this.researchInfoDiv.style.textTransform = \"uppercase\";\n    this.researchInfoDiv.style.display = \"none\";\n    this.ui.appendChild(this.researchInfoDiv);\n\n    this.researchPopup.style.position = \"absolute\";\n    this.researchPopup.style.zIndex = \"100\";\n    this.researchPopup.style.top = \"50%\";\n    this.researchPopup.style.left = \"50%\";\n    this.researchPopup.style.transform = \"translate(-50%, -50%)\";\n    this.researchPopup.style.width = \"800px\";\n    this.researchPopup.style.height = \"600px\";\n    this.researchPopup.style.backgroundImage = \"url(./assets/researched.png)\";\n    this.researchPopup.style.backgroundSize = \"cover\";\n    // this.researchPopup.style.display = \"none\";\n    this.researchPopup.style.pointerEvents = \"none\";\n    this.researchPopup.style.opacity = \"0\";\n    this.researchPopup.style.transition = \"opacity .2s\";\n    this.researchPopup.style.display = \"none\";\n\n    this.spaceshipPopup.style.position = \"absolute\";\n    this.spaceshipPopup.style.zIndex = \"100\";\n    this.spaceshipPopup.style.top = \"50%\";\n    this.spaceshipPopup.style.left = \"50%\";\n    this.spaceshipPopup.style.transform = \"translate(-50%, -50%)\";\n    this.spaceshipPopup.style.width = \"800px\";\n    this.spaceshipPopup.style.height = \"600px\";\n    this.spaceshipPopup.style.backgroundImage = \"url(./assets/spaceship.png)\";\n    this.spaceshipPopup.style.backgroundSize = \"cover\";\n    this.spaceshipPopup.style.pointerEvents = \"none\";\n    this.spaceshipPopup.style.opacity = \"0\";\n    this.spaceshipPopup.style.transition = \"opacity .2s\";\n    this.spaceshipPopup.style.display = \"none\";\n\n    const researchImage = this.researchPopup.appendChild(document.createElement(\"div\"));\n    researchImage.id = \"researchImage\";\n    researchImage.style.position = \"absolute\";\n    researchImage.style.top = \"30%\";\n    researchImage.style.left = \"50%\";\n    researchImage.style.transform = \"translate(-50%, -50%) scale(3)\";\n    researchImage.style.transition = \"opacity 3s\";\n    researchImage.style.opacity = \"0\";\n    this.ui.appendChild(this.researchPopup);\n\n    const researchText = this.researchPopup.appendChild(document.createElement(\"div\"));\n    researchText.id = \"researchText\";\n    researchText.style.position = \"absolute\";\n    researchText.style.bottom = \"10px\";\n    researchText.style.left = \"50%\";\n    researchText.style.transform = \"translate(-50%, 0)\";\n    researchText.style.width = \"80%\";\n    researchText.style.height = \"100px\";\n    researchText.style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n    researchText.style.color = \"snow\";\n    researchText.style.flexDirection = \"column\";\n    researchText.style.justifyContent = \"center\";\n    researchText.style.alignItems = \"center\";\n    researchText.style.textAlign = \"center\";\n    researchText.style.textTransform = \"uppercase\";\n    researchText.style.display = \"flex\";\n    researchText.style.pointerEvents = \"none\";\n\n    const spaceshipText = this.spaceshipPopup.appendChild(document.createElement(\"div\"));\n    spaceshipText.id = \"spaceshipText\";\n    spaceshipText.style.position = \"absolute\";\n    spaceshipText.style.bottom = \"10px\";\n    spaceshipText.style.left = \"50%\";\n    spaceshipText.style.transform = \"translate(-50%, 0)\";\n    spaceshipText.style.width = \"80%\";\n    spaceshipText.style.height = \"100px\";\n    spaceshipText.style.backgroundColor = \"rgba(0, 0, 0, .7)\";\n    spaceshipText.style.color = \"snow\";\n    spaceshipText.style.flexDirection = \"column\";\n    spaceshipText.style.justifyContent = \"center\";\n    spaceshipText.style.alignItems = \"center\";\n    spaceshipText.style.textAlign = \"center\";\n    spaceshipText.style.textTransform = \"uppercase\";\n    spaceshipText.style.display = \"flex\";\n    spaceshipText.style.pointerEvents = \"none\";\n    spaceshipText.style.whiteSpace = \"pre-wrap\";\n    this.ui.appendChild(this.spaceshipPopup);\n\n    this.setupShortcutKeys();\n    this.initializeErrorBanner();\n    this.setupMusic();\n    this.setupQuickActions();\n  }\n\n  setupMusic() {\n    this.music.src = \"./assets/animal-anthem.mp3\";\n    this.music.loop = true;\n    this.music.preload = \"auto\";\n  }\n\n  setupShortcutKeys() {\n    document.addEventListener(\"keyup\", e => {\n      if (e.code === \"KeyE\") {\n        this.endButton.click();\n      }\n      if (e.code === \"KeyN\") {\n        this.nextButton.click();\n      }\n      if (e.code === \"Escape\") {\n        this.manager.setSelection(undefined);\n      }\n    });\n  }\n\n  async refresh() {\n    if (this.updated) {\n      return;\n    }\n    if (this.manager.getPlayer()) {\n      this.endButton.innerHTML = `<u style='color: blue'>E</u>nd turn ${this.manager.getTurn()}`;\n      this.refreshResources();\n      this.refreshTax();\n      this.refreshButtons();\n      this.refreshResearchInfo();\n      this.ui.style.display = \"block\";\n      this.updated = true;\n    }\n  }\n\n  refreshButtons() {\n    const player = this.manager.getPlayer();\n    this.nextButton.style.display = this.manager.getUnits(player).size > 1 ? \"block\" : \"none\";\n  }\n\n  async refreshTax() {\n    //  display resources (wheat, wood, brain)\n    const player = this.manager.getPlayer();\n    const RESOURCES: (keyof Resources)[] = this.manager.getAllGlobalResources();\n    const revenuePerResource = await this.manager.calculateResourceRevenue(player);\n    const hasRevenue = Object.values(revenuePerResource).some(value => value > 0);\n\n    RESOURCES.forEach((resource, index) => {\n      let taxValue = this.manager.getTaxValue(this.manager.getPlayer());\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n      }\n      let revenueValue = revenuePerResource[resource];\n      const taxText = document.getElementById(`${resource}-tax`) as HTMLDivElement;\n      if (taxText) {\n        taxText.textContent = `${revenueValue >= 0 ? '+' : ''}${revenueValue} (${taxValue}%)`;\n      }\n    });\n\n    //  add knob to adjust tax\n    let taxKnob = document.getElementById(\"tax\") as HTMLInputElement;\n    if (!taxKnob) {\n      taxKnob = (this.resourceOverlay.appendChild(document.createElement(\"input\")));\n      taxKnob.id = \"tax\";\n      taxKnob.type = \"range\";\n      taxKnob.min = \"0\";\n      taxKnob.max = \"100\";\n      taxKnob.step = \"5\";\n      taxKnob.value = `${this.manager.getTaxValue(this.manager.getPlayer())}`;\n      taxKnob.style.width = \"60px\";\n      taxKnob.style.marginTop = \"20px\";\n      taxKnob.addEventListener(\"input\", e => {\n        this.manager.updateTaxValue(player, parseInt(taxKnob.value));\n        this.refreshTax();\n        this.refreshResearchInfo();\n      });\n      taxKnob.addEventListener(\"mouseover\", e => {\n        this.onKnob = true;\n      });\n      taxKnob.addEventListener(\"mouseout\", e => {\n        this.onKnob = false;\n      });\n    }\n    taxKnob.style.display = hasRevenue ? \"block\" : \"none\";\n  }\n\n  async refreshResources() {\n    //  display resources (gold, brain)\n    const RESOURCES: (keyof Resources)[] = this.manager.getAllGlobalResources();\n    RESOURCES.forEach((resource, index) => {\n      const resourceData = this.manager.getResourceType(resource);\n      if (!resourceData) {\n        return;\n      }\n      const { imageSource, spriteSize, frames, padding } = resourceData.icon;\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n      let icon = document.getElementById(resource);\n      if (!icon) {\n        icon = this.resourceOverlay.appendChild(document.createElement(\"div\"));\n        icon.id = resource;\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteWidth}px`;\n        icon.style.height = `${spriteHeight}px`;\n        icon.classList.add(\"resource-icon\");\n        icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % 30) + (padding?.[0] ?? 2) / 2}px ${-spriteHeight * Math.floor(frames[0] / 30) + (padding?.[1] ?? 2) / 2}px`;\n        icon.textContent = \"0\";\n        this.resourceOverlay.appendChild(icon);\n      }\n      let taxValue = this.manager.getTaxValue(this.manager.getPlayer());\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n      }\n\n      const newText = `${this.manager.getPlayerResource(resource, this.manager.getPlayer())}`;\n      if (icon.textContent !== newText) {\n        icon.textContent = newText;\n        icon.style.backgroundColor = \"rgba(255, 50, 255, 0.5)\";\n        setTimeout(() => {\n          icon.style.backgroundColor = \"rgba(0, 0, 0, 0.5)\";\n        }, 1500);\n      }\n      const taxText = document.getElementById(`${resource}-tax`) as HTMLDivElement ?? (this.resourceOverlay.appendChild(document.createElement(\"div\")));\n      taxText.id = `${resource}-tax`;\n      taxText.style.color = \"white\";\n      taxText.style.width = \"100%\";\n      taxText.style.marginTop = \"-20px\";\n      taxText.style.textAlign = \"center\";\n      taxText.style.fontSize = \"8pt\";\n    });\n\n    const revenuePerResource = await this.manager.calculateResourceRevenue(this.manager.getPlayer());\n    const hasRevenue = Object.values(revenuePerResource).some(value => value > 0);\n    const hasResource = RESOURCES.some(resource => this.manager.getPlayerResource(resource, this.manager.getPlayer()) > 0);\n    this.resourceOverlay.style.display = hasRevenue || hasResource ? \"block\" : \"none\";\n  }\n\n  flashEndTurn(temp = false) {\n    this.buttonsOverlay.style.display = \"block\";\n    document.getElementById(\"endButton\")?.classList.add(temp ? \"flash-temp\" : \"flash\");\n    if (temp) {\n      this.stopFlashEndTurn();\n      setTimeout(() => {\n        document.getElementById(\"endButton\")?.classList.remove(\"flash-temp\");\n      }, 1000);\n    }\n  }\n\n  stopFlashEndTurn() {\n    document.getElementById(\"endButton\")?.classList.remove(\"flash\");\n  }\n\n  setupQuickActions() {\n    const quickActions = this.manager.quickActions();\n    quickActions.forEach(action => {\n      const { imageSource, spriteSize, frames, padding } = action.icon;\n      const icon = this.quickActionOverlay.appendChild(document.createElement(\"div\"));\n      //  setup icon\n      icon.style.backgroundImage = `url(${imageSource})`;\n      icon.style.width = `${spriteSize[0]}px`;\n      icon.style.height = `${spriteSize[1]}px`;\n      icon.title = action.description;\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n      icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n      icon.style.cursor = \"pointer\";\n      icon.style.backgroundColor = \"rgb(50, 50, 50, .3)\";\n\n      icon.addEventListener(\"mouseover\", e => {\n        icon.style.backgroundColor = \"rgb(200, 200, 0, .7)\";\n      });\n      icon.addEventListener(\"mouseout\", e => {\n        icon.style.backgroundColor = \"rgb(50, 50, 50, .3)\";\n      });\n      icon.addEventListener(\"click\", e => {\n        this.manager.performQuickAction(action);\n      });\n    });\n  }\n\n  setHudButtons() {\n    const nextButton = this.buttonsOverlay.appendChild(this.nextButton);\n    nextButton.innerHTML = \"<u style='color: blue'>N</u>ext unit\";\n    nextButton.id = \"nextButton\";\n    nextButton.style.width = \"150px\";\n    nextButton.addEventListener(\"click\", e => {\n      this.manager.selectNext();\n    });\n    nextButton.style.display = \"none\";\n\n    const endButton = this.buttonsOverlay.appendChild(this.endButton);\n    endButton.style.width = \"150px\";\n    endButton.id = \"endButton\";\n    endButton.addEventListener(\"click\", e => {\n      this.stopFlashEndTurn();\n      this.manager.gotoNextTurn();\n    });\n    endButton.addEventListener(\"mousedown\", e => {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n    endButton.addEventListener(\"mouseup\", e => {\n      e.preventDefault();\n      e.stopPropagation();\n    });\n\n    const autoEndGroup = this.buttonsOverlay.appendChild(document.createElement(\"div\"));\n    const autoEndLabel = autoEndGroup.appendChild(document.createElement(\"label\"));\n    autoEndLabel.textContent = \"auto-end turn\";\n    autoEndLabel.htmlFor = \"autoEndCheckbox\";\n    autoEndLabel.title = \"Automatically end turn when no more moves are available\";\n    const autoEndCheckbox = autoEndGroup.appendChild(document.createElement(\"input\"));\n    autoEndCheckbox.id = \"autoEndCheckbox\";\n    autoEndCheckbox.type = \"checkbox\";\n    autoEndCheckbox.checked = this.manager.autoEndTurn;\n    autoEndCheckbox.addEventListener(\"change\", e => {\n      this.manager.autoEndTurn = autoEndCheckbox.checked;\n      if (this.manager.autoEndTurn) {\n        this.stopFlashEndTurn();\n        this.manager.checkForAnyMove();\n      }\n    });\n\n    const zoomGroup = this.buttonsOverlay.appendChild(document.createElement(\"div\"));\n    zoomGroup.style.display = \"flex\";\n    zoomGroup.style.flexDirection = \"row\";\n    zoomGroup.style.justifyContent = \"center\";\n    zoomGroup.style.alignItems = \"center\";\n    zoomGroup.style.gap = \"10px\";\n\n    const zoomLabel = zoomGroup.appendChild(document.createElement(\"label\"));\n    zoomLabel.textContent = \"zoom\";\n    zoomLabel.htmlFor = \"zoom\";\n\n    const zoomKnob = zoomGroup.appendChild(document.createElement(\"input\"));\n    zoomKnob.id = \"zoom\";\n    zoomKnob.type = \"range\";\n    zoomKnob.min = \"40\";\n    zoomKnob.max = \"200\";\n    zoomKnob.step = \"5\";\n    zoomKnob.value = \"80\";\n    zoomKnob.style.width = \"100px\";\n    zoomKnob.style.marginTop = \"20px\";\n    zoomKnob.addEventListener(\"input\", e => {\n      setCameraScale(parseInt(zoomKnob.value));\n    });\n    zoomKnob.addEventListener(\"mouseover\", e => {\n      this.onKnob = true;\n    });\n    zoomKnob.addEventListener(\"mouseout\", e => {\n      this.onKnob = false;\n    });\n  }\n\n  clear() {\n    this.itemsToDestroy.forEach((item) => item());\n    this.itemsToDestroy.clear();\n  }\n\n  async showSelected(obj?: GameObject) {\n    const menu = this.manager.getMenu(obj?.elem?.name);\n    this.bg.style.bottom = menu?.items.length ? \"0\" : \"-400px\";\n    this.quickActionOverlay.style.bottom = obj?.elem?.type !== \"unit\" || obj?.elem?.disableQuickActions ? \"-100px\" : menu?.items.length ? \"100px\" : \"0\";\n    this.buttonsOverlay.style.right = menu?.items.length ? \"-200px\" : \"0\";\n    this.bg.innerHTML = \"\";\n\n    this.clear();\n\n    if (!menu?.items.length) {\n      return;\n    }\n    if (!obj) {\n      return;\n    }\n    {\n      const iconDiv = this.bg.appendChild(document.createElement(\"div\"));\n      const { imageSource, spriteSize, frames, padding } = menu.icon;\n      const icon = iconDiv.appendChild(document.createElement(\"div\"));\n      icon.style.backgroundImage = `url(${imageSource})`;\n      icon.style.width = `${spriteSize[0]}px`;\n      icon.style.height = `${spriteSize[1]}px`;\n\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n      let animationFrame: number;\n      const animateIcon = () => {\n        animationFrame = requestAnimationFrame(animateIcon);\n        const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n        icon.style.backgroundPosition = `${-spriteWidth * (frame % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n      };\n      animateIcon();\n      this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n\n      const label = iconDiv.appendChild(document.createElement(\"div\"));\n      label.innerText = menu.name;\n      label.style.textAlign = \"center\";\n      label.style.fontSize = \"10pt\";\n      label.style.color = \"silver\";\n      label.style.pointerEvents = \"none\";\n\n      const descDiv = this.bg.appendChild(document.createElement(\"div\"));\n      const desc = descDiv.appendChild(document.createElement(\"div\"));\n      desc.style.margin = \"20px 20px\";\n      desc.style.color = \"silver\";\n      desc.style.width = \"0px\";\n      const descContent = desc.appendChild(document.createElement(\"div\"));\n      descContent.style.position = \"absolute\";\n      descContent.style.maxWidth = \"200px\";\n      descContent.style.pointerEvents = \"none\";\n      descContent.textContent = menu.description ?? \"\";\n\n      const healthDiv = descDiv.appendChild(document.createElement(\"div\"));\n      healthDiv.style.position = \"absolute\";\n      healthDiv.style.right = \"0\";\n      healthDiv.style.top = \"0\";\n      if (obj.elem?.type === \"house\") {\n        const resourcesRevenue = obj.calculateUnitResourcesRevenue();\n\n        {\n          //  show weath resource\n          const wheat = healthDiv.appendChild(document.createElement(\"div\"));\n          wheat.style.display = \"flex\";\n          wheat.style.flexDirection = \"row\";\n          wheat.style.alignItems = \"center\";\n          wheat.style.justifyContent = \"left\";\n          wheat.style.margin = \"3px 10px\";\n          wheat.style.height = \"16px\";\n          const wheatResourceType = this.manager.getResourceType(\"wheat\");\n          if (wheatResourceType) {\n            const { imageSource, spriteSize, frames, padding } = wheatResourceType.icon;\n            const icon = wheat.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n          }\n          // show wheat amount\n\n          // calculate wheat cost for next level\n          const cost = obj.nextLevelCost();\n\n          const label = wheat.appendChild(document.createElement(\"div\"));\n          label.style.fontSize = \"10pt\";\n          label.style.color = \"gold\";\n          label.textContent = `(+${resourcesRevenue[\"wheat\"]}) ${obj.elem.resourcesAccumulated?.wheat ?? 0} / ${cost}`;\n        }\n        {\n          //  show wood resource\n          const wood = healthDiv.appendChild(document.createElement(\"div\"));\n          wood.style.display = \"flex\";\n          wood.style.flexDirection = \"row\";\n          wood.style.alignItems = \"center\";\n          wood.style.justifyContent = \"left\";\n          wood.style.margin = \"3px 10px\";\n          wood.style.height = \"16px\";\n          const woodResourceType = this.manager.getResourceType(\"wood\");\n          if (woodResourceType) {\n            const { imageSource, spriteSize, frames, padding } = woodResourceType.icon;\n            const icon = wood.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n          }\n          // show wood amount\n          const label = wood.appendChild(document.createElement(\"div\"));\n          label.style.fontSize = \"10pt\";\n          label.style.color = \"orange\";\n          const capacity = obj.resourceCapacity(\"wood\");\n          label.textContent = `(+${resourcesRevenue[\"wood\"]}) ${obj.elem.resourcesAccumulated?.wood ?? 0} / ${capacity}`;\n        }\n        {\n          //  show trade resource\n          const trade = healthDiv.appendChild(document.createElement(\"div\"));\n          trade.style.display = \"flex\";\n          trade.style.flexDirection = \"row\";\n          trade.style.alignItems = \"center\";\n          trade.style.justifyContent = \"left\";\n          trade.style.margin = \"3px 10px\";\n          trade.style.height = \"16px\";\n          const tradeResourceType = this.manager.getResourceType(\"trade\");\n          if (tradeResourceType) {\n            const { imageSource, spriteSize, frames, padding } = tradeResourceType.icon;\n            const icon = trade.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n          }\n          // show trade amount\n          const label = trade.appendChild(document.createElement(\"div\"));\n          label.style.fontSize = \"10pt\";\n          label.style.color = \"teal\";\n          label.textContent = `(+${resourcesRevenue[\"trade\"]})`;\n        }\n      }\n    }\n    {\n      const menuDiv = this.bg.appendChild(document.createElement(\"div\"));\n      menuDiv.style.display = \"flex\";\n      menuDiv.style.flexDirection = \"row\";\n      menuDiv.style.justifyContent = \"center\";\n      menuDiv.style.alignItems = \"center\";\n      menuDiv.style.flexGrow = \"1\";\n      menuDiv.style.margin = \"0 10px\";\n      menuDiv.style.marginLeft = \"-100px\";\n      menuDiv.style.gap = \"10px\";\n\n      for (const item of menu.items) {\n        if (item.debug && !DEBUG) {\n          continue;\n        }\n        if (await this.manager.checkCondition(item.hidden, obj)) {\n          continue;\n        }\n        const researched = !item.researchNeeded?.length || item.researchNeeded?.every(research => this.manager.isResearched(research, this.manager.getPlayer()));\n        if (!researched) {\n          continue;\n        }\n        const disabled = (!researched ? `Research\\n${item.researchNeeded?.join(\", \")}` : undefined) || await this.manager.checkCondition(item.disabled, obj)\n          || (obj.canAfford(item.resourceCost) ? null : \"not enough\\nresources\");\n\n        const menuItemDiv = menuDiv.appendChild(document.createElement(\"div\"));\n\n        if (item.resourceCost && researched) {\n          const resourceDiv = menuItemDiv.appendChild(document.createElement(\"div\"));\n          resourceDiv.style.display = \"flex\";\n          resourceDiv.style.flexDirection = \"row\";\n          resourceDiv.style.marginTop = \"-55px\";\n          resourceDiv.style.marginLeft = \"-60px\";\n          resourceDiv.style.position = \"absolute\";\n          const cost = item.resourceCost;\n          Object.entries(cost ?? {}).forEach(([key, amount]) => {\n            const resource = key as keyof Resources;\n            const resourceData = this.manager.getResourceType(resource);\n            if (!resourceData) {\n              return;\n            }\n            const { imageSource, spriteSize, frames, padding } = resourceData.icon;\n            const icon = resourceDiv.appendChild(document.createElement(\"div\"));\n            icon.style.backgroundImage = `url(${imageSource})`;\n            icon.style.width = `${spriteSize[0]}px`;\n            icon.style.height = `${spriteSize[1]}px`;\n            icon.style.transform = \"scale(.5)\";\n            icon.style.marginTop = \"-25px\";\n            const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n            const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n            icon.style.backgroundPosition = `${-spriteWidth * (frames[0] % SPRITESHEET_COLS)}px ${-spriteHeight * Math.floor(frames[0] / SPRITESHEET_COLS)}px`;\n            const label = resourceDiv.appendChild(document.createElement(\"div\"));\n            label.style.fontSize = \"10pt\";\n            label.style.marginLeft = \"-20px\";\n            label.style.color = \"gold\";\n            label.textContent = `${amount}`;\n          });\n        } else {\n          const text = menuItemDiv.appendChild(document.createElement(\"div\"));\n          text.textContent = item.label ?? item.name;\n          text.style.position = \"absolute\";\n          text.style.top = \"0\";\n          text.style.fontSize = \"10pt\";\n          text.style.color = \"red\";\n          text.style.display = disabled ? \"block\" : \"none\";\n        }\n\n        menuItemDiv.style.cursor = \"pointer\";\n        menuItemDiv.style.display = \"flex\";\n        menuItemDiv.style.alignItems = \"center\";\n        menuItemDiv.style.justifyContent = \"center\";\n        menuItemDiv.style.flexDirection = \"column\";\n        const { imageSource, spriteSize, frames, padding } = item;\n        const icon = menuItemDiv.appendChild(document.createElement(\"div\"));\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteSize[0]}px`;\n        icon.style.height = `${spriteSize[1]}px`;\n        const cols = 30;\n        const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n        const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n        let animationFrame: number;\n        const animateIcon = () => {\n          animationFrame = requestAnimationFrame(animateIcon);\n          const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n          icon.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n        };\n        animateIcon();\n        this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n\n        const label = menuItemDiv.appendChild(document.createElement(\"div\"));\n        label.innerText = disabled ?? item?.label ?? item.name;\n        label.style.textAlign = \"center\";\n        label.style.fontSize = \"10pt\";\n\n\n        menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n        if (!disabled) {\n          menuItemDiv.addEventListener(\"mouseover\", () => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 1)\";\n          });\n          menuItemDiv.addEventListener(\"mouseout\", () => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n          });\n          menuItemDiv.addEventListener(\"mousedown\", e => {\n            menuItemDiv.style.backgroundColor = \"rgba(250, 250, 150, .5)\";\n            e.preventDefault();\n            e.stopPropagation();\n          });\n          menuItemDiv.addEventListener(\"click\", async (e) => {\n            menuItemDiv.style.backgroundColor = \"rgba(100, 100, 100, 0.5)\";\n            if (disabled) {\n              return;\n            }\n            obj.spend(item.resourceCost);\n            const actions = item.actions ?? [];\n            for (const action of actions) {\n              await this.manager.performAction(action, obj);\n            }\n            obj.refreshLabel();\n            this.updated = false;\n            obj.refreshBars();\n\n            e.preventDefault();\n            e.stopPropagation();\n          });\n        }\n        if (disabled) {\n          icon.style.filter = \"grayscale(100%)\";\n          icon.style.opacity = \"0.5\";\n          menuItemDiv.style.cursor = \"not-allowed\";\n        } else {\n          icon.style.filter = \"\";\n          icon.style.opacity = \"\";\n          menuItemDiv.style.cursor = \"pointer\";\n        }\n      }\n    }\n  }\n\n  showBlocker(clickable?: boolean) {\n    this.blocker.style.display = \"block\";\n    this.blocker.style.cursor = clickable ? \"pointer\" : \"default\";\n  }\n\n  hideBlocker() {\n    this.blocker.style.display = \"none\";\n  }\n\n  async showSpaceshipDialog() {\n    this.spaceshipPopup.style.display = \"flex\";\n    await new Promise<void>(resolve => setTimeout(resolve, 100));\n    return new Promise<void>(async resolve => {\n      this.spaceshipPopup.style.opacity = \"1\";\n      this.showBlocker(true);\n      const spaceshipText = this.spaceshipPopup.querySelector(\"#spaceshipText\") as HTMLDivElement;\n      spaceshipText.textContent = `Good news, great leader! We have built the spaceship!\\nWe can now travel accross the galaxy,\\nand leave those poor humans behind!\\nTHE END`;\n\n      const animalsSaved: Elem[] = [];\n      await this.manager.iterateRevealedCells(async (cell: GameObject) => {\n        if (cell.elem?.owner === this.manager.getPlayer() && cell.elem?.type === \"unit\") {\n          animalsSaved.push(cell.elem);\n        }\n      });\n      //  create div overlay for each animal saved\n      const overlay = this.spaceshipPopup.appendChild(document.createElement(\"div\"));\n      overlay.style.position = \"absolute\";\n      overlay.style.top = \"50%\";\n      overlay.style.left = \"50%\";\n      overlay.style.transform = `translate(-50%, -50%)`;\n      overlay.style.width = \"100%\";\n      overlay.style.height = \"100%\";\n      overlay.style.pointerEvents = \"none\";\n      overlay.style.display = \"flex\";\n      overlay.style.flexDirection = \"row\";\n      overlay.style.justifyContent = \"center\";\n      overlay.style.alignItems = \"center\";\n      overlay.style.gap = \"10px\";\n      overlay.style.flexWrap = \"wrap\";\n      overlay.style.overflow = \"auto\";\n      overlay.style.maxHeight = \"80%\";\n\n      for (let i = 0; i < 5; i++) {\n        animalsSaved.push(...animalsSaved);\n      }\n\n      //  show icon for all animals saved\n      for (const animal of animalsSaved) {\n        const anim = animal.selected?.animation ?? animal.animation;\n        if (!anim) {\n          continue;\n        }\n        const animObj = this.manager.scene.animations.find(animObj => animObj.name === anim);\n        if (!animObj) {\n          continue;\n        }\n        const { imageSource, spriteSize, frames, padding } = animObj;\n        const icon = this.spaceshipPopup.appendChild(document.createElement(\"div\"));\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteSize[0]}px`;\n        icon.style.height = `${spriteSize[1]}px`;\n        icon.style.position = \"absolute\";\n        icon.style.top = \"50%\";\n        icon.style.left = \"50%\";\n        icon.style.transform = `translate(-50%, -50%)`;\n        icon.style.pointerEvents = \"none\";\n        const cols = 30;\n        const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n        const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n        //  place icon at random position on the screen\n        const x = 50 + (Math.random() - .5) * 50;\n        const y = 50 + (Math.random() - .5) * 30;\n        icon.style.left = `${x}%`;\n        icon.style.top = `${y}%`;\n        let animationFrame: number;\n        const animateIcon = () => {\n          animationFrame = requestAnimationFrame(animateIcon);\n          const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n          icon.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n        };\n        animateIcon();\n        this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n\n      }\n\n\n\n      //  play music\n      this.playMusic();\n\n      //  Speak the text\n      const utterance = new SpeechSynthesisUtterance(spaceshipText.textContent);\n      const voices = speechSynthesis.getVoices();\n      const voice = voices.find(voice => voice.name.indexOf(\"Daniel\") >= 0);\n      if (voice) {\n        utterance.voice = voice;\n      }\n      speechSynthesis.speak(utterance);\n\n      setTimeout(() => {\n        this.blocker.addEventListener(\"click\", () => {\n          overlay.parentNode?.removeChild(overlay);\n          speechSynthesis.cancel();\n          this.fadeMusicOut();\n          this.clear();\n          this.spaceshipPopup.style.opacity = \"0\";\n          // this.researchPopup.style.display = \"none\";\n          this.hideBlocker();\n          resolve();\n          setTimeout(() => {\n            this.spaceshipPopup.style.display = \"none\";\n          }, 300);\n\n        }, { once: true });\n      }, 1000);\n    });\n  }\n\n  async showResearchDialog(research: Research) {\n    this.researchPopup.style.display = \"flex\";\n    await new Promise<void>(resolve => setTimeout(resolve, 100));\n\n    return new Promise<void>(resolve => {\n      this.showBlocker(true);\n      // this.researchPopup.style.display = \"flex\";\n      this.researchPopup.style.opacity = \"1\";\n      const { imageSource, spriteSize, frames, padding } = research.waitIcon ?? research.icon;\n      const researchImage = this.researchPopup.querySelector(\"#researchImage\") as HTMLDivElement;\n      researchImage.style.backgroundImage = `url(${imageSource})`;\n      researchImage.style.width = `${spriteSize[0]}px`;\n      researchImage.style.height = `${spriteSize[1]}px`;\n      researchImage.style.opacity = \"1\";\n      const cols = 30;\n      const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n      const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n      let animationFrame: number;\n      const animateIcon = () => {\n        animationFrame = requestAnimationFrame(animateIcon);\n        const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n        researchImage.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n      };\n      animateIcon();\n      this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n      const researchText = this.researchPopup.querySelector(\"#researchText\") as HTMLDivElement;\n      researchText.textContent = `Good news, great leader!\\n\\nWe have discovered ${research.name}!\\n${research.description ?? \"\"}`;\n\n      //  play music\n      this.playMusic();\n\n      //  Speak the text\n      const utterance = new SpeechSynthesisUtterance(researchText.textContent);\n      const voices = speechSynthesis.getVoices();\n      const voice = voices.find(voice => voice.name.indexOf(\"Daniel\") >= 0);\n      if (voice) {\n        utterance.voice = voice;\n      }\n      speechSynthesis.speak(utterance);\n\n      setTimeout(() => {\n        this.blocker.addEventListener(\"click\", () => {\n          speechSynthesis.cancel();\n          this.fadeMusicOut();\n          this.clear();\n          this.researchPopup.style.opacity = \"0\";\n          // this.researchPopup.style.display = \"none\";\n          this.hideBlocker();\n          resolve();\n          researchImage.style.opacity = \"0\";\n          setTimeout(() => {\n            this.researchPopup.style.display = \"none\";\n          }, 300);\n        }, { once: true });\n      }, 1000);\n    });\n  }\n\n  musicFader: number = 0;\n  fadeMusicOut() {\n    let volume = this.music.volume;\n    const fade = () => {\n      volume -= 0.005;\n      if (volume > 0) {\n        this.music.volume = volume;\n        this.musicFader = requestAnimationFrame(fade);\n      } else {\n        this.music.pause();\n      }\n    };\n    fade();\n  }\n\n  playMusic() {\n    cancelAnimationFrame(this.musicFader);\n    this.music.play();\n    this.music.volume = 1;\n    this.music.currentTime = 0;\n  }\n\n  async showDialog(text: string, music: boolean = false, voiceName?: string): Promise<void> {\n    this.showBlocker(true);\n    this.dialog.style.display = \"flex\";\n    this.cat.style.display = \"block\";\n    this.dialog.textContent = text;\n    const utterance = new SpeechSynthesisUtterance(text);\n    const voices = speechSynthesis.getVoices();\n    const voice = voiceName ? voices.find(voice => voice.name.indexOf(voiceName) >= 0) : undefined;\n    if (voice) {\n      utterance.voice = voice;\n    }\n    speechSynthesis.speak(utterance);\n    if (music) {\n      this.playMusic();\n    }\n    return new Promise(resolve => {\n      this.blocker.addEventListener(\"click\", () => {\n        speechSynthesis.cancel();\n        if (!READY) {\n          (window as any).index = (window as any).index ?? 0;\n          const NOTREADYS = [\n            \"Not ready yet, please be patient\",\n            \"I'm not ready yet, please wait\",\n            \"I'm still working on it, please wait\",\n            \"Can you wait a little longer? Jesus!\",\n            \"Hold your horses, we're almost there!\",\n            \"Patience is a virtue... that you clearly lack!\",\n            \"Good things come to those who wait. Great things take a bit longer.\",\n            \"Rome wasn't built in a day, and neither is this!\",\n            \"Keep calm and wait a moment.\",\n            \"Loading... just like your patience.\",\n            \"If you keep clicking, it won't go any faster!\",\n            \"Almost there... just kidding, still working on it!\",\n            \"Why the rush? Enjoy the moment!\",\n            \"Your impatience is noted. Still not ready.\",\n            \"Take a deep breath, we're almost there.\",\n            \"You can't rush perfection!\",\n            \"Good things take time. Great things take even longer.\",\n            \"Patience, young grasshopper.\",\n            \"We're on it! Just a few more seconds.\",\n            \"Loading... because magic takes time.\",\n            \"Hang tight, we're almost there!\",\n            \"If you wait a bit longer, you might get a cookie!\",\n            \"Almost done... just kidding, still working on it!\",\n            \"Your impatience is adorable. Still not ready.\",\n            \"Hold on, we're making it awesome!\",\n            \"Good things come to those who wait. Great things take a bit longer.\",\n            \"Keep calm and wait a moment.\",\n            \"Loading... just like your patience.\",\n            \"If you keep clicking, it won't go any faster!\",\n            \"Almost there... just kidding, still working on it!\",\n            \"Why the rush? Enjoy the moment!\",\n            \"Your impatience is noted. Still not ready.\",\n            \"Take a deep breath, we're almost there.\",\n            \"You can't rush perfection!\",\n            \"Good things take time. Great things take even longer.\",\n            \"Patience, young grasshopper.\",\n            \"We're on it! Just a few more seconds.\",\n            \"Loading... because magic takes time.\",\n            \"Hang tight, we're almost there!\",\n            \"If you wait a bit longer, you might get a cookie!\",\n            \"Almost done... just kidding, still working on it!\",\n            \"Your impatience is adorable. Still not ready.\",\n            \"Hold on, we're making it awesome!\",\n          ];\n          const msg = NOTREADYS[(window as any).index];\n          (window as any).index = ((window as any).index + 1) % NOTREADYS.length;\n          this.clear();\n          resolve();\n          this.showDialog(msg);\n          return;\n        }\n        //  fade music out\n        if (music) {\n          this.fadeMusicOut();\n        }\n\n        this.dialog.style.display = \"none\";\n        this.cat.style.display = \"none\";\n        this.hideBlocker();\n        this.clear();\n        setTimeout(() => {\n          resolve();\n        }, 10);\n      }, { once: true });\n    });\n  }\n\n  closeDialog() {\n    this.dialog.style.display = \"none\";\n    this.hideBlocker();\n  }\n\n  initializeErrorBanner() {\n    window.addEventListener(\"error\", (event) => {\n      const errorDiv = document.body.appendChild(document.createElement(\"div\"));\n      errorDiv.style.position = \"absolute\";\n      errorDiv.style.zIndex = \"1000\";\n      errorDiv.style.top = \"0\";\n      errorDiv.style.left = \"0\";\n      errorDiv.style.width = \"100%\";\n      errorDiv.style.height = \"100px\";\n      errorDiv.style.backgroundColor = \"rgba(255, 0, 0, 0.5)\";\n      errorDiv.style.color = \"white\";\n      errorDiv.style.textAlign = \"center\";\n      errorDiv.style.fontSize = \"20pt\";\n      errorDiv.textContent = event.message;\n      errorDiv.addEventListener(\"click\", () => {\n        errorDiv.remove();\n      });\n    }, { once: true });\n  }\n\n  async promptForResearch(inventions: Research[], brainsPerTurn: number, currentBrains: number) {\n    if (!inventions.length) {\n      return;\n    }\n    return new Promise<void>(resolve => {\n      this.showBlocker();\n      const inv = [...inventions];\n      inv.sort((a, b) => {\n        if (DEBUG) {\n          if (a.forceInDebug !== b.forceInDebug) {\n            return a.forceInDebug ? -1 : 1;\n          }\n        }\n        if (a.cost !== b.cost) {\n          return a.cost - b.cost;\n        }\n        return Math.random() - 0.5;\n      });\n      while (inv.length > 4) {\n        inv.pop();\n      }\n      inv.sort((a, b): number => {\n        const recA = a.recommended ?? 10000;\n        const recB = b.recommended ?? 10000;\n        if (recA !== recB) {\n          return recA - recB;\n        }\n        return Math.random() - .5;\n      })\n      this.researchList.style.display = \"flex\";\n      this.researchList.style.height = `${inv.length * 100}px`;\n      this.researchList.innerHTML = \"\";\n      inv.forEach((invention, index) => {\n        const researchDiv = this.researchList.appendChild(document.createElement(\"div\"));\n        researchDiv.style.display = \"flex\";\n        researchDiv.style.flexDirection = \"row\";\n        researchDiv.style.justifyContent = \"flex-start\";\n        researchDiv.style.alignItems = \"center\";\n        researchDiv.style.flexGrow = \"1\";\n        researchDiv.style.margin = \"0 10px\";\n        researchDiv.style.gap = \"10px\";\n        const { imageSource, spriteSize, frames, padding } = invention.icon;\n        const icon = researchDiv.appendChild(document.createElement(\"div\"));\n        icon.style.backgroundImage = `url(${imageSource})`;\n        icon.style.width = `${spriteSize[0]}px`;\n        icon.style.height = `${spriteSize[1]}px`;\n        const cols = 30;\n        const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n        const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n        let animationFrame: number;\n        const animateIcon = () => {\n          animationFrame = requestAnimationFrame(animateIcon);\n          const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n          icon.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n        };\n        animateIcon();\n        this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n        const midGroup = researchDiv.appendChild(document.createElement(\"div\"));\n        midGroup.style.display = \"flex\";\n        midGroup.style.flexDirection = \"column\";\n        midGroup.style.justifyContent = \"flex-start\";\n        midGroup.style.alignItems = \"flex-start\";\n        midGroup.style.flexGrow = \"1\";\n        midGroup.style.margin = \"0 10px\";\n        midGroup.style.gap = \"5px\";\n\n        const labelGroup = midGroup.appendChild(document.createElement(\"div\"));\n        labelGroup.style.display = \"flex\";\n        labelGroup.style.flexDirection = \"row\";\n        const label = labelGroup.appendChild(document.createElement(\"div\"));\n        label.innerText = invention.name;\n        label.style.textAlign = \"left\";\n        label.style.fontSize = \"10pt\";\n        if (index === 0) {  //recommended\n          const rec = labelGroup.appendChild(document.createElement(\"div\"));\n          rec.innerText = \"recommended\";\n          rec.style.textAlign = \"left\";\n          rec.style.fontSize = \"8pt\";\n          rec.style.color = \"gold\";\n          rec.style.marginLeft = \"10px\";\n          researchDiv.style.backgroundColor = \"rgba(70, 60, 0, 1)\";\n        }\n\n        const desc = midGroup.appendChild(document.createElement(\"div\"));\n        desc.innerText = invention.description ?? \"\";\n        desc.style.textAlign = \"left\";\n        desc.style.fontSize = \"8pt\";\n        desc.style.color = \"silver\";\n\n        const costDiv = researchDiv.appendChild(document.createElement(\"div\"));\n        costDiv.style.display = \"flex\";\n        costDiv.style.flexDirection = \"row\";\n        costDiv.style.alignItems = \"flex-end\";\n        costDiv.style.justifyContent = \"center\";\n        costDiv.style.position = \"absolute\";\n        costDiv.style.right = \"10px\";\n        costDiv.style.marginTop = \"-40px\";\n        costDiv.style.color = \"silver\";\n        const numTurns = Math.max(0, Math.ceil((invention.cost - currentBrains) / brainsPerTurn));\n        costDiv.textContent = `${numTurns} turns`;\n\n        researchDiv.style.cursor = \"pointer\";\n        researchDiv.style.width = \"100%\";\n        researchDiv.addEventListener(\"mouseover\", () => {\n          researchDiv.style.backgroundColor = index === 0 ? \"rgba(120, 100, 0, 1)\" : \"rgba(100, 100, 100, 1)\";\n        });\n        researchDiv.addEventListener(\"mouseout\", () => {\n          researchDiv.style.backgroundColor = index === 0 ? \"rgba(70, 60, 0, 1)\" : \"\";\n        });\n        researchDiv.addEventListener(\"click\", () => {\n          this.manager.research(invention.name, this.manager.getPlayer());\n          this.researchList.style.display = \"none\";\n          this.hideBlocker();\n          this.updated = false;\n          resolve();\n        });\n      });\n    });\n  }\n\n  async refreshResearchInfo() {\n    const player = this.manager.getPlayer();\n    const research: Research | undefined = this.manager.getResearchInfo(player);\n    this.researchInfoDiv.innerHTML = \"\";\n    if (!research) {\n      this.researchInfoDiv.style.display = \"none\";\n      return;\n    }\n    const researched = this.manager.isResearched(research.name, player);\n    this.researchInfoDiv.style.display = \"block\";\n    const { imageSource, spriteSize, frames, padding } = research.icon;\n    const icon = this.researchInfoDiv.appendChild(document.createElement(\"div\"));\n    icon.style.backgroundImage = `url(${imageSource})`;\n    icon.style.width = `${spriteSize[0]}px`;\n    icon.style.height = `${spriteSize[1]}px`;\n    const cols = 30;\n    const spriteWidth = (spriteSize[0] + (padding?.[0] ?? 2) * 2);\n    const spriteHeight = (spriteSize[1] + (padding?.[1] ?? 2) * 2);\n    let animationFrame: number;\n    const animateIcon = () => {\n      animationFrame = requestAnimationFrame(animateIcon);\n      const frame = frames[Math.floor(performance.now() / 100) % frames.length];\n      icon.style.backgroundPosition = `${-spriteWidth * (frame % cols)}px ${-spriteHeight * Math.floor(frame / SPRITESHEET_COLS)}px`;\n    };\n    animateIcon();\n    this.itemsToDestroy.add(() => cancelAnimationFrame(animationFrame));\n    const label = this.researchInfoDiv.appendChild(document.createElement(\"div\"));\n    label.innerText = research.name;\n    label.style.marginTop = \"-30px\";\n    label.style.textAlign = \"center\";\n    label.style.fontSize = \"10pt\";\n    label.style.color = \"white\";\n    // const desc = this.researchInfoDiv.appendChild(document.createElement(\"div\"));\n    // desc.innerText = research.description ?? \"\";\n    // desc.style.textAlign = \"center\";\n    // desc.style.fontSize = \"8pt\";\n    // desc.style.color = \"silver\";\n\n    const turnDiv = this.researchInfoDiv.appendChild(document.createElement(\"div\"));\n    const globalResources = await this.manager.calculateResourceRevenue(this.manager.getPlayer());\n    const brainsPerTurn = globalResources.brain;\n    turnDiv.style.position = \"absolute\";\n    turnDiv.style.top = \"10px\";\n    turnDiv.style.right = \"10px\";\n    turnDiv.style.color = researched ? \"#00ffff\" : !brainsPerTurn ? \"#ff0000\" : \"silver\";\n    turnDiv.style.fontSize = \"8pt\";\n\n    const currentBrains = this.manager.getPlayerResource(\"brain\", this.manager.getPlayer());\n    const numTurns = Math.max(0, Math.ceil((research.cost - currentBrains) / brainsPerTurn));\n    turnDiv.textContent = researched ? `researched` : !brainsPerTurn ? \"research halted\" : `${numTurns} turns`;\n  }\n}\n",
  "import type { GameObject } from \"../core/objects/game-object\";\nimport type { Manager } from \"../core/manager\";\n\ninterface Action {\n  time: number;\n  turnAround?: boolean;\n  moveTo?: [number, number];\n  talkTo?: [number, number];\n  attack?: [number, number];\n}\n\nexport class Thinker {\n  constructor(private manager: Manager) {\n  }\n\n  async think(gameObject: GameObject) {\n    const actions = await this.prepareScript(gameObject);\n    await this.executeScript(gameObject, actions);\n    gameObject.clearMoves();\n    gameObject.doneMoving();\n  }\n\n  private async prepareScript(gameObject: GameObject): Promise<Action[]> {\n    const actions: Action[] = [];\n\n    // Search for prey\n    const preys = await gameObject.findNearby((obj) => {\n      if (obj.elem?.owner !== gameObject.elem?.owner) {\n        return true;\n      }\n      return false;\n    }, 2);\n\n    // Search for friends\n    const friends = await gameObject.findNearby((obj) => {\n      if (obj !== gameObject && obj.elem?.type === \"unit\" && obj.elem?.owner === gameObject.elem?.owner) {\n        return true;\n      }\n      return false;\n    }, 3);\n    console.log(preys, friends)\n\n    const nextActionTime = preys.size || friends.size ? 0 : 1000;\n\n    // Look around\n    if (nextActionTime) {\n      for (let i = 0; i < 4; i++) {\n        actions.push({ time: nextActionTime / 4 * i, turnAround: true });\n      }\n    }\n\n    let didMove = false;\n    if (preys.size && (gameObject?.elem?.attack?.range ?? 1) === 2) {\n      // find furthest target\n      let target: { obj: GameObject | undefined, distance: number } = { obj: undefined, distance: 0 };\n      preys.forEach((obj) => {\n        const dx = obj.px - gameObject.px;\n        const dy = obj.py - gameObject.py;\n        const distance = Math.sqrt(dx * dx + dy * dy);\n        if (!target || distance > target.distance) {\n          target = { obj, distance };\n        }\n      });\n      const targetObj = target.obj;\n      if (targetObj) {\n        actions.push({\n          time: nextActionTime,\n          attack: [targetObj.px ?? 0, targetObj.py ?? 0],\n        });\n        didMove = true;\n      }\n    } else if (preys.size && (gameObject?.elem?.attack?.range ?? 1) < 2) {\n      //  move towards closest prey\n      let target: { obj: GameObject | undefined, distance: number } = { obj: undefined, distance: 0 };\n      preys.forEach((obj) => {\n        const dx = obj.px - gameObject.px;\n        const dy = obj.py - gameObject.py;\n        const distance = Math.max(Math.abs(dx), Math.abs(dy));\n        if (!target || distance > target.distance) {\n          target = { obj, distance };\n        }\n      });\n      if (target.obj) {\n        const dx = Math.sign(target.obj.px - gameObject.px) || Math.floor(Math.random() * 3) - 1;\n        const dy = Math.sign(target.obj.py - gameObject.py) || Math.floor(Math.random() * 3) - 1;\n        if (Math.abs(dx) <= 1 && Math.abs(dy) <= 1 || this.manager.isEmptySpot(gameObject.px + dx, gameObject.py + dy)) {\n          actions.push({\n            time: nextActionTime,\n            attack: [gameObject.px + dx, gameObject.py + dy],\n          });\n          didMove = true;\n        }\n      }\n    } else if (friends.size) {\n      //  move towards any friends at distance > 1\n      let target: { obj: GameObject | undefined, distance: number } = { obj: undefined, distance: 1 };\n      friends.forEach((obj) => {\n        if (obj === gameObject) {\n          return;\n        }\n        const dx = obj.px - gameObject.px;\n        const dy = obj.px - gameObject.py;\n        const distance = Math.max(Math.abs(dx), Math.abs(dy));\n        if (!target || distance > target.distance) {\n          target = { obj, distance };\n        }\n      });\n      if (target.obj) {\n        const dx = Math.sign(target.obj.px - gameObject.py) || Math.floor(Math.random() * 3) - 1;\n        const dy = Math.sign(target.obj.py - gameObject.py) || Math.floor(Math.random() * 3) - 1;\n        if (this.manager.isEmptySpot(gameObject.px + dx, gameObject.py + dy)) {\n          actions.push({\n            time: nextActionTime,\n            moveTo: [gameObject.px + dx, gameObject.py + dy],\n          });\n          didMove = true;\n        }\n      }\n    }\n    if (!didMove) {\n      //  move to any empty spot\n      const spots = this.manager.findEmptySpotsAround(gameObject.px, gameObject.py);\n      if (spots.length) {\n        const spot = spots[Math.floor(Math.random() * spots.length)];\n        actions.push({\n          time: nextActionTime,\n          moveTo: [spot.x, spot.y],\n        });\n      }\n    }\n    return actions;\n  }\n\n  private async executeScript(gameObject: GameObject, actions: Action[]): Promise<void> {\n    // sort actions by time (descending)\n    actions.sort((a, b) => b.time - a.time);\n    return new Promise((resolve) => {\n      const startTime = Date.now();\n      const loop = () => {\n        if (!actions.length) {\n          if (!gameObject.moving) {\n            resolve();\n          }\n          return;\n        }\n        const time = Date.now() - startTime;\n        if (time < actions[actions.length - 1].time) {\n          requestAnimationFrame(loop);\n        } else if (actions.length) {\n          // execute last action\n          const action = actions.pop();\n          if (action?.turnAround) {\n            gameObject.turnAround();\n          } else if (action?.moveTo) {\n            gameObject.simpleMoveTo(action.moveTo[0], action.moveTo[1]);\n          } else if (action?.attack) {\n            gameObject.attackTowards(action.attack[0], action.attack[1]);\n          }\n          requestAnimationFrame(loop);\n        }\n      };\n      requestAnimationFrame(loop);\n\n    });\n  }\n}\n",
  "import { cameraPos, cameraScale, EngineObject, mousePos, mouseWasPressed, mouseWasReleased, setCameraPos, setCameraScale, vec2, Vector2, LittleJS } from '../lib/littlejs';\n\nimport { AnimationManager } from \"../animation/animation-manager\";\nimport type { Elem } from \"../definition/elem\";\nimport type { Scene } from \"../definition/scene\";\nimport { GameObject } from \"./objects/game-object\";\nimport { Hud } from \"../ui/hud\";\nimport type { Condition } from \"../definition/condition\";\nimport type { Resources } from \"../definition/resources\";\nimport type { ResourceType } from '../definition/resource-type';\nimport { Thinker } from '../ai/thinker';\nimport { DEBUG, READY } from '../content/constant';\nimport type { Research } from '../definition/research';\nimport type { QuickAction } from '../definition/quick-actions';\nimport type { Action } from '../definition/action';\n\n\ninterface Entry {\n  gameObject: Set<GameObject>;\n  updateTime?: number;\n}\n\nexport class Manager {\n  readonly entries: Map<Elem, Entry> = new Map();\n  readonly animation: AnimationManager;\n  readonly grid: Record<string, GameObject> = {};\n  readonly revealed: Set<string> = new Set();\n  cursor?: GameObject;\n  selected?: GameObject;\n  private hovered?: GameObject;\n  private onMoveOption = false;\n  mousePosDown?: Vector2;\n  readonly camShift = vec2(0, 0);\n  shifting = 0;\n  doneShifting = 0;\n  hud;\n  worldChanged = true;\n  inUI?: boolean;\n  resourceIcons: EngineObject[] = [];\n  autoEndTurn = true;\n  showLabels = true;\n  thinker = new Thinker(this);\n  lastUnit: GameObject | undefined;\n  lastHovered?: GameObject | undefined;\n  advise: Set<string> = new Set();\n\n  constructor(readonly scene: Scene) {\n    this.animation = new AnimationManager(scene.animations);\n    this.hud = new Hud(this);\n    if (scene.scale) {\n      setCameraScale(scene.scale);\n    }\n\n    document.addEventListener(\"wheel\", (e) => {\n      this.camShift.x += e.deltaX / cameraScale;\n      this.camShift.y -= e.deltaY / cameraScale;\n      e.preventDefault();\n    }, { passive: false });\n    this.hud.initialize();\n\n    window.addEventListener(\"blur\", (e) => {\n      // this.hud.ui.classList.add(\"hidden\");\n      this.hud.resourceOverlay.classList.add(\"hidden\");\n      this.hud.buttonsOverlay.classList.add(\"hidden\");\n      this.showLabels = false;\n      this.cursor?.hide();\n      this.updateLabels();\n      LittleJS.overlayCanvas.style.cursor = \"default\";\n    });\n    window.addEventListener(\"focus\", (e) => {\n      // this.hud.ui.classList.remove(\"hidden\");\n      this.hud.resourceOverlay.classList.remove(\"hidden\");\n      this.hud.buttonsOverlay.classList.remove(\"hidden\");\n      this.showLabels = true;\n      this.refreshCursor();\n      this.updateLabels();\n      LittleJS.overlayCanvas.style.cursor = \"\";\n    });\n    if (!READY) {\n      this.hud.showDialog(\"This game is almost ready!.\");\n    }\n  }\n\n  updateLabels() {\n    this.getAllUnitsOrHouses().forEach((gameObject) => {\n      gameObject.updateLabel(this.showLabels);\n    });\n  }\n\n  refresh() {\n    this.scene.elems.forEach((elem) => {\n      if (elem.debug && !DEBUG) {\n        return;\n      }\n      this.sanitizeElem(elem);\n      this.refreshElem(elem);\n    });\n    this.shiftCamera();\n    if (this.worldChanged) {\n      this.fixWorld();\n      this.worldChanged = false;\n    }\n    this.hud.refresh();\n  }\n\n  clearFogOfWar() {\n    Object.keys(this.grid).forEach((tag) => {\n      const gameObject = this.grid[tag];\n      if (gameObject.elem?.type === \"cloud\") {\n        this.clearCloud(gameObject.px, gameObject.py);\n      }\n    });\n  }\n\n  async iterateGridCell(x: number, y: number, callback: (gameObject: GameObject) => Promise<void>) {\n    const layers = Object.keys(this.scene.layers);\n    for (const layer of layers) {\n      const tag = `${layer}_${x}_${y}`;\n      const gameObject = this.grid[tag];\n      if (gameObject) {\n        await callback(gameObject);\n      }\n    }\n  }\n\n  getRevealedCells() {\n    const cells: Vector2[] = [];\n    this.revealed.forEach((tag) => {\n      const [x, y] = tag.split(\"_\").map(Number);\n      cells.push(vec2(x, y));\n    });\n    return cells;\n  }\n\n  async iterateRevealedCells(callback: (gameObject: GameObject) => Promise<void>) {\n    const cells = this.getRevealedCells();\n    for (const cell of cells) {\n      for (const layer of Object.keys(this.scene.layers)) {\n        const tag = `${layer}_${cell.x}_${cell.y}`;\n        const gameObject = this.grid[tag];\n        if (gameObject) {\n          await callback(gameObject);\n        }\n      }\n    }\n  }\n\n  async fixWorld() {\n    if (this.scene.clearFogOfWar) {\n      this.clearFogOfWar();\n    }\n\n    const entries = Object.entries(this.grid);\n    for (const [tag, gameObject] of entries) {\n      if (gameObject.elem?.condition) {\n        let conditionMet = true;\n        if (gameObject.elem.condition.tile) {\n          conditionMet = false;\n          const tiles = Array.isArray(gameObject.elem.condition.tile) ? gameObject.elem.condition.tile : [gameObject.elem.condition.tile];\n          for (const tile of tiles) {\n            await this.iterateGridCell(gameObject.px, gameObject.py, async (target) => {\n              if (target?.elem?.name === tile) {\n                conditionMet = true;\n              }\n            });\n          }\n        }\n        let violationMet = false;\n        if (gameObject.elem.condition.noTile) {\n          const tiles = Array.isArray(gameObject.elem.condition.noTile) ? gameObject.elem.condition.noTile : [gameObject.elem.condition.noTile];\n          for (const tile of tiles) {\n            for (const layer of Object.keys(this.scene.layers)) {\n              const tag = `${layer}_${gameObject.px}_${gameObject.py}`;\n              const target = this.grid[tag];\n              if (target?.elem?.name === tile) {\n                violationMet = true;\n              }\n            }\n          }\n        }\n        if (gameObject.elem.condition.zeroUnit) {\n          const tag = `unit_${gameObject.px}_${gameObject.py}`;\n          const target = this.grid[tag];\n          if (target) {\n            violationMet = true;\n          }\n        }\n        if (!conditionMet || violationMet) {\n          gameObject.doom(true);\n          delete this.grid[tag];\n        }\n      }\n    }\n  }\n\n  private shiftCamera() {\n    if (this.inUI) {\n      // return;\n    }\n    if (!this.hud.onKnob) {\n      if (!this.mousePosDown && mouseWasPressed(0)) {\n        this.mousePosDown = vec2(mousePos.x, mousePos.y);\n      }\n    }\n    if (this.mousePosDown && mouseWasReleased(0)) {\n      this.mousePosDown = undefined;\n      if (!this.selected) {\n        this.refreshCursor();\n      }\n      if (this.shifting) {\n        this.shifting = 0;\n        this.doneShifting = Date.now();\n        this.refreshCursor();\n      }\n    }\n\n    if (this.mousePosDown) {\n      const dx = mousePos.x - this.mousePosDown.x;\n      const dy = mousePos.y - this.mousePosDown.y;\n      if (dx || dy) {\n        const mul = 10;\n        this.camShift.set(this.camShift.x - dx * mul, this.camShift.y - dy * mul);\n        this.mousePosDown.set(mousePos.x, mousePos.y);\n        this.cursor?.hide();\n        this.shifting = Date.now();\n        this.doneShifting = 0;\n      }\n    }\n\n    const dx = this.camShift.x - cameraPos.x;\n    const dy = this.camShift.y - cameraPos.y;\n    const mul = .1;\n    setCameraPos(cameraPos.set(Math.round((cameraPos.x + dx * mul) * cameraScale) / cameraScale, Math.round((cameraPos.y + dy * mul) * cameraScale) / cameraScale));\n  }\n\n  defineElem(elem: Elem) {\n    if (elem.definition) {\n      const definition = this.scene.definitions.find(def => def.name === elem.definition);\n      if (definition) {\n        Object.entries(definition).forEach(([key, value]) => {\n          const e = elem as Record<string, any>;\n          if (e[key] === undefined) {\n            e[key] = JSON.parse(JSON.stringify(value));\n          }\n        });\n        delete elem.definition;\n      }\n    }\n    return elem;\n  }\n\n  private refreshElem(elem: Elem) {\n    this.defineElem(elem);\n    if (elem.gameObject) {\n      const entry = this.ensureElem(elem);\n      if (entry.updateTime !== elem.lastUpdate) {\n        entry.gameObject?.forEach(gameObject => {\n          gameObject.refresh(elem);\n        });\n        entry.updateTime = elem.lastUpdate;\n      }\n    } else {\n      const entry = this.entries.get(elem);\n      if (entry) {\n        entry.gameObject?.forEach(gameObject => gameObject.refresh(elem));\n        entry.gameObject.clear();\n        this.entries.delete(elem);\n      }\n    }\n  }\n\n  private ensureElem(elem: Elem): Entry {\n    let entry = this.entries.get(elem);\n    if (!entry) {\n      entry = {\n        gameObject: new Set(),\n      };\n      this.entries.set(elem, entry);\n      if (elem.gameObject && !entry.gameObject.size) {\n        const chance = elem.group?.chance ?? 1;\n        const [col, row] = elem.group?.grid ?? [1, 1];\n        const farFromCenter = elem.group?.farFromCenter ?? 0;\n        for (let x = 0; x < col; x++) {\n          for (let y = 0; y < row; y++) {\n            if (farFromCenter) {\n              const distance = Math.abs(x - Math.floor(col / 2)) + Math.abs(y - Math.floor(row / 2));\n              if (distance < farFromCenter) {\n                continue;\n              }\n            }\n            if (Math.random() <= chance) {\n              const xx = x - Math.floor(col / 2);\n              const yy = y - Math.floor(row / 2);\n              if ((elem.type === \"decor\" || elem.water) && Math.abs(xx) <= 1 && Math.abs(yy) <= 1) {\n                continue;\n              }\n\n              if (elem.type === \"cloud\" && this.isRevealed(xx, yy)) {\n                continue;\n              }\n              const gameObject = new GameObject(this, vec2(xx, yy));\n              entry.gameObject.add(gameObject);\n              gameObject.refresh(elem);\n            }\n          }\n        }\n      }\n    }\n    return entry;\n  }\n\n  private sanitizeElem(elem: Elem) {\n    if (!elem.lastUpdate) {\n      elem.lastUpdate = Date.now();\n    }\n    if (elem.gameObject) {\n      if (!elem.gameObject.pos) {\n        elem.gameObject.pos = [0, 0];\n      }\n      if (!elem.gameObject.size) {\n        elem.gameObject.size = [1, 1];\n      }\n    }\n  }\n\n  countRevealPotential(x: number, y: number) {\n    let count = 0;\n    for (let xx = -1; xx <= 1; xx++) {\n      for (let yy = -1; yy <= 1; yy++) {\n        if (this.grid[`tile_${x + xx}_${y + yy}`] && !this.isRevealed(x + xx, y + yy)) {\n          count++;\n        }\n      }\n    }\n    return count;\n  }\n\n  getResources(x: number, y: number) {\n    const resources: Elem[\"resourcesProduced\"] = {};\n    Object.keys(this.scene.layers).forEach((layer) => {\n      const tag = `${layer}_${x}_${y}`;\n      const gameObject = this.grid[tag];\n      if (gameObject && !gameObject?.doomed) {\n        resources.wheat = (resources.wheat ?? 0) + (gameObject.elem?.resourcesProduced?.wheat ?? 0);\n        resources.wood = (resources.wood ?? 0) + (gameObject.elem?.resourcesProduced?.wood ?? 0);\n        resources.brain = (resources.brain ?? 0) + (gameObject.elem?.resourcesProduced?.brain ?? 0);\n        resources.gold = (resources.gold ?? 0) + (gameObject.elem?.resourcesProduced?.gold ?? 0);\n        resources.trade = (resources.trade ?? 0) + (gameObject.elem?.resourcesProduced?.trade ?? 0);\n\n        if (gameObject.elem?.type === \"house\" && this.isResearched(\"productivity\", this.getPlayer())) {\n          resources.wood = (resources.wood ?? 0) + 1;\n        }\n      }\n    });\n\n    return Math.max(resources.wheat ?? 0, 0)\n      + Math.max(resources.wood ?? 0, 0)\n      + Math.max(resources.brain ?? 0, 0)\n      + Math.max(resources.gold ?? 0, 0)\n      + Math.max(resources.trade ?? 0, 0)\n      ? resources : undefined;\n  }\n\n  isRevealed(x: number, y: number) {\n    return this.revealed.has(`${x}_${y}`);\n  }\n\n  clearCloud(x: number, y: number) {\n    if (this.isRevealed(x, y)) {\n      return;\n    }\n    const tag = `${x}_${y}`;\n    this.revealed.add(tag);\n    const gameObject = this.grid[`cloud_${x}_${y}`];\n    if (gameObject) {\n      gameObject.doom();\n      const elem = gameObject.elem;\n      if (elem) {\n        const entry = this.entries.get(elem);\n        if (entry) {\n          entry.gameObject.delete(gameObject);\n        }\n      }\n      delete this.grid[tag];\n    }\n  }\n\n  private checkOnMoveOptions(x: number, y: number) {\n    this.onMoveOption = false;\n    if (!this.selected?.moveOptions) {\n      return;\n    }\n    const selectedAnimation = this.selected.elem?.selected?.moveIndic?.selectedAnimation\n    const moveOptionAnimation = this.selected.elem?.selected?.moveIndic?.animation;\n    if (!selectedAnimation || !moveOptionAnimation) {\n      return;\n    }\n\n    const moveOptions = Object.values(this.selected.moveOptions);\n    if (moveOptions.length) {\n      let hoveringMoveOption = false;\n      moveOptions.forEach((option) => {\n        if (option.px === x && option.py === y) {\n          hoveringMoveOption = true;\n        }\n        option.animation = this.animation.getInfo(\n          option.px === x && option.py === y ? selectedAnimation : moveOptionAnimation);\n      });\n      if (hoveringMoveOption) {\n        this.onMoveOption = true;\n      }\n    }\n  }\n\n  private checkOnAttackOptions(x: number, y: number) {\n    this.onMoveOption = false;\n    if (!this.selected?.attackOptions) {\n      return;\n    }\n    const selectedAnimation = this.selected.elem?.selected?.moveIndic?.selectedAnimation\n    const moveOptionAnimation = this.selected.elem?.selected?.moveIndic?.animation;\n    if (!selectedAnimation || !moveOptionAnimation) {\n      return;\n    }\n\n    const attackOptions = Object.values(this.selected.attackOptions);\n    if (attackOptions.length) {\n      let hoveringAttackOption = false;\n      attackOptions.forEach((option) => {\n        if (option.px === x && option.py === y) {\n          hoveringAttackOption = true;\n        }\n        option.animation = this.animation.getInfo(\n          option.px === x && option.py === y ? selectedAnimation : moveOptionAnimation);\n      });\n      if (hoveringAttackOption) {\n        this.onMoveOption = true;\n      }\n    }\n  }\n\n  onCursorMove(x: number, y: number) {\n    this.checkOnMoveOptions(x, y);\n    this.checkOnAttackOptions(x, y);\n    this.refreshCursor();\n  }\n\n  async onTap(x: number, y: number, mouseX: number, mouseY: number) {\n    this.onMoveOption = false;\n    this.refreshCursor();\n    if (Date.now() - this.doneShifting < 100) {\n      return;\n    }\n    if (this.inUI) {\n      return;\n    }\n    if (this.getPlayer() === 0) {\n      return;\n    }\n    if (this.selected?.canMoveTo(x, y) && this.selected.hasMoveOptionToLandOn(x, y)) {\n      this.selected.moveTo(x, y);\n      return;\n    }\n    if (this.selected?.canAttackAt(x, y) && this.selected.hasAttackOptionOn(x, y)) {\n      this.selected.attackAt(x, y);\n      return;\n    }\n    let unit: GameObject | undefined = this.grid[`unit_${x}_${y}`];\n    if (!await unit?.canAct()) {\n      unit = undefined;\n    }\n    const house = this.grid[`house_${x}_${y}`];\n    const nextSelection = unit === this.selected ? house : unit;\n    this.setSelection(this.selected === nextSelection ? undefined : nextSelection);\n  }\n\n  async setSelection(gameObject: GameObject | undefined) {\n    if (this.selected === gameObject) {\n      return;\n    }\n    if (gameObject?.elem?.waiting) {\n      gameObject.elem.waiting = false;\n      gameObject.refreshAlpha();\n    }\n    //  de-select previous\n    const previousSelected = this.selected;\n    this.selected = undefined;\n    await previousSelected?.onSelectChange();\n    await this.hud.showSelected(undefined);\n    if (previousSelected?.elem?.adviseOnDeselect && !this.advise.has(previousSelected.elem.adviseOnDeselect.name)) {\n      this.advise.add(previousSelected.elem.adviseOnDeselect.name);\n      await this.hud.showDialog(previousSelected.elem.adviseOnDeselect.message, previousSelected.elem.adviseOnDeselect.music, previousSelected.elem.adviseOnDeselect.voice);\n    }\n\n    //  select new\n    if (gameObject?.elem?.advise && !this.advise.has(gameObject.elem.advise.name)) {\n      this.advise.add(gameObject.elem.advise.name);\n      await this.hud.showDialog(gameObject.elem.advise.message, gameObject.elem.advise.music, gameObject.elem.advise.voice);\n    }\n    this.selected = gameObject;\n    await this.selected?.onSelectChange();\n    await this.hud.showSelected(this.selected);\n    if (!this.shifting && this.selected) {\n      this.makeWithinView(this.selected);\n    }\n    if (this.selected) {\n      this.lastUnit = this.selected;\n    } else {\n      this.checkForAnyMove(true);\n    }\n  }\n\n  makeWithinView(gameObject: GameObject) {\n    const finalDestination = gameObject.finalDestination();\n    const dx = finalDestination.x - this.camShift.x;\n    const dy = finalDestination.y - this.camShift.y;\n    const diffX = 4, diffY = 2;\n    if (Math.abs(dx) > diffX) {\n      this.camShift.set(finalDestination.x, this.camShift.y);\n    }\n    if (Math.abs(dy) > diffY) {\n      this.camShift.set(this.camShift.x, finalDestination.y);\n    }\n  }\n\n  hovering(gameObject: GameObject) {\n    if (this.inUI) {\n      return false;\n    }\n    return gameObject.px === this.cursor?.px && gameObject.py === this.cursor?.py;\n  }\n\n  refreshCursor() {\n    if (this.hovered || this.inUI || this.onMoveOption) {\n      this.cursor?.hide();\n    } else {\n      this.cursor?.show();\n    }\n  }\n\n  setHovered(gameObject: GameObject | undefined) {\n    if (this.hovered === gameObject) {\n      return;\n    }\n    this.hovered = gameObject;\n    if (this.hovered) {\n      this.lastHovered = gameObject;\n    }\n    this.refreshCursor();\n  }\n\n  async checkCondition(condition?: Condition, obj?: GameObject) {\n    if (!condition) {\n      return null;\n    }\n    if (condition.levelBelowEqual && (obj?.elem?.level ?? 0) <= condition.levelBelowEqual[0]) {\n      return condition.levelBelowEqual[1] ?? \"true\";\n    }\n    if (condition.occupied && obj) {\n      const tag = GameObject.getTag(condition.occupied[0], obj?.px, obj?.py);\n      if (this.grid[tag]) {\n        return condition.occupied[1] ?? \"true\";\n      }\n    }\n    if (condition.harvesting && obj && obj.elem?.harvesting) {\n      return \"true\";\n    }\n    if (condition.notHarvesting && obj && !obj.elem?.harvesting) {\n      return \"true\";\n    }\n    if (obj) {\n      let proxyCheck: string | null = null;\n      const PROXY_CHECK = [condition.proximity, condition.nonProximity];\n      for (const check of PROXY_CHECK) {\n        if (check && !proxyCheck) {\n          const [item, message] = check;\n          if (item) {\n            const nearby = await obj.findNearby(obj => {\n              if (obj.elem?.name === item) {\n                return true;\n              }\n              if (item === \"foe\" && obj.elem?.type === \"unit\" && obj.elem?.owner !== obj.elem?.owner) {\n                return true;\n              }\n              return false;\n            });\n            console.log(item, nearby);\n            if (condition.proximity === check && nearby.size) {\n              proxyCheck = message ?? \"true\";\n            }\n            if (condition.nonProximity === check && !nearby.size) {\n              proxyCheck = message ?? \"true\";\n            }\n          }\n        }\n      }\n      if (proxyCheck) {\n        return proxyCheck;\n      }\n    }\n    if (condition.cannotAct) {\n      return !obj?.canAct() ? condition.cannotAct[1] : null;\n    }\n    if (condition.unitLimit) {\n      const level = obj?.elem?.level ?? 0;\n      const [unit, message] = condition.unitLimit;\n      const support = await obj?.countUnitSupport(unit);\n      if (support && support >= level) {\n        return message ?? \"true\";\n      }\n    }\n    return null;\n  }\n\n  async gotoNextTurn() {\n    // Increase turn count\n    if (this.scene.turn) {\n      this.setSelection(undefined);\n      //  Change player\n      if (this.scene.turn.player < this.scene.players.length) {\n        this.scene.turn.player++;\n      } else {\n        this.scene.turn.player = 0;\n        this.scene.turn.turn++;\n      }\n      const player = this.getPlayer();\n      if (this.scene.turn && player) {\n        await this.collectResources(player);\n      }\n      this.refreshUnitsLabels();\n      if (this.getUnits(player).size) {\n        await this.giveUnitsTurns(player);\n        await this.selectNext();\n      } else if (this.isAiPlayer(player)) {\n        await this.gotoNextTurn();\n      }\n      await this.checkForAnyMove(true);\n    }\n\n    this.hud.updated = false;\n  }\n\n  refreshUnitsLabels() {\n    Object.entries(this.grid).forEach(([tag, gameObject]) => {\n      if (gameObject.elem?.type === \"unit\") {\n        gameObject.refreshLabel();\n      }\n    });\n  }\n\n  async giveUnitsTurns(player: number) {\n    const units = this.getUnits(player);\n    for (const gameObject of units) {\n      await gameObject.giveTurn();\n    }\n  }\n\n  async calculateRevenue(player: number) {\n    const playerResources = this.scene.players[player - 1]?.resources;\n    if (!playerResources) {\n      return 0;\n    }\n    let trade = 0;\n    const visited = new Set<string>();\n    await this.iterateRevealedCells(async (gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        if (!visited.has(`${gameObject.px}_${gameObject.py}`)) {\n          visited.add(`${gameObject.px}_${gameObject.py}`);\n          const resources = this.getResources(gameObject.px, gameObject.py);\n          if (resources) {\n            trade += resources.trade ?? 0;\n          }\n        }\n      }\n    });\n    return trade;\n  }\n\n  async collectResources(player: number) {\n    await this.ensureResearch(player);\n    const playerResources = this.scene.players[player - 1]?.resources;\n    if (!playerResources) {\n      return;\n    }\n    await this.iterateRevealedCells(async (gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        const resources = this.getResources(gameObject.px, gameObject.py);\n        if (resources) {\n          gameObject.showResources(gameObject.px, gameObject.py, player, true);\n          gameObject.accumulateResources(resources);\n          delete elem.lastUpdate;\n        }\n      }\n    });\n    // cap resources\n    await this.iterateRevealedCells(async (gameObject) => {\n      const elem = gameObject.elem;\n      if (elem?.owner === player && elem.harvesting) {\n        gameObject.checkResourceCaps();\n      }\n    })\n\n    //  Save global resources\n    const globalResources = await this.calculateResourceRevenue(player);\n    Object.entries(globalResources).forEach(([resource, value]) => {\n      const r = resource as keyof Resources;\n      playerResources[r] = (playerResources[r] ?? 0) + value;\n    });\n\n    //  check researched resources\n    await this.checkResearch(this.getPlayer());\n  }\n\n  availableInventionsToDiscover(player: number) {\n    const allInventions = this.scene.research;\n    const playerResearch = this.scene.players[player - 1]?.research;\n    return allInventions.filter(invention => {\n      if (playerResearch?.[invention.name]) {\n        return false;\n      }\n      if (!invention.forceInDebug && !DEBUG) {\n        const dependency = invention.dependency;\n        if (dependency && dependency.some(dep => !playerResearch?.[dep])) {\n          return false;\n        }\n      }\n      return true;\n    });\n  }\n\n  async ensureResearch(player: number) {\n    const globalResources = await this.calculateResourceRevenue(player);\n    const brainsPerTurn = globalResources.brain;\n    if (brainsPerTurn) {\n      const currentResearch = this.getResearchInfo(player);\n      if (!currentResearch) {\n        await this.hud.showDialog(\"Use your research points to unlock new inventions.\\nThis will help you evolve your animals and buildings.\");\n        await this.findNextResearch(player);\n      }\n    }\n  }\n\n  async checkResearch(player: number) {\n    const researchPoints = this.scene.players[player - 1]?.resources.brain ?? 0;\n    const currentResearchName = this.scene.players[player - 1]?.currentResearch;\n    const currentResearch = this.scene.research.find(research => research.name === currentResearchName);\n    if (researchPoints) {\n      if (currentResearch) {\n        if (researchPoints >= currentResearch.cost) {\n          if (researchPoints >= currentResearch.cost) {\n            await this.discover(player, currentResearch);\n          }\n        }\n      } else {\n        await this.findNextResearch(player);\n      }\n    }\n  }\n\n  async findNextResearch(player: number) {\n    const globalResources = await this.calculateResourceRevenue(player);\n    const brainsPerTurn = globalResources.brain;\n    const currentBrains = this.getPlayerResource(\"brain\", player);\n    await this.hud.promptForResearch(this.availableInventionsToDiscover(player), brainsPerTurn, currentBrains);\n  }\n\n  async discover(player: number, invention: Research) {\n    const playerInfo = this.scene.players[player - 1];\n    if (!playerInfo.research) {\n      playerInfo.research = {};\n    }\n    playerInfo.research[invention.name] = Date.now();\n    this.updateResource(\"brain\", brains => Math.max(0, brains - invention.cost), this.getPlayer());\n    await this.hud.showResearchDialog(invention);\n\n    if (invention.action) {\n      console.log(player, invention.name, playerInfo.research, playerInfo.research[invention.name]);\n      await this.performAction(invention.action);\n    }\n    await this.findNextResearch(player);\n  }\n\n  async checkForAnyBuilding() {\n    let anyBuilding = undefined;\n    await this.iterateRevealedCells(async (gameObject) => {\n      if (gameObject.elem?.type === \"house\"\n        && await gameObject.canAffordMoreHarvester()) {\n        anyBuilding = gameObject;\n      }\n    });\n    return anyBuilding;\n  }\n\n  async checkForAnyMove(forFlashingOnly?: boolean) {\n    //  check if any unit can move\n    let anyMove = undefined;\n    await this.iterateRevealedCells(async (gameObject) => {\n      if (gameObject.elem?.owner === this.scene.turn?.player && await gameObject.canAct()) {\n        if (gameObject.elem?.type === \"unit\" && !gameObject.elem?.harvesting) {\n          anyMove = gameObject;\n        }\n        //  else if (gameObject?.elem?.type === \"house\"\n        //   && (gameObject.canAffordMoreHarvester() || gameObject.resourceMaxedOut())) {\n        //   anyMove = gameObject;\n        // }\n      }\n    });\n    if (!anyMove) {\n      if (this.autoEndTurn && !forFlashingOnly) {\n        this.hud.flashEndTurn(true);\n        setTimeout(() => {\n          this.gotoNextTurn();\n        }, 500);\n      } else {\n        this.hud.flashEndTurn();\n      }\n    }\n    this.hud.updated = false;\n  }\n\n  getAllGlobalResources() {\n    return this.getAllResources()\n      .filter(resource => !this.getResourceType(resource)?.hidden && this.getResourceType(resource)?.global)\n      .sort((a, b) => b.localeCompare(a))\n  }\n\n  async calculateResourceRevenue(player: number) {\n    const revenue = await this.calculateRevenue(player);\n    const RESOURCES = this.getAllGlobalResources();\n    const resources: Record<keyof Resources, number> = {\n      wheat: 0,\n      wood: 0,\n      gold: 0,\n      brain: 0,\n      trade: 0\n    };\n    RESOURCES.forEach((resource, index) => {\n      let taxValue = this.getTaxValue(player);\n      let revenueValue = Math.round(revenue * taxValue / 100);\n      if (index === 0) {\n        taxValue = 100 - taxValue;\n        revenueValue = revenue - revenueValue;\n      }\n      resources[resource] = revenueValue;\n    });\n    return resources;\n  }\n\n  getUnits(player?: number) {\n    const units: Set<GameObject> = new Set();\n    Object.entries(this.grid).forEach(([tag, gameObject]) => {\n      if (gameObject.elem?.type === \"unit\" && (player === undefined || gameObject.elem?.owner === player)) {\n        units.add(gameObject);\n      }\n    });\n    return units;\n  }\n\n  private getAllUnitsOrHouses() {\n    const units: Set<GameObject> = new Set();\n    Object.entries(this.grid).forEach(([tag, gameObject]) => {\n      if (gameObject.elem?.type === \"unit\" || gameObject.elem?.type === \"house\") {\n        units.add(gameObject);\n      }\n    });\n    return units;\n  }\n\n  private getAllResources() {\n    return Object.keys(this.scene.resources) as (keyof Resources)[];\n  }\n\n  getTaxValue(player: number | undefined) {\n    return this.scene.players[(player ?? 0) - 1]?.tax ?? 0;\n  }\n\n  updateTaxValue(player: number, value: number) {\n    if (this.scene.players[player - 1]) {\n      this.scene.players[player - 1].tax = value;\n    }\n  }\n\n  getPlayerResource(resource: keyof Resources, player: number) {\n    return this.scene.players[player - 1]?.resources[resource] ?? 0;\n  }\n\n  getPlayer() {\n    return this.scene.turn?.player ?? 0;\n  }\n\n  getTurn() {\n    return this.scene.turn?.turn ?? 0;\n  }\n\n  getResourceType(resource: keyof Resources): ResourceType | undefined {\n    return this.scene.resources[resource];\n  }\n\n  async getUnitRotation(player: number) {\n    const cellsRotation: GameObject[] = [];\n    const playerUnits = this.getUnits(player);\n    for (const gameObject of playerUnits) {\n      let include = false;\n      if (this.selected === gameObject) {\n        include = true;\n      } else if (await gameObject.canAct()) {\n        if (gameObject.elem?.type === \"unit\"\n          && !gameObject.elem?.harvesting && !gameObject.elem?.waiting) {\n          include = true;\n        }\n        //  else if (gameObject?.elem?.type === \"house\"\n        //   && (gameObject.canAffordMoreHarvester() || gameObject.resourceMaxedOut())) {\n        //   include = true;\n        // }\n      }\n      if (include) {\n        cellsRotation.push(gameObject);\n      }\n    }\n\n    if (player === 0) {\n      cellsRotation.sort((a, b) => this.compareAI(a, b));\n    }\n\n    return cellsRotation;\n  }\n\n  compareAI(a: GameObject, b: GameObject) {\n    const px = cameraPos.x, py = cameraPos.y;\n    const distA = Math.abs(a.px - px) + Math.abs(a.py - py);\n    const distB = Math.abs(b.px - px) + Math.abs(b.py - py);\n    return distA - distB;\n  }\n\n  async selectNext() {\n    const cellsRotation: GameObject[] = await this.getUnitRotation(this.getPlayer());\n    const currentIndex = this.selected ? cellsRotation.indexOf(this.selected) : -1;\n    if (!cellsRotation.length) {\n      this.hud.flashEndTurn();\n    } else {\n      // rotate cells\n      let nextIndex = (currentIndex + 1) % cellsRotation.length;\n      this.setSelection(cellsRotation[nextIndex]);\n    }\n  }\n\n  unitAt(x: number, y: number): GameObject | undefined {\n    return this.grid[`unit_${x}_${y}`];\n  }\n\n  houseAt(x: number, y: number): GameObject | undefined {\n    return this.grid[`house_${x}_${y}`];\n  }\n\n  updateResource(resource: keyof Resources, value: number | ((value: number) => number), player: number) {\n    const val = typeof value === \"function\" ? value(this.scene.players[player - 1].resources[resource] ?? 0) : value;\n    this.scene.players[player - 1].resources[resource] = val;\n    this.hud.updated = false;\n  }\n\n  isEmptySpot(x: number, y: number) {\n    const unitTag = GameObject.getTag(\"unit\", x, y);\n    const houseTag = GameObject.getTag(\"house\", x, y);\n    const tileOverlayTag = GameObject.getTag(\"tile_overlay\", x, y);\n\n    if (!this.grid[unitTag] && !this.grid[houseTag] && this.grid[tileOverlayTag]?.elem?.name !== \"lake\") {\n      return true;\n    }\n    return false;\n  }\n\n  findEmptySpotsAround(x: number, y: number) {\n    const emptySpots: Vector2[] = [];\n    for (let xx = -1; xx <= 1; xx++) {\n      for (let yy = -1; yy <= 1; yy++) {\n        if (xx || yy) {\n          if (this.isEmptySpot(x + xx, y + yy)) {\n            emptySpots.push(vec2(x + xx, y + yy));\n          }\n        }\n      }\n    }\n    return emptySpots;\n\n  }\n\n  async unlockRewards(obj: GameObject) {\n    await this.iterateGridCell(obj.px, obj.py, async (gameObject) => {\n      const rewards = gameObject.elem?.rewards;\n      if (rewards) {\n        const reward = rewards[Math.floor(Math.random() * rewards.length)];\n        if (!reward) {\n          return;\n        }\n\n        if (reward.gold) {\n          const [min, max] = reward.gold;\n          const gold = Math.floor(Math.random() * (max - min + 1) + min);\n          obj.updateResource(\"gold\", g => g + gold);\n          obj.showResources(obj.px, obj.py, obj.elem?.owner, true, {\n            gold,\n          });\n          this.hud.updated = false;\n          await this.hud.showDialog(`You found ${gold} gold!`);\n        }\n        if (reward.invention) {\n          if (!this.scene.players[this.getPlayer() - 1].research) {\n            await this.findNextResearch(this.getPlayer());\n          }\n          const currentResearch = this.getResearchInfo(this.getPlayer());\n          if (currentResearch) {\n            await this.discover(this.getPlayer(), currentResearch);\n          }\n        }\n        if (reward.spawnFoes) {\n          const emptySpots: Vector2[] = this.findEmptySpotsAround(obj.px, obj.py);\n          const { count, element } = reward.spawnFoes;\n          const actualCount = Math.min(emptySpots.length, Math.floor(Math.random() * (count[1] - count[0] + 1) + count[0]));\n          emptySpots.sort(() => Math.random() - .5);\n          for (let i = 0; i < actualCount; i++) {\n            const spot = emptySpots[i];\n            const newElem = this.addSceneElemAt(element, spot.x, spot.y, {\n              savage: true,\n            });\n            newElem.gameObject.lastDx = Math.sign(obj.px - spot.x) || 1;\n          }\n          await this.hud.showDialog(`You have been ambushed by ${actualCount} savages!`);\n        }\n        if (reward.unit) {\n          const emptySpots: Vector2[] = this.findEmptySpotsAround(obj.px, obj.py);\n          if (emptySpots.length) {\n            const spot = emptySpots[Math.floor(Math.random() * emptySpots.length)];\n            const newElem = this.addSceneElemAt(reward.unit, spot.x, spot.y, {\n              owner: obj?.elem?.owner\n            });\n            newElem.gameObject.lastDx = Math.sign(obj.px - spot.x) || 1;\n            await this.hud.showDialog(`A ${reward.unit.name ?? reward.unit.definition} has joined your flock!`);\n          }\n        }\n        gameObject.doom(true);\n      }\n    });\n  }\n\n  addSceneElemAt(elem: Elem, x: number, y: number, config: Partial<Elem> = {}) {\n    const tag = GameObject.getTag(elem.type, x, y);\n    if (this.grid[tag]) {\n      return;\n    }\n    const newElem = JSON.parse(JSON.stringify(elem));\n    this.defineElem(newElem);\n    newElem.gameObject = newElem.gameObject ?? {};\n    newElem.gameObject.pos = [x, y];\n\n    Object.assign(newElem, config);\n\n    this.ensureElem(newElem);\n    this.scene.elems.push(newElem);\n    return newElem;\n  }\n\n  getMenu(name: string | undefined) {\n    return this.scene.menu?.find((m) => m.name === name);\n  }\n\n  isAiPlayer(player: number | undefined) {\n    return !player || this.scene.players[player - 1]?.ai;\n  }\n\n  isResearched(research: string, player: number) {\n    return this.scene.players[player - 1]?.research?.[research];\n  }\n\n  research(research: string, player: number) {\n    this.scene.players[player - 1].currentResearch = research;\n  }\n\n  getResearchInfo(player: number) {\n    const current = this.scene.players[player - 1]?.currentResearch;\n    return this.scene.research.find(research => research.name === current);\n  }\n\n  quickActions() {\n    return this.scene.quickActions ?? [];\n  }\n\n  async performQuickAction(action: QuickAction) {\n    if (!this.selected?.elem) {\n      return;\n    }\n    switch (action.name) {\n      case \"wait\":\n        this.selected.elem.waiting = true;\n        this.selected.refreshAlpha();\n        this.selected.updated = false;\n        this.setSelection(undefined);\n        await this.selectNext();\n        this.hud.updated = false;\n        break;\n      case \"abandon\":\n        this.selected.doom(true);\n        await this.selectNext();\n        this.hud.updated = false;\n        break;\n    }\n  }\n\n  async performAction(action: Action, obj?: GameObject) {\n    if (action.selfDestroy) {\n      obj?.doom(true);\n    }\n    if (action.destroy && obj) {\n      await this.iterateGridCell(obj.px, obj.py, async (cell: GameObject) => {\n        if (cell.elem?.name === action.destroy) {\n          cell.doom();\n        }\n      });\n    }\n    if (action.create && obj) {\n      const elem: Elem = JSON.parse(JSON.stringify(action.create));\n      this.addSceneElemAt(elem, obj.px, obj.py, {\n        owner: obj?.elem?.owner,\n        home: [obj.px, obj.py],\n      });\n    }\n    if (action.deselect) {\n      this.setSelection(undefined);\n    }\n    if (action.level && obj?.elem) {\n      obj.updateLevel((obj.elem.level ?? 0) + action.level)\n      obj.refreshLabel();\n    }\n    if (action.harvest && obj?.elem) {\n      obj.setHarvesting(true);\n    }\n    if (action.stopHarvest && obj?.elem) {\n      obj.setHarvesting(false);\n    }\n    if (action.clearFogOfWar) {\n      this.scene.clearFogOfWar = true;\n      this.worldChanged = true;\n    }\n    if (action.updateHouseCloud) {\n      await this.iterateRevealedCells(async (gameObject) => {\n        if (gameObject.elem?.type === \"house\" && gameObject.elem?.owner === this.getPlayer()) {\n          gameObject.clearedCloud = false;\n          gameObject.updated = false;\n        }\n      });\n    }\n    if (action.spaceship) {\n      await this.hud.showSpaceshipDialog();\n    }\n  }\n}\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const CABANA_DEFINITION: Elem = {\n  name: \"cabana\",\n  type: \"house\",\n  gameObject: {\n    offset: [0, .2] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"cabana\",\n  },\n  condition: {\n    tile: \"plain\",\n    noTile: [\"lake\", \"mountain\", \"tree\"],\n    zeroUnit: true,\n  },\n  rewards: [\n    { gold: [20, 40] },\n    // { invention: 1 },\n    {\n      spawnFoes: {\n        count: [1, 2],\n        element: {\n          definition: \"hobo\"\n        },\n      }\n    },\n    {\n      unit: {\n        definition: \"dog\",\n        turn: {\n          moves: 0,\n          attacks: 0,\n        }\n      }\n    },\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const COW_DEFINITION: Elem = {\n  name: \"cow\",\n  type: \"unit\",\n  hitpoints: 15,\n  maxHitPoints: 15,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.06,\n  },\n  animation: {\n    name: \"cow\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"cow_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  clearCloud: true,\n  move: {\n    animation: \"cow_jump\",\n    distance: 2,\n    disabled: {\n      harvesting: true,\n    },\n  },\n  harvest: {\n    animation: \"cow_sleep\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  worker: true,\n  turn: {\n    moves: 1,\n    attacks: 0,\n    actions: 1,\n  },\n  closeToHome: true,\n  endlessMove: true,\n  attack: {\n    damage: 2,\n    defense: 1,\n    disabled: true,\n  },\n  advise: {\n    name: \"cow\",\n    message: \"Your cow must remain close to home.\\nUse it to harvest nearby resources.\\nYou can also find some buttons on the bottom left for additional actions.\\nHover over them to see what they do.\"\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const DOG_DEFINITION: Elem = {\n  name: \"dog\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"dog\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"dog_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"dog_jump\",\n    distance: 2,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 2,\n    defense: 1,\n    moveAfterAttack: true,\n    attackAfterMove: true,\n  },\n  advise: {\n    name: \"dog\",\n    message: \"Dogs move 2 tiles each turn, and they can move after attacks.\\nUse them to explore the world.\\nYou can also find some buttons on the bottom left for additional actions.\\nHover over them to see what they do.\",\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const HOUSE_DEFINITION: Elem = {\n  name: \"house\",\n  type: \"house\",\n  level: 1,\n  gameObject: {\n    offset: [0, .7] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"house\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"house\",\n    indic: {\n      animation: \"indic\",\n    },\n  },\n  dynamic: true,\n  settler: true,\n  harvesting: true,\n  building: true,\n  turn: {\n    moves: 0,\n    attacks: 0,\n    actions: 1,\n  },\n  resourcesProduced: {\n    // wood: 1,\n    trade: 1,\n  },\n  rewards: [],\n  advise: {\n    name: \"house\",\n    message: \"Nice house! In this house, you collect resources.\\nYou can also spawn new animals once they are researched.\",\n  },\n  adviseOnDeselect: {\n    name: \"house-deselect\",\n    message: \"You can move on to the next turn and collect resources.\",\n  },\n  clearCloud: true,\n  maxLevel: 6,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const RIVER_DEFINITION: Elem = {\n  name: \"river\",\n  type: \"road\",\n  resourcesProduced: {\n    wheat: 1,\n    trade: 1,\n  },\n  gameObject: {\n    size: [2, 2],\n  },\n  animation: {\n    name: \"river\",\n  },\n  // condition: {\n  //   noTile: \"lake\",\n  // },\n  // copy: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SHEEP_DEFINITION: Elem = {\n  name: \"sheep\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"sheep\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"sheep_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"sheep_jump\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  settler: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 2,\n    defense: 1,\n  },\n  advise: {\n    name: \"sheep\",\n    message: \"Your sheep is the foundation of your animal kingdom.\\nUse it to build settlements.\\nFind a good spot with plenty of resources.\",\n    music: true,\n  },\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const BULL_ANIMATION: Anim = {\n  name: \"bull\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    112,\n  ],\n};\n\nexport const BULL_WAIT_ANIMATION: Anim = {\n  name: \"bull_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    112, 113,\n  ],\n};\n\nexport const BULL_JUMP_ANIMATION: Anim = {\n  name: \"bull_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    112, 113,\n  ],\n};\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { BULL_ANIMATION } from \"../animations/bull\";\n\nexport const COW_MENU: Menu = {\n  name: \"cow\",\n  description: \"Cows are your workers.\\nUse them to harvest resources.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  items: [\n    {\n      name: \"harvest\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [55],\n      label: \"harvest\",\n      hidden: {\n        occupied: [\"house\", \"No harvest on house\"],\n        harvesting: true,\n      },\n      disabled: {\n        // nonProximity: [\"house\", \"Must be\\nnext to a house\"],\n        proximity: [\"foe\", \"Nearby foes,\\ntoo dangerous.\"],\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          harvest: true,\n        },\n        {\n          clearMoves: true,\n        },\n      ],\n    },\n    {\n      name: \"stopHarvest\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [51],\n      label: \"stop harvest\",\n      hidden: {\n        notHarvesting: true,\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          stopHarvest: true,\n        },\n      ],\n    },\n    {\n      name: \"bull\",\n      ...BULL_ANIMATION,\n      label: \"evolve into\\nbull\",\n      researchNeeded: [\"taurology\"],\n      resourceCost: {\n        gold: 30,\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"bull\",\n            selfSelect: true,\n          },\n        },\n        {\n          selfDestroy: true,\n        },\n      ],\n    },\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const COW_ANIMATION: Anim = {\n  name: \"cow\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    51,\n  ],\n}\n\nexport const COW_WAIT_ANIMATION: Anim = {\n  name: \"cow_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    51, 52, 51,\n  ],\n};\n\nexport const COW_JUMP_ANIMATION: Anim = {\n  name: \"cow_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 5,\n  frames: [\n    51, 53, 54,\n  ],\n  airFrames: [54],\n};\n\nexport const COW_SLEEP_ANIMATION: Anim = {\n  name: \"cow_sleep\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 10,\n  frames: [\n    55,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const DOG_ANIMATION: Anim = {\n  name: \"dog\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    46,\n  ],\n};\n\nexport const DOG_WAIT_ANIMATION: Anim = {\n  name: \"dog_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    46, 47,\n  ],\n};\n\nexport const DOG_JUMP_ANIMATION: Anim = {\n  name: \"dog_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    47, 48, 49, 49, 50,\n  ],\n  airFrames: [48, 49],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const HOUSE_ANIMATION: Anim = {\n  name: \"house\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    27, 28, 29,\n  ],\n  mul: 20,\n};\n\nexport const CABANA_ANIMATION: Anim = {\n  name: \"cabana\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    61,\n  ],\n};\n\nexport const HOUSE_EXPAND_ANIMATION: Anim = {\n  name: \"house_expand\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    120,\n  ],\n};\n\nexport const VILLAGE_ANIMATION: Anim = {\n  name: \"village\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    121, 122, 123,\n  ],\n  mul: 20,\n}\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SHEEP_ANIMATION: Anim = {\n  name: \"sheep\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    6,\n  ],\n};\n\nexport const SHEEP_WAIT_ANIMATION: Anim = {\n  name: \"sheep_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    6, 7,\n  ],\n};\n\nexport const SHEEP_JUMP_ANIMATION: Anim = {\n  name: \"sheep_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    6, 7, 8, 8,\n  ],\n  airFrames: [8],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SQUIRREL_ANIMATION: Anim = {\n  name: \"squirrel\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    98,\n  ],\n};\n\nexport const SQUIRREL_WAIT_ANIMATION: Anim = {\n  name: \"squirrel_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    98, 99,\n  ],\n};\n\nexport const SQUIRREL_JUMP_ANIMATION: Anim = {\n  name: \"squirrel_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    98, 100, 101, 102,\n  ],\n  airFrames: [100, 101, 102],\n};\n\nexport const SQUIRREL_ATTACK_ANIMATION: Anim = {\n  name: \"squirrel_attack\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 5,\n  frames: [\n    103, 104,\n  ],\n  once: true,\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const TURTLE_ANIMATION: Anim = {\n  name: \"turtle\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    114,\n  ],\n};\n\nexport const TURTLE_WAIT_ANIMATION: Anim = {\n  name: \"turtle_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    114, 115,\n  ],\n};\n\nexport const TURTLE_JUMP_ANIMATION: Anim = {\n  name: \"turtle_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 10,\n  frames: [\n    114, 115,\n  ],\n  airFrames: [114],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const BEAVER_ANIMATION: Anim = {\n  name: \"beaver\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    106,\n  ],\n};\n\nexport const BEAVER_WAIT_ANIMATION: Anim = {\n  name: \"beaver_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 20,\n  frames: [\n    106, 107,\n  ],\n};\n\nexport const BEAVER_JUMP_ANIMATION: Anim = {\n  name: \"beaver_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 3,\n  frames: [\n    106, 108, 109, 106,\n  ],\n  airFrames: [108, 109],\n};\n",
  "import type { MenuItem } from \"../../definition/menu\";\nimport { BEAVER_ANIMATION } from \"../animations/beaver\";\n\nexport const HOUSE_MENU_DEBUG: MenuItem[] = [\n  {\n    name: \"hobo\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [94, 95],\n    label: \"spawn\\nhobo\",\n    disabled: {\n    },\n    actions: [\n      {\n        deselect: true,\n        create: {\n          definition: \"hobo\",\n          selfSelect: true,\n        },\n      },\n    ],\n    debug: true,\n  },\n  {\n    name: \"soldier\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [65, 66, 65, 67],\n    label: \"spawn\\nsoldier\",\n    disabled: {\n    },\n    actions: [\n      {\n        deselect: true,\n        create: {\n          definition: \"soldier\",\n          selfSelect: true,\n        },\n      },\n    ],\n    debug: true,\n  },\n  {\n    name: \"squirrel\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [98],\n    label: \"spawn\\nsquirrel\",\n    hidden: {\n      occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n    },\n    disabled: {\n      cannotAct: [true, \"wait\\nnext turn\"],\n    },\n    actions: [\n      {\n        deselect: true,\n        create: {\n          definition: \"squirrel\",\n          selfSelect: true,\n        },\n      },\n    ],\n    debug: true,\n  },\n  {\n    name: \"beaver\",\n    ...BEAVER_ANIMATION,\n    label: \"spawn\\nbeaver\",\n    hidden: {\n      occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n    },\n    disabled: {\n      cannotAct: [true, \"wait\\nnext turn\"],\n    },\n    actions: [\n      {\n        deselect: true,\n        create: {\n          definition: \"beaver\",\n          selfSelect: true,\n        },\n      },\n    ],\n    debug: true,\n  },\n];\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { COW_ANIMATION } from \"../animations/cow\";\nimport { DOG_ANIMATION } from \"../animations/dog\";\nimport { HOUSE_ANIMATION, VILLAGE_ANIMATION } from \"../animations/house\";\nimport { SHEEP_ANIMATION } from \"../animations/sheep\";\nimport { SQUIRREL_ANIMATION } from \"../animations/squirrel\";\nimport { TURTLE_ANIMATION } from \"../animations/turtle\";\nimport { HOUSE_MENU_DEBUG } from \"./house-menu-debug\";\n\nexport const HOUSE_MENU: Menu = {\n  name: \"house\",\n  description: \"Use settlements to grow your animal kingdom.\",\n  icon: HOUSE_ANIMATION,\n  items: [\n    {\n      name: \"sheep\",\n      imageSource: \"./assets/tiles.png\",\n      ...SHEEP_ANIMATION,\n      label: \"spawn\\nsheep\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        levelBelowEqual: [1, \"Settlement\\nlevel too low\"],\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          level: -1,\n          create: {\n            definition: \"sheep\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"oviculture\"],\n    },\n    {\n      name: \"cow\",\n      imageSource: \"./assets/tiles.png\",\n      ...COW_ANIMATION,\n      resourceCost: {\n        wood: 5,\n      },\n      label: \"spawn\\ncow\",\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        unitLimit: [\"cow\", \"Increase settlement level\\nto spawn more\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"cow\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"bovine\"],\n    },\n    {\n      name: \"dog\",\n      imageSource: \"./assets/tiles.png\",\n      ...DOG_ANIMATION,\n      label: \"spawn\\ndog\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"dog\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"canine\"],\n    },\n    {\n      name: \"squirrel\",\n      imageSource: \"./assets/tiles.png\",\n      ...SQUIRREL_ANIMATION,\n      label: \"spawn\\nsquirrel\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"squirrel\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"squirrel\"],\n    },\n    {\n      name: \"turtle\",\n      ...TURTLE_ANIMATION,\n      label: \"spawn\\nturtle\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"turtle\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"tortoise\"],\n    },\n    {\n      name: \"village\",\n      ...VILLAGE_ANIMATION,\n      label: \"upgrade to\\nvillage\",\n      disabled: {\n        levelBelowEqual: [5, \"You need to level up\\nyour settlement first\"],\n      },\n      resourceCost: {\n        wood: 60,\n      },\n      researchNeeded: [\"village\"],\n      actions: [\n        {\n          selfDestroy: true,\n        },\n        {\n          create: {\n            definition: \"village\",\n            selfSelect: true,\n          },\n        },\n      ]\n    },\n    ...HOUSE_MENU_DEBUG,\n  ],\n};\n",
  "import type { Menu } from \"../../definition/menu\";\n\nexport const SHEEP_MENU: Menu = {\n  name: \"sheep\",\n  description: \"The sheep is your settler.\\nUse it to build settlements.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [6, 7],\n  },\n  items: [\n    {\n      name: \"build\",\n      imageSource: \"./assets/tiles.png\",\n      spriteSize: [64, 64] as [number, number],\n      padding: [2, 2],\n      frames: [27, 28, 29],\n      label: \"build\\nsettlement\",\n      disabled: {\n        proximity: [\"house\", \"Too close to\\nanother house\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"house\",\n            selfSelect: true,\n          },\n        },\n        {\n          selfDestroy: true,\n        },\n      ],\n    },\n  ],\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { BEAVER_ANIMATION, BEAVER_WAIT_ANIMATION } from \"../animations/beaver\";\n\nexport const BEAVER_RESEARCH: Research = {\n  name: \"beaver\",\n  description: \"Beavers can build dams to turn rivers into lakes.\",\n  icon: BEAVER_ANIMATION,\n  waitIcon: BEAVER_WAIT_ANIMATION,\n  dependency: [\"squirrel\"],\n  cost: 30,\n  recommended: 5,\n  // forceInDebug: true,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { COW_ANIMATION, COW_WAIT_ANIMATION } from \"../animations/cow\";\n\nexport const BOVINE_RESEARCH: Research = {\n  name: \"bovine\",\n  description: \"Cows are your workers.\\nUse them to harvest resources.\",\n  icon: COW_ANIMATION,\n  waitIcon: COW_WAIT_ANIMATION,\n  dependency: [],\n  cost: 10,\n  recommended: 1,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { DOG_ANIMATION, DOG_WAIT_ANIMATION } from \"../animations/dog\";\n\nexport const CANINE_RESEARCH: Research = {\n  name: \"canine\",\n  description: \"Dogs are your scouts.\\nUse them to explore the world.\",\n  icon: DOG_ANIMATION,\n  waitIcon: DOG_WAIT_ANIMATION,\n  dependency: [],\n  cost: 10,\n  recommended: 2,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { SQUIRREL_ANIMATION, SQUIRREL_WAIT_ANIMATION } from \"../animations/squirrel\";\n\nexport const SQUIRREL_RESEARCH: Research = {\n  name: \"nutology\",\n  description: \"Squirrels can climb trees and throw nuts.\",\n  icon: SQUIRREL_ANIMATION,\n  waitIcon: SQUIRREL_WAIT_ANIMATION,\n  dependency: [],\n  cost: 20,\n  recommended: 4,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { TURTLE_ANIMATION, TURTLE_WAIT_ANIMATION } from \"../animations/turtle\";\n\nexport const TORTOISE_RESEARCH: Research = {\n  name: \"tortoise\",\n  description: \"Turtles can carry others on water, and have high defense.\",\n  icon: TURTLE_ANIMATION,\n  waitIcon: TURTLE_WAIT_ANIMATION,\n  dependency: [],\n  cost: 20,\n  recommended: 5,\n  // forceInDebug: true,\n};\n",
  "import type { Research } from \"../../definition/research\";\n\nexport const WOLVES_RESEARCH: Research = {\n  name: \"wolves\",\n  description: \"Wolves are ferocious fighters.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [46],\n  },\n  dependency: [\"canine\"],\n  cost: 40,\n  recommended: 7,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const BRAIN_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [58],\n  },\n  global: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const GOLD_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [59],\n  },\n  global: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const TRADE_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [60],\n  },\n  global: true,\n  hidden: true,\n};\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const WHEAT_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [56],\n  },\n  forGrowth: true,\n}\n",
  "import type { ResourceType } from \"../../definition/resource-type\";\n\nexport const WOOD_RESOURCE: ResourceType = {\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [57],\n  },\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const TRIANGLE_ANIMATION: Anim = {\n  name: \"triangle\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    0, 1, 2, 3,\n  ],\n};\n\nexport const HOVER_ANIMATION: Anim = {\n  name: \"hover\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    20,\n  ],\n};\n\nexport const INDIC_ANIMATION: Anim = {\n  name: \"indic\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 3,\n  frames: [\n    9, 9, 10, 11, 12, 11, 10,\n  ],\n};\n\nexport const BLUE_ANIMATION: Anim = {\n  name: \"blue\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    13,\n  ],\n};\n\nexport const BLUE_SELECTED_ANIMATION: Anim = {\n  name: \"blue_selected\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n    23, 23, 23, 23,\n    24, 24, 24,\n    23, 23, 23, 23,\n    22, 22, 22, 22, 22, 22, 22, 22, 22, 22,\n  ],\n};\n\nexport const WAIT_ICON: Anim = {\n  name: \"wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    110,\n  ],\n}\n\nexport const WAVE_ICON: Anim = {\n  name: \"wave\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    111,\n  ],\n}\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const GRASSLAND_ANIMATION: Anim = {\n  name: \"grassland\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    14,\n  ],\n};\n\nexport const PLAIN_ANIMATION: Anim = {\n  name: \"plain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    30,\n  ],\n};\n\nexport const GRASS_ANIMATION: Anim = {\n  name: \"grass\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    15,\n  ],\n};\n\nexport const TREE_ANIMATION: Anim = {\n  name: \"tree\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    16,\n  ],\n};\n\nexport const TREE_LEAF_ANIMATION: Anim = {\n  name: \"tree_leaf\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    17,\n  ],\n};\n\nexport const MOUNTAIN_ANIMATION: Anim = {\n  name: \"mountain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    25,\n  ],\n};\n\nexport const LAKE_ANIMATION: Anim = {\n  name: \"lake\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    33,\n  ],\n};\n\nexport const WAVE_ANIMATION: Anim = {\n  name: \"wave\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    34,\n  ],\n};\n\nexport const RIVER_ANIMATION: Anim = {\n  name: \"river\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    32,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const CLOUD_ANIMATION: Anim = {\n  name: \"cloud\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    18,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SHADOW_ANIMATION: Anim = {\n  name: \"shadow\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    19,\n  ],\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const DIGITS_ANIMATION: Anim[] = new Array(10)\n  .fill(36)\n  .map((base, i) => ({\n    name: `num_${i}`,\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    frames: [\n      base + i,\n    ],\n  }));\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const WHEAT_ANIMATION: Anim = {\n  name: \"wheat\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    56,\n  ],\n};\n\nexport const WOOD_ANIMATION: Anim = {\n  name: \"wood\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    57,\n  ],\n};\n\nexport const BRAIN_ANIMATION: Anim = {\n  name: \"brain\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    58,\n  ],\n};\n\nexport const GOLD_ANIMATION: Anim = {\n  name: \"gold\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    59,\n  ],\n};\n\nexport const TRADE_ANIMATION: Anim = {\n  name: \"trade\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    60,\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const CURSOR: Elem = {\n  name: \"cursor\",\n  type: \"cursor\",\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"triangle\",\n  },\n  mouseFollower: {\n    snap: 1,\n  },\n  dynamic: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const CLOUD: Elem = {\n  name: \"cloud\",\n  type: \"cloud\",\n  owner: 0,\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n  },\n  animation: {\n    name: \"cloud\",\n  },\n  spread: {\n    animation: \"cloud\",\n    count: [4, 5] as [number, number],\n    color: \"#ffffffaa\",\n    size: 1.2,\n    moving: .1,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const GRASS: Elem = {\n  name: \"grass\",\n  type: \"tile\",\n  resourcesProduced: {\n    wheat: 2,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"grassland\",\n  },\n  spread: {\n    animation: \"grass\",\n    count: [3, 7] as [number, number],\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const PLAIN: Elem = {\n  name: \"plain\",\n  type: \"tile_overlay\",\n  resourcesProduced: {\n    wood: 1,\n    wheat: -1,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: .9,\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"plain\",\n  },\n  spread: {\n    animation: \"grass\",\n    count: [3, 7] as [number, number],\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const LAKE: Elem = {\n  // definition: \"lake\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: .1,\n  },\n\n\n  name: \"lake\",\n  type: \"tile_overlay\",\n  resourcesProduced: {\n    wheat: -1,\n    trade: 2,\n  },\n  gameObject: {\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"lake\",\n  },\n  spread: {\n    animation: \"wave\",\n    count: [3, 7] as [number, number],\n  },\n  branchOut: {\n    count: [3, 5] as [number, number],\n    chance: .3,\n    element: {\n      definition: \"river\",\n    },\n  },\n  water: true,\n  copy: true,\n\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const TREE: Elem = {\n  definition: \"tree\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.5,\n    farFromCenter: 4,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const MOUNTAIN: Elem = {\n  name: \"mountain\",\n  type: \"decor\",\n  resourcesProduced: {\n    wheat: -2,\n  },\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.3,\n  },\n  condition: {\n    tile: \"plain\",\n  },\n  gameObject: {\n    pos: [0, 0] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"mountain\",\n  },\n  spread: {\n    animation: \"mountain\",\n    count: [8, 10] as [number, number],\n    radius: .3,\n    behind: true,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const HOBO_DEFINITION: Elem = {\n  name: \"hobo\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    offset: [0, .2] as [number, number],\n    size: [1.2, 1.2] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"hobo\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"hobo_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"hobo_jump\",\n    distance: 1,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 2,\n    defense: 2,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SHEEP: Elem = {\n  definition: \"sheep\",\n  owner: 1,\n  disableQuickActions: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const CABANA: Elem = {\n  name: \"cabana\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.1,\n    farFromCenter: 4,\n  },\n  definition: \"cabana\",\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const HOBO_ANIMATION: Anim = {\n  name: \"hobo\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64],\n  frames: [\n    94,\n  ],\n};\n\nexport const HOBO_WAIT_ANIMATION: Anim = {\n  name: \"hobo_wait\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 10,\n  frames: [\n    94, 95,\n  ],\n};\n\nexport const HOBO_JUMP_ANIMATION: Anim = {\n  name: \"hobo_jump\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  mul: 2,\n  frames: [\n    94, 96, 94, 97,\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SQUIRREL_DEFINITION: Elem = {\n  name: \"squirrel\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"squirrel\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"squirrel_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"squirrel_jump\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    animation: \"squirrel_attack\",\n    range: 2,\n    damage: 2,\n    defense: 1,\n    attackAfterMove: true,\n    projectile: \"nut\",\n  },\n  canCrossTerrains: [\"tree\"],\n  advise: {\n    name: \"squirrel\",\n    message: \"Squirrel can throw nuts and foes, and climb on trees.\\nYou can also find some buttons on the bottom left for additional actions.\\nHover over them to see what they do.\",\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const TEST_UNITS: Elem[] = [\n  // {\n  //   definition: \"hobo\",\n  //   owner: 0,\n  //   gameObject: {\n  //     offset: [0, .2] as [number, number],\n  //     size: [1.2, 1.2] as [number, number],\n  //     speed: 0.08,\n  //     pos: [2, 0] as [number, number],\n  //   },\n  //   debug: true,\n  // },\n  // {\n  //   definition: \"squirrel\",\n  //   owner: 1,\n  //   gameObject: {\n  //     pos: [-2, 0] as [number, number],\n  //   },\n  //   debug: true,\n  // },\n];\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SOLDIER_ANIMATION: Record<string, Anim> = {\n  soldier_blue_center_down_still: {\n    name: \"soldier_blue_center_down_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      62,\n    ],\n  },\n  soldier_red_center_down_still: {\n    name: \"soldier_red_center_down_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      65,\n    ],\n  },\n  soldier_blue_center_down_walk: {\n    name: \"soldier_blue_center_down_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      62, 63, 64, 63,\n    ],\n  },\n  soldier_red_center_down_walk: {\n    name: \"soldier_red_center_down_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      65, 66, 67, 66,\n    ],\n  },\n  soldier_blue_center_up_still: {\n    name: \"soldier_blue_center_up_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      68,\n    ],\n  },\n  soldier_red_center_up_still: {\n    name: \"soldier_red_center_up_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      71,\n    ],\n  },\n  soldier_blue_center_up_walk: {\n    name: \"soldier_blue_center_up_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      68, 69, 70, 69,\n    ],\n  },\n  soldier_red_center_up_walk: {\n    name: \"soldier_red_center_up_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      71, 72, 73, 72,\n    ],\n  },\n  soldier_blue_right_down_still: {\n    name: \"soldier_blue_right_down_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      74,\n    ],\n  },\n  soldier_red_right_down_still: {\n    name: \"soldier_red_right_down_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      77,\n    ],\n  },\n  soldier_blue_right_down_walk: {\n    name: \"soldier_blue_right_down_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      74, 75, 76, 75,\n    ],\n  },\n  soldier_red_right_down_walk: {\n    name: \"soldier_red_right_down_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      77, 78, 79, 78,\n    ],\n  },\n  soldier_blue_right_up_still: {\n    name: \"soldier_blue_right_up_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      80,\n    ],\n  },\n  soldier_red_right_up_still: {\n    name: \"soldier_red_right_up_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      83,\n    ],\n  },\n  soldier_blue_right_up_walk: {\n    name: \"soldier_blue_right_up_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      80, 81, 82, 81,\n    ],\n  },\n  soldier_red_right_up_walk: {\n    name: \"soldier_red_right_up_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      83, 84, 85, 84,\n    ],\n  },\n  soldier_blue_right_center_still: {\n    name: \"soldier_blue_right_center_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      86,\n    ],\n  },\n  soldier_red_right_center_still: {\n    name: \"soldier_red_right_center_still\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    frames: [\n      90,\n    ],\n  },\n  soldier_blue_right_center_walk: {\n    name: \"soldier_blue_right_center_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      86, 87, 88, 89,\n    ],\n  },\n  soldier_red_right_center_walk: {\n    name: \"soldier_red_right_center_walk\",\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64],\n    mul: 5,\n    frames: [\n      90, 91, 92, 93,\n    ],\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const SOLDIER_DEFINITION: Elem = {\n  name: \"soldier\",\n  type: \"unit\",\n  hitpoints: 15,\n  maxHitPoints: 15,\n  gameObject: {\n    offset: [0, .2] as [number, number],\n    size: [1.2, 1.2] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"soldier_blue_center_down_still\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"soldier_blue_center_down_walk\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"soldier_blue_center_down_walk\",\n    distance: 1,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 2,\n    defense: 2,\n  },\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const NUT_ANIMATION: Anim = {\n  name: \"nut\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    105,\n  ],\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { SHEEP_ANIMATION, SHEEP_WAIT_ANIMATION } from \"../animations/sheep\";\n\nexport const OVICULTURE_RESEARCH: Research = {\n  name: \"oviculture\",\n  description: \"You can spawn more sheeps, which build settlements.\",\n  icon: SHEEP_ANIMATION,\n  waitIcon: SHEEP_WAIT_ANIMATION,\n  dependency: [],\n  cost: 10,\n  recommended: 3,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const BEAVER_DEFINITION: Elem = {\n  name: \"beaver\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.5, 1.5] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"beaver\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"beaver_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"beaver_jump\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    animation: \"beaver_attack\",\n    damage: 1,\n    defense: 2,\n  },\n  canCrossTerrains: [\"tree\", \"lake\"],\n  advise: {\n    \"name\": \"beaver\",\n    \"message\": \"Beavers can cut down trees and turn rivers into lakes.\",\n  },\n};\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { BEAVER_ANIMATION } from \"../animations/beaver\";\nimport { SQUIRREL_ANIMATION } from \"../animations/squirrel\";\n\nexport const SQUIRREL_MENU: Menu = {\n  name: \"squirrel\",\n  description: \"Squirrels can climb on trees and throw nuts.\",\n  icon: SQUIRREL_ANIMATION,\n  items: [\n    {\n      name: \"beaver\",\n      ...BEAVER_ANIMATION,\n      label: \"evolve into\\nbeaver\",\n      researchNeeded: [\"beaver\"],\n      resourceCost: {\n        gold: 10,\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"beaver\",\n            selfSelect: true,\n          },\n        },\n        {\n          selfDestroy: true,\n        },\n      ],\n    },\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const BULL_DEFINITION: Elem = {\n  name: \"bull\",\n  type: \"unit\",\n  hitpoints: 15,\n  maxHitPoints: 15,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.08,\n  },\n  animation: {\n    name: \"bull\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"bull_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"bull_jump\",\n    distance: 2,\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 3.5,\n    defense: 1,\n    attackAfterMove: true,\n    attackAfterAttack: true,\n  }\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { BULL_ANIMATION, BULL_WAIT_ANIMATION } from \"../animations/bull\";\n\nexport const TAUROLOGY_RESEARCH: Research = {\n  name: \"taurology\",\n  description: \"Bulls are strong fighters.\",\n  icon: BULL_ANIMATION,\n  waitIcon: BULL_WAIT_ANIMATION,\n  dependency: [\"bovine\"],\n  cost: 40,\n  recommended: 7,\n  // forceInDebug: true,\n};\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { LAKE_ANIMATION, RIVER_ANIMATION, TREE_ANIMATION } from \"../animations/terrain\";\n\nexport const BEAVER_MENU: Menu = {\n  name: \"beaver\",\n  description: \"Beavers can build dam, turning rivers into lakes.\\nThey can also cut down trees.\",\n  icon: {\n    imageSource: \"./assets/tiles.png\",\n    spriteSize: [64, 64] as [number, number],\n    padding: [2, 2],\n    frames: [51],\n  },\n  items: [\n    {\n      name: \"lake\",\n      ...LAKE_ANIMATION,\n      label: \"make lake\",\n      hidden: {\n        notOnTile: [\"river\", \"Must be\\non a river\"],\n        onTile: [\"lake\", \"Already a lake\"],\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          create: {\n            definition: \"lake\",\n          }\n        },\n        {\n          clearMoves: true,\n        },\n      ],\n    },\n    {\n      name: \"river\",\n      ...RIVER_ANIMATION,\n      label: \"produce a river\",\n      hidden: {\n        onTile: [\"river\", \"Already on a river\"],\n        nonProximity: [\"lake\", \"Must be\\nnext to a lake\"],\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          create: {\n            definition: \"river\",\n          }\n        },\n        {\n          clearMoves: true,\n        },\n      ],\n    },\n    {\n      name: \"tree\",\n      ...TREE_ANIMATION,\n      label: \"cut tree\",\n      hidden: {\n        notOnTile: [\"tree\", \"Must be\\non a tree\"],\n      },\n      actions: [\n        {\n          deselect: true,\n        },\n        {\n          destroy: \"tree\",\n        },\n        {\n          clearMoves: true,\n        },\n      ],\n    }\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const TREE_DEFINITION: Elem = {\n  name: \"tree\",\n  type: \"decor\",\n  resourcesProduced: {\n    wood: 1,\n  },\n  condition: {\n    tile: \"plain\",\n    noTile: \"lake\",\n  },\n  gameObject: {\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"tree\",\n  },\n  spread: {\n    animation: \"tree_leaf\",\n    count: [50, 100] as [number, number],\n    radius: .25,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const TURTLE_DEFINITION: Elem = {\n  name: \"turtle\",\n  type: \"unit\",\n  hitpoints: 10,\n  maxHitPoints: 10,\n  gameObject: {\n    size: [1.8, 1.8] as [number, number],\n    speed: 0.03,\n  },\n  animation: {\n    name: \"turtle\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"turtle_wait\",\n    indic: {\n      animation: \"indic\",\n    },\n    moveIndic: {\n      animation: \"blue\",\n      selectedAnimation: \"blue_selected\",\n    },\n  },\n  move: {\n    animation: \"turtle_jump\",\n  },\n  shadow: {\n    animation: \"shadow\",\n  },\n  clearCloud: true,\n  dynamic: true,\n  turn: {\n    moves: 1,\n    attacks: 1,\n  },\n  attack: {\n    damage: 1,\n    defense: 4,\n  },\n  canCrossTerrains: [\"lake\"],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const FRUIT_DEFINITION: Elem = {\n  name: \"fruit\",\n  type: \"goodies\",\n  resourcesProduced: {\n    wheat: 2,\n  },\n  condition: {\n    noTile: [\"lake\", \"mountain\"],\n  },\n  gameObject: {\n    size: [1, 1] as [number, number],\n  },\n  animation: {\n    name: \"fruit\",\n  },\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const FRUIT_ANIMATION: Anim = {\n  name: \"fruit\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    116,\n  ],\n};\n\nexport const POTGOLD_ANIMATION: Anim = {\n  name: \"potgold\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    117,\n  ],\n};\n\nexport const CORAL_ANIMATION: Anim = {\n  name: \"coral\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    118,\n  ],\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const FRUIT: Elem = {\n  definition: \"fruit\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.03,\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const POTGOLD_DEFINITION: Elem = {\n  name: \"potgold\",\n  type: \"goodies\",\n  resourcesProduced: {\n    gold: 5,\n  },\n  condition: {\n    tile: \"mountain\",\n  },\n  gameObject: {\n    size: [1, 1] as [number, number],\n  },\n  animation: {\n    name: \"potgold\",\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const CORAL_DEFINITION: Elem = {\n  name: \"coral\",\n  type: \"goodies\",\n  resourcesProduced: {\n    wheat: 2,\n  },\n  condition: {\n    tile: \"lake\",\n  },\n  gameObject: {\n    size: [1, 1] as [number, number],\n  },\n  animation: {\n    name: \"coral\",\n  },\n};\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const CORAL: Elem = {\n  definition: \"coral\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: 0.1,\n  },\n}\n",
  "import type { Elem } from \"../../definition/elem\";\nimport { SIZE } from \"../constant\";\n\nexport const POTGOLD: Elem = {\n  definition: \"potgold\",\n  group: {\n    grid: [SIZE + 1, SIZE + 1],\n    chance: .1,\n  },\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const GLOBE_ANIMATION: Anim = {\n  name: \"globe\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    119,\n  ],\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { GLOBE_ANIMATION } from \"../animations/globe\";\n\nexport const EXPLORATION: Research = {\n  name: \"exploration\",\n  description: \"Exploration lets you view the entire map.\",\n  icon: GLOBE_ANIMATION,\n  dependency: [\"village\"],// [\"eagle\"],\n  cost: 100,\n  recommended: 10,\n  action: {\n    clearFogOfWar: true,\n  },\n  // forceInDebug: true,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { WOOD_ANIMATION } from \"../animations/resources\";\n\nexport const PRODUCTIVITY_RESEARCH: Research = {\n  name: \"productivity\",\n  description: \"Each settlement will produces one unit of production.\",\n  icon: WOOD_ANIMATION,\n  dependency: [],\n  cost: 5,\n  recommended: 0,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { HOUSE_EXPAND_ANIMATION } from \"../animations/house\";\n\nexport const EXPANSION_RESEARCH: Research = {\n  name: \"expansion\",\n  description: \"Settlements have a larger area for harvesting resources.\",\n  icon: HOUSE_EXPAND_ANIMATION,\n  dependency: [\"oviculture\"],\n  cost: 20,\n  recommended: 5,\n  action: {\n    updateHouseCloud: true,\n  },\n  // forceInDebug: true,\n};\n",
  "import type { Elem } from \"../../definition/elem\";\n\nexport const VILLAGE_DEFINITION: Elem = {\n  name: \"village\",\n  type: \"house\",\n  level: 7,\n  gameObject: {\n    offset: [0, .7] as [number, number],\n    size: [2, 2] as [number, number],\n  },\n  animation: {\n    name: \"village\",\n  },\n  onHover: {\n    hideCursor: true,\n    indic: {\n      animation: \"hover\",\n    },\n  },\n  selected: {\n    animation: \"village\",\n    indic: {\n      animation: \"indic\",\n    },\n  },\n  dynamic: true,\n  settler: true,\n  harvesting: true,\n  building: true,\n  turn: {\n    moves: 0,\n    attacks: 0,\n    actions: 1,\n  },\n  resourcesProduced: {\n    // wood: 1,\n    trade: 2,\n  },\n  rewards: [],\n  advise: {\n    name: \"house\",\n    message: \"Villages hold more population and can produce more resources.\",\n  },\n  clearCloud: true,\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { VILLAGE_ANIMATION } from \"../animations/house\";\n\nexport const VILLAGE_RESEARCH: Research = {\n  name: \"village\",\n  description: \"Your settlements can turn into a village, growing beyond level 6.\",\n  icon: VILLAGE_ANIMATION,\n  dependency: [\"oviculture\"],\n  cost: 30,\n  recommended: 5,\n  forceInDebug: true,\n};\n",
  "import type { Anim } from \"../../definition/animation\";\n\nexport const SPACESHIP_ANIMATION: Anim = {\n  name: \"spaceship\",\n  imageSource: \"./assets/tiles.png\",\n  spriteSize: [64, 64] as [number, number],\n  frames: [\n    124, 125, 126,\n  ],\n};\n",
  "import type { Menu } from \"../../definition/menu\";\nimport { COW_ANIMATION } from \"../animations/cow\";\nimport { DOG_ANIMATION } from \"../animations/dog\";\nimport { VILLAGE_ANIMATION } from \"../animations/house\";\nimport { SHEEP_ANIMATION } from \"../animations/sheep\";\nimport { SPACESHIP_ANIMATION } from \"../animations/spaceship\";\nimport { SQUIRREL_ANIMATION } from \"../animations/squirrel\";\nimport { TURTLE_ANIMATION } from \"../animations/turtle\";\n\nexport const VILLAGE_MENU: Menu = {\n  name: \"village\",\n  description: \"Villages hold a larger population.\",\n  icon: VILLAGE_ANIMATION,\n  items: [\n    {\n      name: \"sheep\",\n      imageSource: \"./assets/tiles.png\",\n      ...SHEEP_ANIMATION,\n      label: \"spawn\\nsheep\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        levelBelowEqual: [1, \"Settlement\\nlevel too low\"],\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          level: -1,\n          create: {\n            definition: \"sheep\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"oviculture\"],\n    },\n    {\n      name: \"cow\",\n      imageSource: \"./assets/tiles.png\",\n      ...COW_ANIMATION,\n      resourceCost: {\n        wood: 5,\n      },\n      label: \"spawn\\ncow\",\n      hidden: {\n        occupied: [\"unit\", \"Tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        unitLimit: [\"cow\", \"Increase settlement level\\nto spawn more\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"cow\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"bovine\"],\n    },\n    {\n      name: \"dog\",\n      imageSource: \"./assets/tiles.png\",\n      ...DOG_ANIMATION,\n      label: \"spawn\\ndog\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"dog\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"canine\"],\n    },\n    {\n      name: \"squirrel\",\n      imageSource: \"./assets/tiles.png\",\n      ...SQUIRREL_ANIMATION,\n      label: \"spawn\\nsquirrel\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"squirrel\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"squirrel\"],\n    },\n    {\n      name: \"turtle\",\n      ...TURTLE_ANIMATION,\n      label: \"spawn\\nturtle\",\n      resourceCost: {\n        wood: 10,\n      },\n      hidden: {\n        occupied: [\"unit\", \"tile occupied\\nby a unit\"],\n      },\n      disabled: {\n        cannotAct: [true, \"wait\\nnext turn\"],\n      },\n      actions: [\n        {\n          deselect: true,\n          create: {\n            definition: \"turtle\",\n            selfSelect: true,\n          },\n        },\n      ],\n      researchNeeded: [\"tortoise\"],\n    },\n    {\n      name: \"spaceship\",\n      ...SPACESHIP_ANIMATION,\n      label: \"build\\nspaceship\",\n      disabled: {\n        levelBelowEqual: [15, \"You need to level up\\nyour village to level 16\"],\n      },\n      resourceCost: {\n        wood: 200,\n        gold: 200,\n      },\n      researchNeeded: [\"spaceship\"],\n      actions: [\n        {\n          spaceship: true,\n        },\n      ]\n    },\n  ],\n};\n",
  "import type { Research } from \"../../definition/research\";\nimport { SPACESHIP_ANIMATION } from \"../animations/spaceship\";\n\nexport const SPACESHIP_RESEARCH: Research = {\n  name: \"spaceship\",\n  description: \"Build a spaceship to leave this planet.\",\n  icon: SPACESHIP_ANIMATION,\n  dependency: [\"exploration\"],\n  cost: 200,\n  recommended: 20,\n  forceInDebug: true,\n};\n",
  "import type { Scene } from \"../definition/scene\";\nimport { CABANA_DEFINITION } from \"./definitions/cabana\";\nimport { COW_DEFINITION } from \"./definitions/cow\";\nimport { DOG_DEFINITION } from \"./definitions/dog\";\nimport { HOUSE_DEFINITION } from \"./definitions/house\";\nimport { RIVER_DEFINITION } from \"./definitions/river\";\nimport { SHEEP_DEFINITION } from \"./definitions/sheep\";\nimport { COW_MENU } from \"./menu/cow-menu\";\nimport { HOUSE_MENU } from \"./menu/house-menu\";\nimport { SHEEP_MENU } from \"./menu/sheep-menu\";\nimport { BEAVER_RESEARCH } from \"./research/beaver\";\nimport { BOVINE_RESEARCH } from \"./research/bovine\";\nimport { CANINE_RESEARCH } from \"./research/canine\";\nimport { ELEPHANT_RESEARCH } from \"./research/elephant\";\nimport { EAGLE_RESEARCH } from \"./research/eagle\";\nimport { GOAT_RESEARCH } from \"./research/goat\";\nimport { HORSE_RESEARCH } from \"./research/horse\";\nimport { LAMA_RESEARCH } from \"./research/lama\";\nimport { MONKEY_RESEARCH } from \"./research/monkey\";\nimport { OWL_RESEARCH } from \"./research/owl\";\nimport { PANDA_RESEARCH } from \"./research/panda\";\nimport { PIG_RESEARCH } from \"./research/pig\";\nimport { SKUNK_RESEARCH } from \"./research/skunk\";\nimport { SQUIRREL_RESEARCH } from \"./research/squirrel\";\nimport { TORTOISE_RESEARCH } from \"./research/tortoise\";\nimport { WOLVES_RESEARCH } from \"./research/wolves\";\nimport { BRAIN_RESOURCE } from \"./resources/brain\";\nimport { GOLD_RESOURCE } from \"./resources/gold\";\nimport { TRADE_RESOURCE } from \"./resources/trade\";\nimport { WHEAT_RESOURCE } from \"./resources/wheat\";\nimport { WOOD_RESOURCE } from \"./resources/wood\";\nimport { RABBIT_RESEARCH } from \"./research/rabbit\";\nimport { BLUE_ANIMATION, BLUE_SELECTED_ANIMATION, HOVER_ANIMATION, INDIC_ANIMATION, TRIANGLE_ANIMATION, WAIT_ICON, WAVE_ICON } from \"./animations/indicators\";\nimport { SHEEP_ANIMATION, SHEEP_JUMP_ANIMATION, SHEEP_WAIT_ANIMATION } from \"./animations/sheep\";\nimport { GRASS_ANIMATION, GRASSLAND_ANIMATION, LAKE_ANIMATION, MOUNTAIN_ANIMATION, PLAIN_ANIMATION, RIVER_ANIMATION, TREE_ANIMATION, TREE_LEAF_ANIMATION, WAVE_ANIMATION } from \"./animations/terrain\";\nimport { CLOUD_ANIMATION } from \"./animations/cloud\";\nimport { SHADOW_ANIMATION } from \"./animations/shadow\";\nimport { CABANA_ANIMATION, HOUSE_ANIMATION, HOUSE_EXPAND_ANIMATION, VILLAGE_ANIMATION } from \"./animations/house\";\nimport { DIGITS_ANIMATION } from \"./animations/digits\";\nimport { DOG_ANIMATION, DOG_JUMP_ANIMATION, DOG_WAIT_ANIMATION } from \"./animations/dog\";\nimport { COW_ANIMATION, COW_JUMP_ANIMATION, COW_SLEEP_ANIMATION, COW_WAIT_ANIMATION } from \"./animations/cow\";\nimport { BRAIN_ANIMATION, GOLD_ANIMATION, TRADE_ANIMATION, WHEAT_ANIMATION, WOOD_ANIMATION } from \"./animations/resources\";\nimport { CURSOR } from \"./elems/cursor\";\nimport { CLOUD } from \"./elems/cloud\";\nimport { GRASS } from \"./elems/grass\";\nimport { PLAIN } from \"./elems/plain\";\nimport { LAKE } from \"./elems/lake\";\nimport { TREE } from \"./elems/tree\";\nimport { MOUNTAIN } from \"./elems/mountain\";\nimport { HOBO_DEFINITION } from \"./definitions/hobo\";\nimport { SHEEP } from \"./elems/sheep\";\nimport { CABANA } from \"./elems/cabana\";\nimport { HOBO_ANIMATION, HOBO_JUMP_ANIMATION, HOBO_WAIT_ANIMATION } from \"./animations/hobo\";\nimport { SQUIRREL_ANIMATION, SQUIRREL_ATTACK_ANIMATION, SQUIRREL_JUMP_ANIMATION, SQUIRREL_WAIT_ANIMATION } from \"./animations/squirrel\";\nimport { SQUIRREL_DEFINITION } from \"./definitions/squirrel\";\nimport { TEST_UNITS } from \"./elems/test-units\";\nimport { SOLDIER_ANIMATION } from \"./animations/soldier\";\nimport { SOLDIER_DEFINITION } from \"./definitions/soldier\";\nimport { NUT_ANIMATION } from \"./animations/nut\";\nimport { CROCODILE_RESEARCH } from \"./research/crocodile\";\nimport { OVICULTURE_RESEARCH } from \"./research/oviculture\";\nimport { BEAVER_ANIMATION, BEAVER_JUMP_ANIMATION, BEAVER_WAIT_ANIMATION } from \"./animations/beaver\";\nimport { BEAVER_DEFINITION } from \"./definitions/beaver\";\nimport { SQUIRREL_MENU } from \"./menu/squirrel-menu\";\nimport { BULL_ANIMATION, BULL_JUMP_ANIMATION, BULL_WAIT_ANIMATION } from \"./animations/bull\";\nimport { BULL_DEFINITION } from \"./definitions/bull\";\nimport { TAUROLOGY_RESEARCH } from \"./research/taurology\";\nimport { BEAVER_MENU } from \"./menu/beaver-menu\";\nimport { TURTLE_ANIMATION, TURTLE_JUMP_ANIMATION, TURTLE_WAIT_ANIMATION } from \"./animations/turtle\";\nimport { TREE_DEFINITION } from \"./definitions/tree\";\nimport { TURTLE_DEFINITION } from \"./definitions/turtle\";\nimport { FRUIT_DEFINITION } from \"./definitions/fruit\";\nimport { CORAL_ANIMATION, FRUIT_ANIMATION, POTGOLD_ANIMATION } from \"./animations/goodies\";\nimport { FRUIT } from \"./elems/fruit\";\nimport { POTGOLD_DEFINITION } from \"./definitions/potgold\";\nimport { CORAL_DEFINITION } from \"./definitions/coral\";\nimport { CORAL } from \"./elems/coral\";\nimport { POTGOLD } from \"./elems/potgold\";\nimport { EXPLORATION as EXPLORATION_RESEARCH, } from \"./research/exploration\";\nimport { PRODUCTIVITY_RESEARCH as PRODUCTIVITY_RESEARCH } from \"./research/productivity\";\nimport { EXPANSION_RESEARCH } from \"./research/expansion\";\nimport { VILLAGE_DEFINITION } from \"./definitions/village\";\nimport { VILLAGE_RESEARCH } from \"./research/village\";\nimport { VILLAGE_MENU } from \"./menu/village-menu\";\nimport { SPACESHIP_RESEARCH } from \"./research/spaceship\";\nimport { SPACESHIP_ANIMATION } from \"./animations/spaceship\";\n\nexport const worldData: Scene = {\n  scale: 80,\n  // clearFogOfWar: true,\n  quickActions: [\n    {\n      name: \"wait\",\n      icon: WAIT_ICON,\n      description: \"Leave the animal idle until it encounters a human.\",\n    },\n    {\n      name: \"abandon\",\n      icon: WAVE_ICON,\n      description: \"Release the animal into the wild.\",\n    },\n  ],\n  turn: {\n    player: 1,\n    turn: 1,\n  },\n  players: [\n    {\n      tax: 50,\n      resources: {\n        brain: 0,\n        gold: 0,\n      },\n    },\n  ],\n  layers: {\n    \"tile\": 0,\n    \"tile_overlay\": 1,\n    \"road\": 3,\n    \"house\": 4,\n    \"unit\": 4,\n    \"decor\": 4,\n    \"goodies\": 5,\n    \"cloud\": 6,\n    \"cursor\": 7,\n  },\n  colayers: {\n    \"house\": 1,\n    \"decor\": 2,\n    \"unit\": 3,\n  },\n  definitions: [\n    HOBO_DEFINITION,\n    SHEEP_DEFINITION,\n    DOG_DEFINITION,\n    COW_DEFINITION,\n    RIVER_DEFINITION,\n    HOUSE_DEFINITION,\n    CABANA_DEFINITION,\n    SQUIRREL_DEFINITION,\n    SOLDIER_DEFINITION,\n    BEAVER_DEFINITION,\n    BULL_DEFINITION,\n    TREE_DEFINITION,\n    TURTLE_DEFINITION,\n    FRUIT_DEFINITION,\n    POTGOLD_DEFINITION,\n    CORAL_DEFINITION,\n    VILLAGE_DEFINITION,\n  ],\n  animations: [\n    TRIANGLE_ANIMATION,\n    SHEEP_ANIMATION,\n    SHEEP_WAIT_ANIMATION,\n    SHEEP_JUMP_ANIMATION,\n    HOVER_ANIMATION,\n    INDIC_ANIMATION,\n    BLUE_ANIMATION,\n    BLUE_SELECTED_ANIMATION,\n    GRASSLAND_ANIMATION,\n    PLAIN_ANIMATION,\n    GRASS_ANIMATION,\n    TREE_ANIMATION,\n    TREE_LEAF_ANIMATION,\n    MOUNTAIN_ANIMATION,\n    CLOUD_ANIMATION,\n    SHADOW_ANIMATION,\n    LAKE_ANIMATION,\n    WAVE_ANIMATION,\n    RIVER_ANIMATION,\n    HOUSE_ANIMATION,\n    CABANA_ANIMATION,\n    ...DIGITS_ANIMATION,\n    DOG_ANIMATION,\n    DOG_WAIT_ANIMATION,\n    DOG_JUMP_ANIMATION,\n    COW_ANIMATION,\n    COW_WAIT_ANIMATION,\n    COW_JUMP_ANIMATION,\n    COW_SLEEP_ANIMATION,\n    WHEAT_ANIMATION,\n    WOOD_ANIMATION,\n    BRAIN_ANIMATION,\n    GOLD_ANIMATION,\n    TRADE_ANIMATION,\n    HOBO_ANIMATION,\n    HOBO_JUMP_ANIMATION,\n    HOBO_WAIT_ANIMATION,\n    SQUIRREL_ANIMATION,\n    SQUIRREL_WAIT_ANIMATION,\n    SQUIRREL_JUMP_ANIMATION,\n    SQUIRREL_ATTACK_ANIMATION,\n    ...Object.values(SOLDIER_ANIMATION),\n    NUT_ANIMATION,\n    BEAVER_ANIMATION,\n    BEAVER_WAIT_ANIMATION,\n    BEAVER_JUMP_ANIMATION,\n    BULL_ANIMATION,\n    BULL_WAIT_ANIMATION,\n    BULL_JUMP_ANIMATION,\n    TURTLE_ANIMATION,\n    TURTLE_WAIT_ANIMATION,\n    TURTLE_JUMP_ANIMATION,\n    FRUIT_ANIMATION,\n    POTGOLD_ANIMATION,\n    CORAL_ANIMATION,\n    HOUSE_EXPAND_ANIMATION,\n    VILLAGE_ANIMATION,\n    SPACESHIP_ANIMATION,\n  ],\n  elems: [\n    CURSOR,\n    CLOUD,\n    SHEEP,\n    GRASS,\n    PLAIN,\n    LAKE,\n    TREE,\n    MOUNTAIN,\n    CABANA,\n    FRUIT,\n    POTGOLD,\n    CORAL,\n    ...TEST_UNITS,\n  ],\n  menu: [\n    SHEEP_MENU,\n    HOUSE_MENU,\n    COW_MENU,\n    SQUIRREL_MENU,\n    BEAVER_MENU,\n    VILLAGE_MENU,\n  ],\n  resources: {\n    wheat: WHEAT_RESOURCE,\n    wood: WOOD_RESOURCE,\n    brain: BRAIN_RESOURCE,\n    gold: GOLD_RESOURCE,\n    trade: TRADE_RESOURCE,\n  },\n  research: [\n    CANINE_RESEARCH,\n    WOLVES_RESEARCH,\n    BOVINE_RESEARCH,\n    SQUIRREL_RESEARCH,\n    OVICULTURE_RESEARCH,\n    TAUROLOGY_RESEARCH,\n    BEAVER_RESEARCH,\n    TORTOISE_RESEARCH,\n    EXPLORATION_RESEARCH,\n    PRODUCTIVITY_RESEARCH,\n    EXPANSION_RESEARCH,\n    VILLAGE_RESEARCH,\n    SPACESHIP_RESEARCH,\n\n    // GOAT_RESEARCH,\n    // SKUNK_RESEARCH,\n    // HORSE_RESEARCH,\n    // MONKEY_RESEARCH,\n    // PANDA_RESEARCH,\n    // PIG_RESEARCH,\n    // ELEPHANT_RESEARCH,\n    // OWL_RESEARCH,\n    // LAMA_RESEARCH,\n    // EAGLE_RESEARCH,\n    // RABBIT_RESEARCH,\n    // CROCODILE_RESEARCH,\n  ],\n};\n(window as any).worldData = worldData;\n",
  "/// <reference lib=\"dom\" />\n/// <reference lib=\"dom.iterable\" />\n\n'use strict';\n\nimport { Manager } from \"./core/manager\";\nimport { worldData } from \"./content/world\";\nimport { engineInit } from \"./lib/littlejs\";\n\nlet manager = new Manager(worldData);\n(window as any).manager = manager;\n\nfunction gameInit() {\n}\n\nfunction gameUpdate() {\n  manager.refresh();\n}\n\nfunction postUpdate() {\n}\n\nfunction render() {\n}\n\nfunction renderPost() {\n}\n\nengineInit(\n  gameInit,\n  gameUpdate,\n  postUpdate,\n  render,\n  renderPost,\n  manager.animation.imageSources,\n)\n"
  ],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "debugId": "0D6A4DDAC138BB8164756e2164756e21",
  "names": []
}